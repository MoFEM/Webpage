<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=9"/>
  <meta name="generator" content="Doxygen 1.9.5"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>MoFEM: MoFEM::CommInterface Struct Reference</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
  <script type="text/javascript " src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML "></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        extensions: ["AMSmath.js"],
        TeX: { equationNumbers: { autoNumber: ["all"],
                                  useLabelIds: true
        } 
        }
    });
    </script>
  <link href="customdoxygen.css" rel="stylesheet" type="text/css" />
  <link href="extra_style.css" rel="stylesheet" type="text/css"/>
  <link rel="apple-touch-icon" sizes="57x57" href="apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="shortcut icon" type="image/png" href="favicon-32x32.png"/>
  <link rel="Bookmark" type="image/png" href="favicon-32x32.png"/>
  <link rel="manifest" href="manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div style="background-color:#011A40" id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 30px;">
  <td id="projectlogo"><img alt="Logo" src="MoFEMLogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <td style="padding-left: 0.5em;" bgcolor="#011A40"
   <div id="projectbrief"><font color="#FFFFFF">v0.14.0</font></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!--Google analytics tags-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-65236130-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2J9RE2P3H5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-2J9RE2P3H5');
</script><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_mo_f_e_m.html">MoFEM</a></li><li class="navelem"><a class="el" href="struct_mo_f_e_m_1_1_comm_interface.html">CommInterface</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="struct_mo_f_e_m_1_1_comm_interface-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MoFEM::CommInterface Struct Reference<div class="ingroups"><a class="el" href="group__mofem.html">MoFEM</a> &raquo; <a class="el" href="group__mofem__bit__ref.html">BitRefManager</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Managing BitRefLevels.  
 <a href="struct_mo_f_e_m_1_1_comm_interface.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_comm_interface_8hpp_source.html">src/interfaces/CommInterface.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MoFEM::CommInterface:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="struct_mo_f_e_m_1_1_comm_interface__inherit__graph.svg" width="192" height="111"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for MoFEM::CommInterface:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="struct_mo_f_e_m_1_1_comm_interface__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a18e5e2368f42823b30af55d8624bd1db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_comm_interface.html#a18e5e2368f42823b30af55d8624bd1db">query_interface</a> (boost::typeindex::type_index type_index, <a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html">UnknownInterface</a> **iface) const</td></tr>
<tr class="separator:a18e5e2368f42823b30af55d8624bd1db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a697543284ca3f775598811e184a6e9b4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_comm_interface.html#a697543284ca3f775598811e184a6e9b4">CommInterface</a> (const <a class="el" href="namespace_mo_f_e_m.html#a8bdfc7559ccb2b6d0021580b5c8a340b">MoFEM::Core</a> &amp;core)</td></tr>
<tr class="separator:a697543284ca3f775598811e184a6e9b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dcdfa927cc476e5a4e72e7db0b6d38b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_comm_interface.html#a4dcdfa927cc476e5a4e72e7db0b6d38b">~CommInterface</a> ()=default</td></tr>
<tr class="memdesc:a4dcdfa927cc476e5a4e72e7db0b6d38b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="struct_mo_f_e_m_1_1_comm_interface.html#a4dcdfa927cc476e5a4e72e7db0b6d38b">More...</a><br /></td></tr>
<tr class="separator:a4dcdfa927cc476e5a4e72e7db0b6d38b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_struct_mo_f_e_m_1_1_unknown_interface')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html">MoFEM::UnknownInterface</a></td></tr>
<tr class="memitem:a525e4d5a451a5bb8c5437d0dd2588de6 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html#a525e4d5a451a5bb8c5437d0dd2588de6">query_interface</a> (boost::typeindex::type_index type_index, <a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html">UnknownInterface</a> **iface) const =0</td></tr>
<tr class="separator:a525e4d5a451a5bb8c5437d0dd2588de6 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5da6216311219ca884defbc048260a20 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memTemplParams" colspan="2">template&lt;class IFACE &gt; </td></tr>
<tr class="memitem:a5da6216311219ca884defbc048260a20 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html#a5da6216311219ca884defbc048260a20">registerInterface</a> (<a class="el" href="classbool.html">bool</a> error_if_registration_failed=true)</td></tr>
<tr class="memdesc:a5da6216311219ca884defbc048260a20 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register interface.  <a href="struct_mo_f_e_m_1_1_unknown_interface.html#a5da6216311219ca884defbc048260a20">More...</a><br /></td></tr>
<tr class="separator:a5da6216311219ca884defbc048260a20 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ab248ec45fca778800dcd92e5171beb inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memTemplParams" colspan="2">template&lt;class IFACE &gt; </td></tr>
<tr class="memitem:a7ab248ec45fca778800dcd92e5171beb inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html#a7ab248ec45fca778800dcd92e5171beb">getInterface</a> (IFACE *&amp;iface) const</td></tr>
<tr class="memdesc:a7ab248ec45fca778800dcd92e5171beb inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get interface refernce to pointer of interface.  <a href="struct_mo_f_e_m_1_1_unknown_interface.html#a7ab248ec45fca778800dcd92e5171beb">More...</a><br /></td></tr>
<tr class="separator:a7ab248ec45fca778800dcd92e5171beb inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66d5ce701795486330f2c1e93c98ece4 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memTemplParams" colspan="2">template&lt;class IFACE &gt; </td></tr>
<tr class="memitem:a66d5ce701795486330f2c1e93c98ece4 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html#a66d5ce701795486330f2c1e93c98ece4">getInterface</a> (IFACE **const iface) const</td></tr>
<tr class="memdesc:a66d5ce701795486330f2c1e93c98ece4 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get interface pointer to pointer of interface.  <a href="struct_mo_f_e_m_1_1_unknown_interface.html#a66d5ce701795486330f2c1e93c98ece4">More...</a><br /></td></tr>
<tr class="separator:a66d5ce701795486330f2c1e93c98ece4 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb77113fbaac3d256b13433f2294fa09 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memTemplParams" colspan="2">template&lt;class IFACE , typename boost::enable_if&lt; boost::is_pointer&lt; IFACE &gt;, int &gt;::type  = 0&gt; </td></tr>
<tr class="memitem:aeb77113fbaac3d256b13433f2294fa09 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memTemplItemLeft" align="right" valign="top">IFACE&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html#aeb77113fbaac3d256b13433f2294fa09">getInterface</a> () const</td></tr>
<tr class="memdesc:aeb77113fbaac3d256b13433f2294fa09 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get interface pointer to pointer of interface.  <a href="struct_mo_f_e_m_1_1_unknown_interface.html#aeb77113fbaac3d256b13433f2294fa09">More...</a><br /></td></tr>
<tr class="separator:aeb77113fbaac3d256b13433f2294fa09 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb77113fbaac3d256b13433f2294fa09 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memTemplParams" colspan="2">template&lt;class IFACE , typename boost::enable_if&lt; boost::is_reference&lt; IFACE &gt;, int &gt;::type  = 0&gt; </td></tr>
<tr class="memitem:aeb77113fbaac3d256b13433f2294fa09 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memTemplItemLeft" align="right" valign="top">IFACE&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html#aeb77113fbaac3d256b13433f2294fa09">getInterface</a> () const</td></tr>
<tr class="memdesc:aeb77113fbaac3d256b13433f2294fa09 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get reference to interface.  <a href="struct_mo_f_e_m_1_1_unknown_interface.html#aeb77113fbaac3d256b13433f2294fa09">More...</a><br /></td></tr>
<tr class="separator:aeb77113fbaac3d256b13433f2294fa09 inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1edce9688bcc856bdb632fd76df3b40b inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memTemplParams" colspan="2">template&lt;class IFACE &gt; </td></tr>
<tr class="memitem:a1edce9688bcc856bdb632fd76df3b40b inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memTemplItemLeft" align="right" valign="top">IFACE *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html#a1edce9688bcc856bdb632fd76df3b40b">getInterface</a> () const</td></tr>
<tr class="memdesc:a1edce9688bcc856bdb632fd76df3b40b inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function returning pointer to interface.  <a href="struct_mo_f_e_m_1_1_unknown_interface.html#a1edce9688bcc856bdb632fd76df3b40b">More...</a><br /></td></tr>
<tr class="separator:a1edce9688bcc856bdb632fd76df3b40b inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5728f8956c62075d9ad8aa6555cb06a inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html#af5728f8956c62075d9ad8aa6555cb06a">~UnknownInterface</a> ()=default</td></tr>
<tr class="separator:af5728f8956c62075d9ad8aa6555cb06a inherit pub_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ab531417c6ed05f8aadbdc455817c4499"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_mo_f_e_m.html#a8bdfc7559ccb2b6d0021580b5c8a340b">MoFEM::Core</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_comm_interface.html#ab531417c6ed05f8aadbdc455817c4499">cOre</a></td></tr>
<tr class="separator:ab531417c6ed05f8aadbdc455817c4499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa346af0e9a56fe3216e16e4cdec8a83e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_comm_interface.html#aa346af0e9a56fe3216e16e4cdec8a83e">dEbug</a></td></tr>
<tr class="separator:aa346af0e9a56fe3216e16e4cdec8a83e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Make elemnts multishared</h2></td></tr>
<tr class="memitem:gac404fd64496d800497280f735633d4aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mofem__problems.html#gac404fd64496d800497280f735633d4aa">resolveSharedFiniteElements</a> (const <a class="el" href="struct_mo_f_e_m_1_1_problem.html">Problem</a> *problem_ptr, const std::string &amp;fe_name, int verb=<a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a>)</td></tr>
<tr class="memdesc:gac404fd64496d800497280f735633d4aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">resolve shared entities for finite elements in the problem  <a href="group__mofem__problems.html#gac404fd64496d800497280f735633d4aa">More...</a><br /></td></tr>
<tr class="separator:gac404fd64496d800497280f735633d4aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacadcc343bfc3ed5782df67eb0645b7e9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mofem__problems.html#gacadcc343bfc3ed5782df67eb0645b7e9">resolveSharedFiniteElements</a> (const std::string name, const std::string &amp;fe_name, int verb=<a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a>)</td></tr>
<tr class="memdesc:gacadcc343bfc3ed5782df67eb0645b7e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">resolve shared entities for finite elements in the problem  <a href="group__mofem__problems.html#gacadcc343bfc3ed5782df67eb0645b7e9">More...</a><br /></td></tr>
<tr class="separator:gacadcc343bfc3ed5782df67eb0645b7e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Make entities multishared</h2></td></tr>
<tr class="memitem:a7fe24f02b7e732ede41285d2b24c5f34"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_comm_interface.html#a7fe24f02b7e732ede41285d2b24c5f34">makeEntitiesMultishared</a> (const <a class="el" href="class_entity_handle.html">EntityHandle</a> *entities, const int num_entities, const int owner_proc=0, int verb=<a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a>)</td></tr>
<tr class="memdesc:a7fe24f02b7e732ede41285d2b24c5f34"><td class="mdescLeft">&#160;</td><td class="mdescRight">make entities from proc 0 shared on all proc  <a href="struct_mo_f_e_m_1_1_comm_interface.html#a7fe24f02b7e732ede41285d2b24c5f34">More...</a><br /></td></tr>
<tr class="separator:a7fe24f02b7e732ede41285d2b24c5f34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae02ed192fa0f40d1e81563d9edfb0e6c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_comm_interface.html#ae02ed192fa0f40d1e81563d9edfb0e6c">makeEntitiesMultishared</a> (<a class="el" href="class_range.html">Range</a> &amp;entities, const int owner_proc=0, int verb=<a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a>)</td></tr>
<tr class="memdesc:ae02ed192fa0f40d1e81563d9edfb0e6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">make entities from proc 0 shared on all proc  <a href="struct_mo_f_e_m_1_1_comm_interface.html#ae02ed192fa0f40d1e81563d9edfb0e6c">More...</a><br /></td></tr>
<tr class="separator:ae02ed192fa0f40d1e81563d9edfb0e6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae28e4bb7c807f8296fe92683a42141d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_comm_interface.html#ae28e4bb7c807f8296fe92683a42141d3">makeFieldEntitiesMultishared</a> (const std::string <a class="el" href="poisson__2d__homogeneous_8cpp.html#a3917f3987bad1f4e24b85c9d0ab84a5e">field_name</a>, const int owner_proc=0, int verb=<a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a>)</td></tr>
<tr class="memdesc:ae28e4bb7c807f8296fe92683a42141d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">make field entities multi shared  <a href="struct_mo_f_e_m_1_1_comm_interface.html#ae28e4bb7c807f8296fe92683a42141d3">More...</a><br /></td></tr>
<tr class="separator:ae28e4bb7c807f8296fe92683a42141d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef838e8644344648f0dd39220133f9e3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_comm_interface.html#aef838e8644344648f0dd39220133f9e3">exchangeFieldData</a> (const std::string <a class="el" href="poisson__2d__homogeneous_8cpp.html#a3917f3987bad1f4e24b85c9d0ab84a5e">field_name</a>, int verb=<a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a>)</td></tr>
<tr class="memdesc:aef838e8644344648f0dd39220133f9e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exchange field data.  <a href="struct_mo_f_e_m_1_1_comm_interface.html#aef838e8644344648f0dd39220133f9e3">More...</a><br /></td></tr>
<tr class="separator:aef838e8644344648f0dd39220133f9e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Synchronize entities (Following functions in future will be</h2></td></tr>
<tr><td class="ititle" colspan="2"><p >deprecated) </p>
</td></tr>
<tr class="memitem:aaf48742e4832bab940f922703f6176b6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_comm_interface.html#aaf48742e4832bab940f922703f6176b6">synchroniseEntities</a> (<a class="el" href="class_range.html">Range</a> &amp;ent, std::map&lt; int, <a class="el" href="class_range.html">Range</a> &gt; *received_ents, int verb=<a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a>)</td></tr>
<tr class="memdesc:aaf48742e4832bab940f922703f6176b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">synchronize entity range on processors (collective)  <a href="struct_mo_f_e_m_1_1_comm_interface.html#aaf48742e4832bab940f922703f6176b6">More...</a><br /></td></tr>
<tr class="separator:aaf48742e4832bab940f922703f6176b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e44331a3419211c0500eb8bdfcdd30d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_comm_interface.html#a9e44331a3419211c0500eb8bdfcdd30d">synchroniseEntities</a> (<a class="el" href="class_range.html">Range</a> &amp;ent, int verb=<a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a>)</td></tr>
<tr class="memdesc:a9e44331a3419211c0500eb8bdfcdd30d"><td class="mdescLeft">&#160;</td><td class="mdescRight">synchronize entity range on processors (collective)  <a href="struct_mo_f_e_m_1_1_comm_interface.html#a9e44331a3419211c0500eb8bdfcdd30d">More...</a><br /></td></tr>
<tr class="separator:a9e44331a3419211c0500eb8bdfcdd30d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga09b2d94a5e14464d0a5bf9653704dc38"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mofem__field.html#ga09b2d94a5e14464d0a5bf9653704dc38">synchroniseFieldEntities</a> (const std::string name, int verb=<a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a>)</td></tr>
<tr class="separator:ga09b2d94a5e14464d0a5bf9653704dc38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6f95b1c6dda6f6e98f775af6d4b177c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_comm_interface.html#ae6f95b1c6dda6f6e98f775af6d4b177c">resolveParentEntities</a> (const <a class="el" href="class_range.html">Range</a> &amp;ent, int verb=<a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a>)</td></tr>
<tr class="memdesc:ae6f95b1c6dda6f6e98f775af6d4b177c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronise parent entities.  <a href="struct_mo_f_e_m_1_1_comm_interface.html#ae6f95b1c6dda6f6e98f775af6d4b177c">More...</a><br /></td></tr>
<tr class="separator:ae6f95b1c6dda6f6e98f775af6d4b177c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Read load and boradcoast</h2></td></tr>
<tr><td class="ititle" colspan="2"><p >@ </p>
</td></tr>
<tr class="memitem:gab37ad8b4ac4ef77413435ae826d76ca7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mofem__problems__manager.html#gab37ad8b4ac4ef77413435ae826d76ca7">partitionMesh</a> (const <a class="el" href="class_range.html">Range</a> &amp;ents, const int <a class="el" href="elec__phys__2_d_8cpp.html#afe4f94e033c0d1c57d407b4338a64b33">dim</a>, const int adj_dim, const int n_parts, Tag *th_vertex_weights=nullptr, Tag *th_edge_weights=nullptr, Tag *th_part_weights=nullptr, int verb=<a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2cace3e26676763569084c86b8c3b67d601">VERBOSE</a>, const <a class="el" href="classbool.html">bool</a> <a class="el" href="dm__create__subdm_8cpp.html#a6295d47efda04de55c38cb8ea1cdb807">debug</a>=false)</td></tr>
<tr class="memdesc:gab37ad8b4ac4ef77413435ae826d76ca7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set partition tag to each finite element in the problem.  <a href="group__mofem__problems__manager.html#gab37ad8b4ac4ef77413435ae826d76ca7">More...</a><br /></td></tr>
<tr class="separator:gab37ad8b4ac4ef77413435ae826d76ca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_struct_mo_f_e_m_1_1_unknown_interface"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_struct_mo_f_e_m_1_1_unknown_interface')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html">MoFEM::UnknownInterface</a></td></tr>
<tr class="memitem:a52e77a14ba06bf15c0de1281b61b211f inherit pub_static_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html#a52e77a14ba06bf15c0de1281b61b211f">getLibVersion</a> (<a class="el" href="struct_mo_f_e_m_1_1_version.html">Version</a> &amp;version)</td></tr>
<tr class="memdesc:a52e77a14ba06bf15c0de1281b61b211f inherit pub_static_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get library version.  <a href="struct_mo_f_e_m_1_1_unknown_interface.html#a52e77a14ba06bf15c0de1281b61b211f">More...</a><br /></td></tr>
<tr class="separator:a52e77a14ba06bf15c0de1281b61b211f inherit pub_static_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3766a882d10e8f8fe3f63e56c990f12 inherit pub_static_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html#af3766a882d10e8f8fe3f63e56c990f12">getFileVersion</a> (moab::Interface &amp;moab, <a class="el" href="struct_mo_f_e_m_1_1_version.html">Version</a> &amp;version)</td></tr>
<tr class="memdesc:af3766a882d10e8f8fe3f63e56c990f12 inherit pub_static_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get database major version.  <a href="struct_mo_f_e_m_1_1_unknown_interface.html#af3766a882d10e8f8fe3f63e56c990f12">More...</a><br /></td></tr>
<tr class="separator:af3766a882d10e8f8fe3f63e56c990f12 inherit pub_static_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e9d9a60ce5c323f4ca7c2f2a993be72 inherit pub_static_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html#a9e9d9a60ce5c323f4ca7c2f2a993be72">setFileVersion</a> (moab::Interface &amp;moab, <a class="el" href="struct_mo_f_e_m_1_1_version.html">Version</a> version=<a class="el" href="struct_mo_f_e_m_1_1_version.html">Version</a>(MoFEM_VERSION_MAJOR, MoFEM_VERSION_MINOR, MoFEM_VERSION_BUILD))</td></tr>
<tr class="memdesc:a9e9d9a60ce5c323f4ca7c2f2a993be72 inherit pub_static_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get database major version.  <a href="struct_mo_f_e_m_1_1_unknown_interface.html#a9e9d9a60ce5c323f4ca7c2f2a993be72">More...</a><br /></td></tr>
<tr class="separator:a9e9d9a60ce5c323f4ca7c2f2a993be72 inherit pub_static_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee8da5f391105ea953e4b3f2fcd7600d inherit pub_static_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html#aee8da5f391105ea953e4b3f2fcd7600d">getInterfaceVersion</a> (<a class="el" href="struct_mo_f_e_m_1_1_version.html">Version</a> &amp;version)</td></tr>
<tr class="memdesc:aee8da5f391105ea953e4b3f2fcd7600d inherit pub_static_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get database major version.  <a href="struct_mo_f_e_m_1_1_unknown_interface.html#aee8da5f391105ea953e4b3f2fcd7600d">More...</a><br /></td></tr>
<tr class="separator:aee8da5f391105ea953e4b3f2fcd7600d inherit pub_static_methods_struct_mo_f_e_m_1_1_unknown_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Managing BitRefLevels. </p>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="dm_partitioned_no_field_8cpp-example.html#_a11">dm_partitioned_no_field.cpp</a>, <a class="el" href="elasticity_8cpp-example.html#_a61">elasticity.cpp</a>, <a class="el" href="free_surface_8cpp-example.html#_a256">free_surface.cpp</a>, <a class="el" href="level_set_8cpp-example.html#_a70">level_set.cpp</a>, <a class="el" href="mesh_smoothing_8cpp-example.html#_a34">mesh_smoothing.cpp</a>, <a class="el" href="mixed_poisson_8cpp-example.html#_a85">mixed_poisson.cpp</a>, <a class="el" href="navier_stokes_8cpp-example.html#_a71">navier_stokes.cpp</a>, <a class="el" href="partition_mesh_8cpp-example.html#_a9">partition_mesh.cpp</a>, <a class="el" href="plastic_8cpp-example.html#_a102">plastic.cpp</a>, and <a class="el" href="thermo_elastic_8cpp-example.html#_a103">thermo_elastic.cpp</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_comm_interface_8hpp_source.html#l00021">21</a> of file <a class="el" href="_comm_interface_8hpp_source.html">CommInterface.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a697543284ca3f775598811e184a6e9b4" name="a697543284ca3f775598811e184a6e9b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a697543284ca3f775598811e184a6e9b4">&#9670;&#160;</a></span>CommInterface()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MoFEM::CommInterface::CommInterface </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespace_mo_f_e_m.html#a8bdfc7559ccb2b6d0021580b5c8a340b">MoFEM::Core</a> &amp;&#160;</td>
          <td class="paramname"><em>core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_comm_interface_8cpp_source.html#l00023">23</a> of file <a class="el" href="_comm_interface_8cpp_source.html">CommInterface.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   24</span>    : <a class="code hl_variable" href="struct_mo_f_e_m_1_1_comm_interface.html#ab531417c6ed05f8aadbdc455817c4499">cOre</a>(<span class="keyword">const_cast&lt;</span><a class="code hl_struct" href="struct_mo_f_e_m_1_1_core_tmp_3_010_01_4.html">MoFEM::Core</a> &amp;<span class="keyword">&gt;</span>(core)), <a class="code hl_variable" href="struct_mo_f_e_m_1_1_comm_interface.html#aa346af0e9a56fe3216e16e4cdec8a83e">dEbug</a>(<span class="keyword">false</span>) {}</div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_comm_interface_html_aa346af0e9a56fe3216e16e4cdec8a83e"><div class="ttname"><a href="struct_mo_f_e_m_1_1_comm_interface.html#aa346af0e9a56fe3216e16e4cdec8a83e">MoFEM::CommInterface::dEbug</a></div><div class="ttdeci">bool dEbug</div><div class="ttdef"><b>Definition:</b> <a href="_comm_interface_8hpp_source.html#l00027">CommInterface.hpp:27</a></div></div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_comm_interface_html_ab531417c6ed05f8aadbdc455817c4499"><div class="ttname"><a href="struct_mo_f_e_m_1_1_comm_interface.html#ab531417c6ed05f8aadbdc455817c4499">MoFEM::CommInterface::cOre</a></div><div class="ttdeci">MoFEM::Core &amp; cOre</div><div class="ttdef"><b>Definition:</b> <a href="_comm_interface_8hpp_source.html#l00026">CommInterface.hpp:26</a></div></div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_core_tmp_3_010_01_4_html"><div class="ttname"><a href="struct_mo_f_e_m_1_1_core_tmp_3_010_01_4.html">MoFEM::CoreTmp&lt; 0 &gt;</a></div><div class="ttdoc">Core (interface) class.</div><div class="ttdef"><b>Definition:</b> <a href="_core_8hpp_source.html#l00082">Core.hpp:82</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4dcdfa927cc476e5a4e72e7db0b6d38b" name="a4dcdfa927cc476e5a4e72e7db0b6d38b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dcdfa927cc476e5a4e72e7db0b6d38b">&#9670;&#160;</a></span>~CommInterface()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MoFEM::CommInterface::~CommInterface </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aef838e8644344648f0dd39220133f9e3" name="aef838e8644344648f0dd39220133f9e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef838e8644344648f0dd39220133f9e3">&#9670;&#160;</a></span>exchangeFieldData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a> MoFEM::CommInterface::exchangeFieldData </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verb</em> = <code><a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exchange field data. </p>
<p >Exchange field for all shared and ghosted entities. This function should be called collectively over the communicator for this ParallelComm. If the entities vector is empty, all shared entities participate in the exchange. If a proc has no owned entities this function must still be called since it is collective.</p>
<dl class="section note"><dt>Note</dt><dd>collective - need tu be run on all processors in communicator</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000025">Todo:</a></b></dt><dd>It is not working if field has entities diffrent than vertices.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">verb</td><td></td></tr>
    <tr><td class="paramname">field_name</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MoFEMErrorCode </dd></dl>

<p class="definition">Definition at line <a class="el" href="_comm_interface_8cpp_source.html#l00818">818</a> of file <a class="el" href="_comm_interface_8cpp_source.html">CommInterface.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  819</span>                                                          {</div>
<div class="line"><span class="lineno">  820</span>  <a class="code hl_struct" href="struct_mo_f_e_m_1_1_deprecated_core_interface.html">MoFEM::Interface</a> &amp;m_field = <a class="code hl_variable" href="struct_mo_f_e_m_1_1_comm_interface.html#ab531417c6ed05f8aadbdc455817c4499">cOre</a>;</div>
<div class="line"><span class="lineno">  821</span>  <a class="code hl_define" href="definitions_8h.html#a6c0b52978f1abc88bf8a1ba70b7308e3">MoFEMFunctionBegin</a>;</div>
<div class="line"><span class="lineno">  822</span>  <span class="keywordflow">if</span> (m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">get_comm_size</a>() &gt; 1) {</div>
<div class="line"><span class="lineno">  823</span> </div>
<div class="line"><span class="lineno">  824</span>    <a class="code hl_class" href="class_range.html">Range</a> exchange_ents_data_verts, exchange_ents_data;</div>
<div class="line"><span class="lineno">  825</span> </div>
<div class="line"><span class="lineno">  826</span>    <span class="keyword">auto</span> *field_ents = m_field.<a class="code hl_function" href="group__mofem__access.html#ga33e7aeb086f44048bde7151fd8634ab2">get_field_ents</a>();</div>
<div class="line"><span class="lineno">  827</span>    <span class="keyword">auto</span> field_bit_number = m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a151a5aaa12774c726c7a32ba250d2586">get_field_bit_number</a>(<a class="code hl_variable" href="poisson__2d__homogeneous_8cpp.html#a3917f3987bad1f4e24b85c9d0ab84a5e">field_name</a>);</div>
<div class="line"><span class="lineno">  828</span>    <span class="keyword">auto</span> lo = field_ents-&gt;get&lt;Unique_mi_tag&gt;().lower_bound(</div>
<div class="line"><span class="lineno">  829</span>        <a class="code hl_function" href="struct_mo_f_e_m_1_1_field_entity.html#a58d767a919831ecbb8b3b72faad3e9fa">FieldEntity::getLoBitNumberUId</a>(field_bit_number));</div>
<div class="line"><span class="lineno">  830</span>    <span class="keyword">auto</span> hi = field_ents-&gt;get&lt;Unique_mi_tag&gt;().lower_bound(</div>
<div class="line"><span class="lineno">  831</span>        <a class="code hl_function" href="struct_mo_f_e_m_1_1_field_entity.html#a07b8c0660cbaa149aa8950f05eb618fa">FieldEntity::getHiBitNumberUId</a>(field_bit_number));</div>
<div class="line"><span class="lineno">  832</span> </div>
<div class="line"><span class="lineno">  833</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = lo; it != hi; ++it)</div>
<div class="line"><span class="lineno">  834</span>      <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  835</span> </div>
<div class="line"><span class="lineno">  836</span>          ((*it)-&gt;getPStatus()) &amp;&amp;</div>
<div class="line"><span class="lineno">  837</span> </div>
<div class="line"><span class="lineno">  838</span>          (*it)-&gt;getNbDofsOnEnt()</div>
<div class="line"><span class="lineno">  839</span> </div>
<div class="line"><span class="lineno">  840</span>      ) {</div>
<div class="line"><span class="lineno">  841</span>        <span class="keywordflow">if</span> ((*it)-&gt;getEntType() == MBVERTEX)</div>
<div class="line"><span class="lineno">  842</span>          exchange_ents_data_verts.insert((*it)-&gt;getEnt());</div>
<div class="line"><span class="lineno">  843</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  844</span>          exchange_ents_data.insert((*it)-&gt;getEnt());</div>
<div class="line"><span class="lineno">  845</span>      }</div>
<div class="line"><span class="lineno">  846</span> </div>
<div class="line"><span class="lineno">  847</span>    <span class="keyword">auto</span> field_ptr = m_field.<a class="code hl_function" href="group__mofem__field.html#ga01ac334d9339ed5f1b0bcfa12a8daf1d">get_field_structure</a>(<a class="code hl_variable" href="poisson__2d__homogeneous_8cpp.html#a3917f3987bad1f4e24b85c9d0ab84a5e">field_name</a>);</div>
<div class="line"><span class="lineno">  848</span>    ParallelComm *pcomm = ParallelComm::get_pcomm(</div>
<div class="line"><span class="lineno">  849</span>        &amp;m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>(), m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#afc8134b45759ab88b40c92f07a785bf5">get_basic_entity_data_ptr</a>()-&gt;pcommID);</div>
<div class="line"><span class="lineno">  850</span> </div>
<div class="line"><span class="lineno">  851</span>    <span class="keyword">auto</span> exchange = [&amp;](<span class="keyword">const</span> <a class="code hl_class" href="class_range.html">Range</a> &amp;ents, Tag <a class="code hl_variable" href="namespace_mo_f_e_m.html#a75aed9eb5f422c1955dbbdacb26c2b38">th</a>) {</div>
<div class="line"><span class="lineno">  852</span>      <a class="code hl_define" href="definitions_8h.html#a6c0b52978f1abc88bf8a1ba70b7308e3">MoFEMFunctionBegin</a>;</div>
<div class="line"><span class="lineno">  853</span>      <span class="keywordflow">if</span> (!ents.empty()) {</div>
<div class="line"><span class="lineno">  854</span>        std::vector&lt;Tag&gt; tags;</div>
<div class="line"><span class="lineno">  855</span>        tags.push_back(<a class="code hl_variable" href="namespace_mo_f_e_m.html#a75aed9eb5f422c1955dbbdacb26c2b38">th</a>);</div>
<div class="line"><span class="lineno">  856</span>        <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> pcomm-&gt;exchange_tags(tags, tags, ents);</div>
<div class="line"><span class="lineno">  857</span>      }</div>
<div class="line"><span class="lineno">  858</span>      <a class="code hl_define" href="definitions_8h.html#acb0a46d159695a01bf667313b7788b45">MoFEMFunctionReturn</a>(0);</div>
<div class="line"><span class="lineno">  859</span>    };</div>
<div class="line"><span class="lineno">  860</span> </div>
<div class="line"><span class="lineno">  861</span>    <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> exchange(exchange_ents_data_verts, field_ptr-&gt;th_FieldDataVerts);</div>
<div class="line"><span class="lineno">  862</span>    <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> exchange(exchange_ents_data, field_ptr-&gt;th_FieldData);</div>
<div class="line"><span class="lineno">  863</span>  }</div>
<div class="line"><span class="lineno">  864</span>  <a class="code hl_define" href="definitions_8h.html#acb0a46d159695a01bf667313b7788b45">MoFEMFunctionReturn</a>(0);</div>
<div class="line"><span class="lineno">  865</span>}</div>
<div class="ttc" id="aclass_range_html"><div class="ttname"><a href="class_range.html">Range</a></div></div>
<div class="ttc" id="adefinitions_8h_html_a6c0b52978f1abc88bf8a1ba70b7308e3"><div class="ttname"><a href="definitions_8h.html#a6c0b52978f1abc88bf8a1ba70b7308e3">MoFEMFunctionBegin</a></div><div class="ttdeci">#define MoFEMFunctionBegin</div><div class="ttdoc">First executable line of each MoFEM function, used for error handling. Final line of MoFEM functions ...</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8h_source.html#l00346">definitions.h:346</a></div></div>
<div class="ttc" id="adefinitions_8h_html_acb0a46d159695a01bf667313b7788b45"><div class="ttname"><a href="definitions_8h.html#acb0a46d159695a01bf667313b7788b45">MoFEMFunctionReturn</a></div><div class="ttdeci">#define MoFEMFunctionReturn(a)</div><div class="ttdoc">Last executable line of each PETSc function used for error handling. Replaces return()</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8h_source.html#l00416">definitions.h:416</a></div></div>
<div class="ttc" id="adefinitions_8h_html_add80e5ef5f847b2d4b637029f0f671c3"><div class="ttname"><a href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a></div><div class="ttdeci">#define CHKERR</div><div class="ttdoc">Inline error check.</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8h_source.html#l00535">definitions.h:535</a></div></div>
<div class="ttc" id="agroup__mofem__access_html_ga33e7aeb086f44048bde7151fd8634ab2"><div class="ttname"><a href="group__mofem__access.html#ga33e7aeb086f44048bde7151fd8634ab2">MoFEM::CoreInterface::get_field_ents</a></div><div class="ttdeci">virtual const FieldEntity_multiIndex * get_field_ents() const =0</div><div class="ttdoc">Get the field ents object.</div></div>
<div class="ttc" id="agroup__mofem__field_html_ga01ac334d9339ed5f1b0bcfa12a8daf1d"><div class="ttname"><a href="group__mofem__field.html#ga01ac334d9339ed5f1b0bcfa12a8daf1d">MoFEM::CoreInterface::get_field_structure</a></div><div class="ttdeci">virtual const Field * get_field_structure(const std::string &amp;name, enum MoFEMTypes bh=MF_EXIST) const =0</div><div class="ttdoc">get field structure</div></div>
<div class="ttc" id="anamespace_mo_f_e_m_html_a75aed9eb5f422c1955dbbdacb26c2b38"><div class="ttname"><a href="namespace_mo_f_e_m.html#a75aed9eb5f422c1955dbbdacb26c2b38">MoFEM::th</a></div><div class="ttdeci">Tag th</div><div class="ttdef"><b>Definition:</b> <a href="_projection10_node_coords_on_field_8cpp_source.html#l00122">Projection10NodeCoordsOnField.cpp:122</a></div></div>
<div class="ttc" id="apoisson__2d__homogeneous_8cpp_html_a3917f3987bad1f4e24b85c9d0ab84a5e"><div class="ttname"><a href="poisson__2d__homogeneous_8cpp.html#a3917f3987bad1f4e24b85c9d0ab84a5e">field_name</a></div><div class="ttdeci">constexpr auto field_name</div><div class="ttdef"><b>Definition:</b> <a href="poisson__2d__homogeneous_8cpp_source.html#l00013">poisson_2d_homogeneous.cpp:13</a></div></div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_core_interface_html_a093526a60371b07213a0be2aaf7afa35"><div class="ttname"><a href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">MoFEM::CoreInterface::get_comm_size</a></div><div class="ttdeci">virtual int get_comm_size() const =0</div></div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_core_interface_html_a151a5aaa12774c726c7a32ba250d2586"><div class="ttname"><a href="struct_mo_f_e_m_1_1_core_interface.html#a151a5aaa12774c726c7a32ba250d2586">MoFEM::CoreInterface::get_field_bit_number</a></div><div class="ttdeci">virtual FieldBitNumber get_field_bit_number(const std::string name) const =0</div><div class="ttdoc">get field bit number</div></div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_core_interface_html_a174e70b67f4f235d096d3c45d865645b"><div class="ttname"><a href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">MoFEM::CoreInterface::get_moab</a></div><div class="ttdeci">virtual moab::Interface &amp; get_moab()=0</div></div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_core_interface_html_afc8134b45759ab88b40c92f07a785bf5"><div class="ttname"><a href="struct_mo_f_e_m_1_1_core_interface.html#afc8134b45759ab88b40c92f07a785bf5">MoFEM::CoreInterface::get_basic_entity_data_ptr</a></div><div class="ttdeci">virtual boost::shared_ptr&lt; BasicEntityData &gt; &amp; get_basic_entity_data_ptr()=0</div><div class="ttdoc">Get pointer to basic entity data.</div></div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_deprecated_core_interface_html"><div class="ttname"><a href="struct_mo_f_e_m_1_1_deprecated_core_interface.html">MoFEM::DeprecatedCoreInterface</a></div><div class="ttdoc">Deprecated interface functions.</div><div class="ttdef"><b>Definition:</b> <a href="_deprecated_core_interface_8hpp_source.html#l00016">DeprecatedCoreInterface.hpp:16</a></div></div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_field_entity_html_a07b8c0660cbaa149aa8950f05eb618fa"><div class="ttname"><a href="struct_mo_f_e_m_1_1_field_entity.html#a07b8c0660cbaa149aa8950f05eb618fa">MoFEM::FieldEntity::getHiBitNumberUId</a></div><div class="ttdeci">static UId getHiBitNumberUId(const FieldBitNumber bit_number)</div><div class="ttdef"><b>Definition:</b> <a href="_field_ents_multi_indices_8hpp_source.html#l00228">FieldEntsMultiIndices.hpp:228</a></div></div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_field_entity_html_a58d767a919831ecbb8b3b72faad3e9fa"><div class="ttname"><a href="struct_mo_f_e_m_1_1_field_entity.html#a58d767a919831ecbb8b3b72faad3e9fa">MoFEM::FieldEntity::getLoBitNumberUId</a></div><div class="ttdeci">static UId getLoBitNumberUId(const FieldBitNumber bit_number)</div><div class="ttdef"><b>Definition:</b> <a href="_field_ents_multi_indices_8hpp_source.html#l00222">FieldEntsMultiIndices.hpp:222</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7fe24f02b7e732ede41285d2b24c5f34" name="a7fe24f02b7e732ede41285d2b24c5f34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fe24f02b7e732ede41285d2b24c5f34">&#9670;&#160;</a></span>makeEntitiesMultishared() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a> MoFEM::CommInterface::makeEntitiesMultishared </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_entity_handle.html">EntityHandle</a> *&#160;</td>
          <td class="paramname"><em>entities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>num_entities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>owner_proc</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verb</em> = <code><a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>make entities from proc 0 shared on all proc </p>
<dl class="section note"><dt>Note</dt><dd>collective - need tu be run on all processors in communicator</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entities</td><td></td></tr>
    <tr><td class="paramname">num_entities</td><td></td></tr>
    <tr><td class="paramname">my_proc</td><td>default proc id to share from </td></tr>
    <tr><td class="paramname">verb</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MoFEMErrorCode </dd></dl>

<p class="definition">Definition at line <a class="el" href="_comm_interface_8cpp_source.html#l00654">654</a> of file <a class="el" href="_comm_interface_8cpp_source.html">CommInterface.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  656</span>                                                                       {</div>
<div class="line"><span class="lineno">  657</span>  <a class="code hl_struct" href="struct_mo_f_e_m_1_1_deprecated_core_interface.html">MoFEM::Interface</a> &amp;m_field = <a class="code hl_variable" href="struct_mo_f_e_m_1_1_comm_interface.html#ab531417c6ed05f8aadbdc455817c4499">cOre</a>;</div>
<div class="line"><span class="lineno">  658</span>  <a class="code hl_define" href="definitions_8h.html#a6c0b52978f1abc88bf8a1ba70b7308e3">MoFEMFunctionBegin</a>;</div>
<div class="line"><span class="lineno">  659</span> </div>
<div class="line"><span class="lineno">  660</span>  <span class="keywordflow">if</span> (m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">get_comm_size</a>() &gt; 1) {</div>
<div class="line"><span class="lineno">  661</span> </div>
<div class="line"><span class="lineno">  662</span>    ParallelComm *pcomm = ParallelComm::get_pcomm(</div>
<div class="line"><span class="lineno">  663</span>        &amp;m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>(), m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#afc8134b45759ab88b40c92f07a785bf5">get_basic_entity_data_ptr</a>()-&gt;pcommID);</div>
<div class="line"><span class="lineno">  664</span> </div>
<div class="line"><span class="lineno">  665</span>    <a class="code hl_class" href="class_range.html">Range</a> all_ents_range;</div>
<div class="line"><span class="lineno">  666</span>    all_ents_range.insert_list(entities, entities + num_entities);</div>
<div class="line"><span class="lineno">  667</span> </div>
<div class="line"><span class="lineno">  668</span>    <span class="keyword">auto</span> get_tag = [&amp;]() { <span class="keywordflow">return</span> m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().globalId_tag(); };</div>
<div class="line"><span class="lineno">  669</span> </div>
<div class="line"><span class="lineno">  670</span>    <span class="keyword">auto</span> delete_tag = [&amp;](<span class="keyword">auto</span> &amp;&amp;th_gid) {</div>
<div class="line"><span class="lineno">  671</span>      <a class="code hl_define" href="definitions_8h.html#a6c0b52978f1abc88bf8a1ba70b7308e3">MoFEMFunctionBegin</a>;</div>
<div class="line"><span class="lineno">  672</span>      <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_delete(th_gid);</div>
<div class="line"><span class="lineno">  673</span>      <a class="code hl_define" href="definitions_8h.html#acb0a46d159695a01bf667313b7788b45">MoFEMFunctionReturn</a>(0);</div>
<div class="line"><span class="lineno">  674</span>    };</div>
<div class="line"><span class="lineno">  675</span> </div>
<div class="line"><span class="lineno">  676</span>    <span class="keyword">auto</span> resolve_shared_ents = [&amp;](<span class="keyword">auto</span> &amp;&amp;th_gid, <span class="keyword">auto</span> &amp;all_ents_range) {</div>
<div class="line"><span class="lineno">  677</span>      <span class="keyword">auto</span> set_gid = [&amp;](<span class="keyword">auto</span> &amp;th_gid) {</div>
<div class="line"><span class="lineno">  678</span>        std::vector&lt;int&gt; gids(num_entities);</div>
<div class="line"><span class="lineno">  679</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="shallow__wave_8cpp.html#ab65af9ad1ab66fac4ba26a865ae7ae13">g</a> = 0; <a class="code hl_variable" href="shallow__wave_8cpp.html#ab65af9ad1ab66fac4ba26a865ae7ae13">g</a> != all_ents_range.size(); ++<a class="code hl_variable" href="shallow__wave_8cpp.html#ab65af9ad1ab66fac4ba26a865ae7ae13">g</a>)</div>
<div class="line"><span class="lineno">  680</span>          gids[<a class="code hl_variable" href="shallow__wave_8cpp.html#ab65af9ad1ab66fac4ba26a865ae7ae13">g</a>] = <a class="code hl_variable" href="shallow__wave_8cpp.html#ab65af9ad1ab66fac4ba26a865ae7ae13">g</a> + 1;</div>
<div class="line"><span class="lineno">  681</span>        <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_set_data(th_gid, all_ents_range,</div>
<div class="line"><span class="lineno">  682</span>                                               &amp;*gids.begin());</div>
<div class="line"><span class="lineno">  683</span> </div>
<div class="line"><span class="lineno">  684</span>        <span class="keywordflow">return</span> &amp;th_gid;</div>
<div class="line"><span class="lineno">  685</span>      };</div>
<div class="line"><span class="lineno">  686</span> </div>
<div class="line"><span class="lineno">  687</span>      <span class="keyword">auto</span> get_skin_ents = [&amp;](<span class="keyword">auto</span> &amp;all_ents_range) {</div>
<div class="line"><span class="lineno">  688</span>        std::array&lt;Range, 4&gt; proc_ents_skin;</div>
<div class="line"><span class="lineno">  689</span>        proc_ents_skin[3] = all_ents_range.subset_by_dimension(3);</div>
<div class="line"><span class="lineno">  690</span>        proc_ents_skin[2] = all_ents_range.subset_by_dimension(2);</div>
<div class="line"><span class="lineno">  691</span>        proc_ents_skin[1] = all_ents_range.subset_by_dimension(1);</div>
<div class="line"><span class="lineno">  692</span>        proc_ents_skin[0] = all_ents_range.subset_by_dimension(0);</div>
<div class="line"><span class="lineno">  693</span>        <span class="keywordflow">return</span> proc_ents_skin;</div>
<div class="line"><span class="lineno">  694</span>      };</div>
<div class="line"><span class="lineno">  695</span> </div>
<div class="line"><span class="lineno">  696</span>      <span class="keyword">auto</span> resolve_dim = [&amp;](<span class="keyword">auto</span> &amp;all_ents_range) {</div>
<div class="line"><span class="lineno">  697</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> resolve_dim = 3; resolve_dim &gt;= 0; --resolve_dim) {</div>
<div class="line"><span class="lineno">  698</span>          <span class="keywordflow">if</span> (all_ents_range.num_of_dimension(resolve_dim))</div>
<div class="line"><span class="lineno">  699</span>            <span class="keywordflow">return</span> resolve_dim;</div>
<div class="line"><span class="lineno">  700</span>        }</div>
<div class="line"><span class="lineno">  701</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  702</span>      };</div>
<div class="line"><span class="lineno">  703</span> </div>
<div class="line"><span class="lineno">  704</span>      <span class="keyword">auto</span> get_proc_ent = [&amp;](<span class="keyword">auto</span> &amp;all_ents_range) {</div>
<div class="line"><span class="lineno">  705</span>        <a class="code hl_class" href="class_range.html">Range</a> proc_ent;</div>
<div class="line"><span class="lineno">  706</span>        <span class="keywordflow">if</span> (m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#af2224ce77b33637b5cfad66a275a2ffb">get_comm_rank</a>() == owner_proc)</div>
<div class="line"><span class="lineno">  707</span>          proc_ent = all_ents_range;</div>
<div class="line"><span class="lineno">  708</span>        <span class="keywordflow">return</span> proc_ent;</div>
<div class="line"><span class="lineno">  709</span>      };</div>
<div class="line"><span class="lineno">  710</span> </div>
<div class="line"><span class="lineno">  711</span>      <span class="keyword">auto</span> resolve_shared_ents = [&amp;](<span class="keyword">auto</span> &amp;&amp;proc_ents, <span class="keyword">auto</span> &amp;&amp;skin_ents) {</div>
<div class="line"><span class="lineno">  712</span>        <span class="keywordflow">return</span> pcomm-&gt;resolve_shared_ents(</div>
<div class="line"><span class="lineno">  713</span>            0, proc_ents, resolve_dim(all_ents_range),</div>
<div class="line"><span class="lineno">  714</span>            resolve_dim(all_ents_range), skin_ents.data(), set_gid(th_gid));</div>
<div class="line"><span class="lineno">  715</span>      };</div>
<div class="line"><span class="lineno">  716</span> </div>
<div class="line"><span class="lineno">  717</span>      <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> resolve_shared_ents(get_proc_ent(all_ents_range),</div>
<div class="line"><span class="lineno">  718</span>                                 get_skin_ents(all_ents_range));</div>
<div class="line"><span class="lineno">  719</span> </div>
<div class="line"><span class="lineno">  720</span>      <span class="keywordflow">return</span> th_gid;</div>
<div class="line"><span class="lineno">  721</span>    };</div>
<div class="line"><span class="lineno">  722</span> </div>
<div class="line"><span class="lineno">  723</span>    <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> delete_tag(resolve_shared_ents(get_tag(), all_ents_range));</div>
<div class="line"><span class="lineno">  724</span> </div>
<div class="line"><span class="lineno">  725</span>    <span class="keywordflow">if</span> (verb &gt;= <a class="code hl_enumvalue" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2caa4fc5b9204f57a31e594e32c02d071e9">NOISY</a>) {</div>
<div class="line"><span class="lineno">  726</span> </div>
<div class="line"><span class="lineno">  727</span>      <span class="keyword">auto</span> print_owner = [&amp;](<span class="keyword">const</span> <a class="code hl_class" href="class_entity_handle.html">EntityHandle</a> e) {</div>
<div class="line"><span class="lineno">  728</span>        <a class="code hl_define" href="definitions_8h.html#a6c0b52978f1abc88bf8a1ba70b7308e3">MoFEMFunctionBegin</a>;</div>
<div class="line"><span class="lineno">  729</span>        <span class="keywordtype">int</span> moab_owner_proc;</div>
<div class="line"><span class="lineno">  730</span>        <a class="code hl_class" href="class_entity_handle.html">EntityHandle</a> moab_owner_handle;</div>
<div class="line"><span class="lineno">  731</span>        <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> pcomm-&gt;get_owner_handle(e, moab_owner_proc, moab_owner_handle);</div>
<div class="line"><span class="lineno">  732</span> </div>
<div class="line"><span class="lineno">  733</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> pstatus = 0;</div>
<div class="line"><span class="lineno">  734</span> </div>
<div class="line"><span class="lineno">  735</span>        <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(pcomm-&gt;pstatus_tag(), &amp;e, 1,</div>
<div class="line"><span class="lineno">  736</span>                                               &amp;pstatus);</div>
<div class="line"><span class="lineno">  737</span> </div>
<div class="line"><span class="lineno">  738</span>        std::vector&lt;int&gt; shprocs(MAX_SHARING_PROCS, 0);</div>
<div class="line"><span class="lineno">  739</span>        std::vector&lt;EntityHandle&gt; shhandles(MAX_SHARING_PROCS, 0);</div>
<div class="line"><span class="lineno">  740</span> </div>
<div class="line"><span class="lineno">  741</span>        <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(pcomm-&gt;sharedp_tag(), &amp;e, 1,</div>
<div class="line"><span class="lineno">  742</span>                                               &amp;shprocs[0]);</div>
<div class="line"><span class="lineno">  743</span>        <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(pcomm-&gt;sharedh_tag(), &amp;e, 1,</div>
<div class="line"><span class="lineno">  744</span>                                               &amp;shhandles[0]);</div>
<div class="line"><span class="lineno">  745</span>        <span class="keywordflow">if</span> (pstatus &amp; PSTATUS_MULTISHARED) {</div>
<div class="line"><span class="lineno">  746</span>          <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(pcomm-&gt;sharedps_tag(), &amp;e, 1,</div>
<div class="line"><span class="lineno">  747</span>                                                 &amp;shprocs[0]);</div>
<div class="line"><span class="lineno">  748</span>          <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(pcomm-&gt;sharedhs_tag(), &amp;e, 1,</div>
<div class="line"><span class="lineno">  749</span>                                                 &amp;shhandles[0]);</div>
<div class="line"><span class="lineno">  750</span>        }</div>
<div class="line"><span class="lineno">  751</span> </div>
<div class="line"><span class="lineno">  752</span>        std::ostringstream ss;</div>
<div class="line"><span class="lineno">  753</span> </div>
<div class="line"><span class="lineno">  754</span>        ss &lt;&lt; <span class="stringliteral">&quot;Rank &quot;</span> &lt;&lt; m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#af2224ce77b33637b5cfad66a275a2ffb">get_comm_rank</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno">  755</span>        <span class="keywordflow">if</span> (!(pstatus &amp; PSTATUS_NOT_OWNED))</div>
<div class="line"><span class="lineno">  756</span>          ss &lt;&lt; <span class="stringliteral">&quot;OWNER &quot;</span>;</div>
<div class="line"><span class="lineno">  757</span>        <span class="keywordflow">if</span> (pstatus &amp; PSTATUS_SHARED)</div>
<div class="line"><span class="lineno">  758</span>          ss &lt;&lt; <span class="stringliteral">&quot;PSTATUS_SHARED &quot;</span>;</div>
<div class="line"><span class="lineno">  759</span>        <span class="keywordflow">if</span> (pstatus &amp; PSTATUS_MULTISHARED)</div>
<div class="line"><span class="lineno">  760</span>          ss &lt;&lt; <span class="stringliteral">&quot;PSTATUS_MULTISHARED &quot;</span>;</div>
<div class="line"><span class="lineno">  761</span> </div>
<div class="line"><span class="lineno">  762</span>        ss &lt;&lt; <span class="stringliteral">&quot;owner &quot;</span> &lt;&lt; moab_owner_proc &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; owner_proc &lt;&lt; <span class="stringliteral">&quot;) &quot;</span>;</div>
<div class="line"><span class="lineno">  763</span> </div>
<div class="line"><span class="lineno">  764</span>        ss &lt;&lt; <span class="stringliteral">&quot;shprocs: &quot;</span>;</div>
<div class="line"><span class="lineno">  765</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> r = 0; <a class="code hl_variable" href="namespacesdf.html#a2f1f399a483aed931a5a8ac3b98f49ba">r</a> != m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">get_comm_size</a>() + 1; ++<a class="code hl_variable" href="namespacesdf.html#a2f1f399a483aed931a5a8ac3b98f49ba">r</a>)</div>
<div class="line"><span class="lineno">  766</span>          ss &lt;&lt; shprocs[r] &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno">  767</span> </div>
<div class="line"><span class="lineno">  768</span>        ss &lt;&lt; <span class="stringliteral">&quot;shhandles: &quot;</span>;</div>
<div class="line"><span class="lineno">  769</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> r = 0; <a class="code hl_variable" href="namespacesdf.html#a2f1f399a483aed931a5a8ac3b98f49ba">r</a> != m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">get_comm_size</a>() + 1; ++<a class="code hl_variable" href="namespacesdf.html#a2f1f399a483aed931a5a8ac3b98f49ba">r</a>)</div>
<div class="line"><span class="lineno">  770</span>          ss &lt;&lt; shhandles[r] &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno">  771</span> </div>
<div class="line"><span class="lineno">  772</span>        ss &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  773</span>        <a class="code hl_define" href="group__mofem__log__manager.html#ga19fe81dc9081ceb92ced847e619ca654">MOFEM_LOG</a>(<span class="stringliteral">&quot;SYNC&quot;</span>, Sev::noisy) &lt;&lt; ss.str();</div>
<div class="line"><span class="lineno">  774</span>        <a class="code hl_define" href="_log_manager_8hpp.html#adacc7b9e7c4fa95cc0959ca359f999f5">MOFEM_LOG_SYNCHRONISE</a>(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a9b2bc8c1b980f49d31a0b5f7fbe756f5">get_comm</a>());</div>
<div class="line"><span class="lineno">  775</span> </div>
<div class="line"><span class="lineno">  776</span>        <a class="code hl_define" href="definitions_8h.html#acb0a46d159695a01bf667313b7788b45">MoFEMFunctionReturn</a>(0);</div>
<div class="line"><span class="lineno">  777</span>      };</div>
<div class="line"><span class="lineno">  778</span> </div>
<div class="line"><span class="lineno">  779</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> e : all_ents_range)</div>
<div class="line"><span class="lineno">  780</span>        <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> print_owner(e);</div>
<div class="line"><span class="lineno">  781</span>    }</div>
<div class="line"><span class="lineno">  782</span>  }</div>
<div class="line"><span class="lineno">  783</span> </div>
<div class="line"><span class="lineno">  784</span>  <a class="code hl_define" href="definitions_8h.html#acb0a46d159695a01bf667313b7788b45">MoFEMFunctionReturn</a>(0);</div>
<div class="line"><span class="lineno">  785</span>}</div>
<div class="ttc" id="a_log_manager_8hpp_html_adacc7b9e7c4fa95cc0959ca359f999f5"><div class="ttname"><a href="_log_manager_8hpp.html#adacc7b9e7c4fa95cc0959ca359f999f5">MOFEM_LOG_SYNCHRONISE</a></div><div class="ttdeci">#define MOFEM_LOG_SYNCHRONISE(comm)</div><div class="ttdoc">Synchronise &quot;SYNC&quot; channel.</div><div class="ttdef"><b>Definition:</b> <a href="_log_manager_8hpp_source.html#l00345">LogManager.hpp:345</a></div></div>
<div class="ttc" id="aclass_entity_handle_html"><div class="ttname"><a href="class_entity_handle.html">EntityHandle</a></div></div>
<div class="ttc" id="adefinitions_8h_html_a018e38d630e7ebef4cfa48ab69889f2caa4fc5b9204f57a31e594e32c02d071e9"><div class="ttname"><a href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2caa4fc5b9204f57a31e594e32c02d071e9">NOISY</a></div><div class="ttdeci">@ NOISY</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8h_source.html#l00211">definitions.h:211</a></div></div>
<div class="ttc" id="agroup__mofem__log__manager_html_ga19fe81dc9081ceb92ced847e619ca654"><div class="ttname"><a href="group__mofem__log__manager.html#ga19fe81dc9081ceb92ced847e619ca654">MOFEM_LOG</a></div><div class="ttdeci">#define MOFEM_LOG(channel, severity)</div><div class="ttdoc">Log.</div><div class="ttdef"><b>Definition:</b> <a href="_log_manager_8hpp_source.html#l00308">LogManager.hpp:308</a></div></div>
<div class="ttc" id="anamespacesdf_html_a2f1f399a483aed931a5a8ac3b98f49ba"><div class="ttname"><a href="namespacesdf.html#a2f1f399a483aed931a5a8ac3b98f49ba">sdf.r</a></div><div class="ttdeci">int r</div><div class="ttdef"><b>Definition:</b> <a href="jupyter_2skel_2ukacm__autumn__school_2multifield__plasticity_2sdf_8py_source.html#l00008">sdf.py:8</a></div></div>
<div class="ttc" id="ashallow__wave_8cpp_html_ab65af9ad1ab66fac4ba26a865ae7ae13"><div class="ttname"><a href="shallow__wave_8cpp.html#ab65af9ad1ab66fac4ba26a865ae7ae13">g</a></div><div class="ttdeci">constexpr double g</div><div class="ttdef"><b>Definition:</b> <a href="shallow__wave_8cpp_source.html#l00063">shallow_wave.cpp:63</a></div></div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_core_interface_html_a9b2bc8c1b980f49d31a0b5f7fbe756f5"><div class="ttname"><a href="struct_mo_f_e_m_1_1_core_interface.html#a9b2bc8c1b980f49d31a0b5f7fbe756f5">MoFEM::CoreInterface::get_comm</a></div><div class="ttdeci">virtual MPI_Comm &amp; get_comm() const =0</div></div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_core_interface_html_af2224ce77b33637b5cfad66a275a2ffb"><div class="ttname"><a href="struct_mo_f_e_m_1_1_core_interface.html#af2224ce77b33637b5cfad66a275a2ffb">MoFEM::CoreInterface::get_comm_rank</a></div><div class="ttdeci">virtual int get_comm_rank() const =0</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae02ed192fa0f40d1e81563d9edfb0e6c" name="ae02ed192fa0f40d1e81563d9edfb0e6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae02ed192fa0f40d1e81563d9edfb0e6c">&#9670;&#160;</a></span>makeEntitiesMultishared() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a> MoFEM::CommInterface::makeEntitiesMultishared </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_range.html">Range</a> &amp;&#160;</td>
          <td class="paramname"><em>entities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>owner_proc</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verb</em> = <code><a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>make entities from proc 0 shared on all proc </p>
<dl class="section note"><dt>Note</dt><dd>collective - need tu be run on all processors in communicator</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entities</td><td></td></tr>
    <tr><td class="paramname">my_proc</td><td>default proc id to share from </td></tr>
    <tr><td class="paramname">verb</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MoFEMErrorCode </dd></dl>

<p class="definition">Definition at line <a class="el" href="_comm_interface_8cpp_source.html#l00787">787</a> of file <a class="el" href="_comm_interface_8cpp_source.html">CommInterface.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  789</span>                                                                {</div>
<div class="line"><span class="lineno">  790</span>  <a class="code hl_struct" href="struct_mo_f_e_m_1_1_deprecated_core_interface.html">MoFEM::Interface</a> &amp;m_field = <a class="code hl_variable" href="struct_mo_f_e_m_1_1_comm_interface.html#ab531417c6ed05f8aadbdc455817c4499">cOre</a>;</div>
<div class="line"><span class="lineno">  791</span>  <a class="code hl_define" href="definitions_8h.html#a6c0b52978f1abc88bf8a1ba70b7308e3">MoFEMFunctionBegin</a>;</div>
<div class="line"><span class="lineno">  792</span>  <span class="keywordflow">if</span> (m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">get_comm_size</a>() &gt; 1) {</div>
<div class="line"><span class="lineno">  793</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> num_ents = entities.size();</div>
<div class="line"><span class="lineno">  794</span>    std::vector&lt;EntityHandle&gt; vec_ents(num_ents);</div>
<div class="line"><span class="lineno">  795</span>    std::copy(entities.begin(), entities.end(), vec_ents.begin());</div>
<div class="line"><span class="lineno">  796</span>    <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> <a class="code hl_function" href="struct_mo_f_e_m_1_1_comm_interface.html#a7fe24f02b7e732ede41285d2b24c5f34">makeEntitiesMultishared</a>(&amp;*vec_ents.begin(), num_ents, owner_proc,</div>
<div class="line"><span class="lineno">  797</span>                                   verb);</div>
<div class="line"><span class="lineno">  798</span>  }</div>
<div class="line"><span class="lineno">  799</span>  <a class="code hl_define" href="definitions_8h.html#acb0a46d159695a01bf667313b7788b45">MoFEMFunctionReturn</a>(0);</div>
<div class="line"><span class="lineno">  800</span>}</div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_comm_interface_html_a7fe24f02b7e732ede41285d2b24c5f34"><div class="ttname"><a href="struct_mo_f_e_m_1_1_comm_interface.html#a7fe24f02b7e732ede41285d2b24c5f34">MoFEM::CommInterface::makeEntitiesMultishared</a></div><div class="ttdeci">MoFEMErrorCode makeEntitiesMultishared(const EntityHandle *entities, const int num_entities, const int owner_proc=0, int verb=DEFAULT_VERBOSITY)</div><div class="ttdoc">make entities from proc 0 shared on all proc</div><div class="ttdef"><b>Definition:</b> <a href="_comm_interface_8cpp_source.html#l00654">CommInterface.cpp:654</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae28e4bb7c807f8296fe92683a42141d3" name="ae28e4bb7c807f8296fe92683a42141d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae28e4bb7c807f8296fe92683a42141d3">&#9670;&#160;</a></span>makeFieldEntitiesMultishared()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a> MoFEM::CommInterface::makeFieldEntitiesMultishared </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>owner_proc</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verb</em> = <code><a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>make field entities multi shared </p>
<dl class="section note"><dt>Note</dt><dd>collective - need tu be run on all processors in communicator</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field_name</td><td></td></tr>
    <tr><td class="paramname">owner_proc</td><td></td></tr>
    <tr><td class="paramname">verb</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MoFEMErrorCode </dd></dl>

<p class="definition">Definition at line <a class="el" href="_comm_interface_8cpp_source.html#l00803">803</a> of file <a class="el" href="_comm_interface_8cpp_source.html">CommInterface.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  804</span>                                                                            {</div>
<div class="line"><span class="lineno">  805</span>  <a class="code hl_struct" href="struct_mo_f_e_m_1_1_deprecated_core_interface.html">MoFEM::Interface</a> &amp;m_field = <a class="code hl_variable" href="struct_mo_f_e_m_1_1_comm_interface.html#ab531417c6ed05f8aadbdc455817c4499">cOre</a>;</div>
<div class="line"><span class="lineno">  806</span>  <a class="code hl_define" href="definitions_8h.html#a6c0b52978f1abc88bf8a1ba70b7308e3">MoFEMFunctionBegin</a>;</div>
<div class="line"><span class="lineno">  807</span>  <span class="keywordflow">if</span> (m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">get_comm_size</a>() &gt; 1) {</div>
<div class="line"><span class="lineno">  808</span>    <a class="code hl_class" href="class_entity_handle.html">EntityHandle</a> field_meshset = m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a1c6b68dd3f48fc34347938bb5f0227a8">get_field_meshset</a>(<a class="code hl_variable" href="poisson__2d__homogeneous_8cpp.html#a3917f3987bad1f4e24b85c9d0ab84a5e">field_name</a>);</div>
<div class="line"><span class="lineno">  809</span>    std::vector&lt;EntityHandle&gt; field_ents;</div>
<div class="line"><span class="lineno">  810</span>    <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().get_entities_by_handle(field_meshset, field_ents,</div>
<div class="line"><span class="lineno">  811</span>                                                     <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  812</span>    <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> <a class="code hl_function" href="struct_mo_f_e_m_1_1_comm_interface.html#a7fe24f02b7e732ede41285d2b24c5f34">makeEntitiesMultishared</a>(&amp;*field_ents.begin(), field_ents.size(),</div>
<div class="line"><span class="lineno">  813</span>                                   owner_proc, verb);</div>
<div class="line"><span class="lineno">  814</span>  }</div>
<div class="line"><span class="lineno">  815</span>  <a class="code hl_define" href="definitions_8h.html#acb0a46d159695a01bf667313b7788b45">MoFEMFunctionReturn</a>(0);</div>
<div class="line"><span class="lineno">  816</span>}</div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_core_interface_html_a1c6b68dd3f48fc34347938bb5f0227a8"><div class="ttname"><a href="struct_mo_f_e_m_1_1_core_interface.html#a1c6b68dd3f48fc34347938bb5f0227a8">MoFEM::CoreInterface::get_field_meshset</a></div><div class="ttdeci">virtual EntityHandle get_field_meshset(const std::string name) const =0</div><div class="ttdoc">get field meshset</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a18e5e2368f42823b30af55d8624bd1db" name="a18e5e2368f42823b30af55d8624bd1db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18e5e2368f42823b30af55d8624bd1db">&#9670;&#160;</a></span>query_interface()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a> MoFEM::CommInterface::query_interface </td>
          <td>(</td>
          <td class="paramtype">boost::typeindex::type_index&#160;</td>
          <td class="paramname"><em>type_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html">UnknownInterface</a> **&#160;</td>
          <td class="paramname"><em>iface</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="struct_mo_f_e_m_1_1_unknown_interface.html#a525e4d5a451a5bb8c5437d0dd2588de6">MoFEM::UnknownInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="_comm_interface_8cpp_source.html#l00016">16</a> of file <a class="el" href="_comm_interface_8cpp_source.html">CommInterface.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   17</span>                                                               {</div>
<div class="line"><span class="lineno">   18</span>  <a class="code hl_define" href="definitions_8h.html#aee32377dce975c9a64ed73bd3a003404">MoFEMFunctionBeginHot</a>;</div>
<div class="line"><span class="lineno">   19</span>  *iface = <span class="keyword">const_cast&lt;</span><a class="code hl_function" href="struct_mo_f_e_m_1_1_comm_interface.html#a697543284ca3f775598811e184a6e9b4">CommInterface</a> *<span class="keyword">&gt;</span>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">   20</span>  <a class="code hl_define" href="definitions_8h.html#a59cd650c2f6d3e0dc1ad1c29821e8692">MoFEMFunctionReturnHot</a>(0);</div>
<div class="line"><span class="lineno">   21</span>}</div>
<div class="ttc" id="adefinitions_8h_html_a59cd650c2f6d3e0dc1ad1c29821e8692"><div class="ttname"><a href="definitions_8h.html#a59cd650c2f6d3e0dc1ad1c29821e8692">MoFEMFunctionReturnHot</a></div><div class="ttdeci">#define MoFEMFunctionReturnHot(a)</div><div class="ttdoc">Last executable line of each PETSc function used for error handling. Replaces return()</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8h_source.html#l00447">definitions.h:447</a></div></div>
<div class="ttc" id="adefinitions_8h_html_aee32377dce975c9a64ed73bd3a003404"><div class="ttname"><a href="definitions_8h.html#aee32377dce975c9a64ed73bd3a003404">MoFEMFunctionBeginHot</a></div><div class="ttdeci">#define MoFEMFunctionBeginHot</div><div class="ttdoc">First executable line of each MoFEM function, used for error handling. Final line of MoFEM functions ...</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8h_source.html#l00440">definitions.h:440</a></div></div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_comm_interface_html_a697543284ca3f775598811e184a6e9b4"><div class="ttname"><a href="struct_mo_f_e_m_1_1_comm_interface.html#a697543284ca3f775598811e184a6e9b4">MoFEM::CommInterface::CommInterface</a></div><div class="ttdeci">CommInterface(const MoFEM::Core &amp;core)</div><div class="ttdef"><b>Definition:</b> <a href="_comm_interface_8cpp_source.html#l00023">CommInterface.cpp:23</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae6f95b1c6dda6f6e98f775af6d4b177c" name="ae6f95b1c6dda6f6e98f775af6d4b177c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6f95b1c6dda6f6e98f775af6d4b177c">&#9670;&#160;</a></span>resolveParentEntities()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a> MoFEM::CommInterface::resolveParentEntities </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_range.html">Range</a> &amp;&#160;</td>
          <td class="paramname"><em>ent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verb</em> = <code><a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronise parent entities. </p>
<dl class="section note"><dt>Note</dt><dd>collective - need tu be run on all processors in communicator</dd></dl>
<p>Exchange parent entity tag and bitref of entity. Note thar parent handle can be different on each processor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ent</td><td></td></tr>
    <tr><td class="paramname">verb</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MoFEMErrorCode </dd></dl>

<p class="definition">Definition at line <a class="el" href="_comm_interface_8cpp_source.html#l00256">256</a> of file <a class="el" href="_comm_interface_8cpp_source.html">CommInterface.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  257</span>                                                              {</div>
<div class="line"><span class="lineno">  258</span>  <a class="code hl_struct" href="struct_mo_f_e_m_1_1_deprecated_core_interface.html">MoFEM::Interface</a> &amp;m_field = <a class="code hl_variable" href="struct_mo_f_e_m_1_1_comm_interface.html#ab531417c6ed05f8aadbdc455817c4499">cOre</a>;</div>
<div class="line"><span class="lineno">  259</span>  ParallelComm *pcomm = ParallelComm::get_pcomm(</div>
<div class="line"><span class="lineno">  260</span>      &amp;m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>(), m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#afc8134b45759ab88b40c92f07a785bf5">get_basic_entity_data_ptr</a>()-&gt;pcommID);</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>  <a class="code hl_define" href="definitions_8h.html#a6c0b52978f1abc88bf8a1ba70b7308e3">MoFEMFunctionBegin</a>;</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>  <a class="code hl_class" href="class_range.html">Range</a> shared = ents;</div>
<div class="line"><span class="lineno">  265</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> pcomm-&gt;filter_pstatus(shared, PSTATUS_NOT_OWNED, PSTATUS_NOT, -1,</div>
<div class="line"><span class="lineno">  266</span>                               <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  267</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> pcomm-&gt;filter_pstatus(shared, PSTATUS_SHARED | PSTATUS_MULTISHARED,</div>
<div class="line"><span class="lineno">  268</span>                               PSTATUS_OR, -1, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>  <span class="keyword">auto</span> th_RefParentHandle = <a class="code hl_variable" href="struct_mo_f_e_m_1_1_comm_interface.html#ab531417c6ed05f8aadbdc455817c4499">cOre</a>.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_tmp_3_010_01_4.html#aadccd33cfe35eabc29b09ca61ee3bb8d">get_th_RefParentHandle</a>();</div>
<div class="line"><span class="lineno">  271</span>  <span class="keyword">auto</span> th_RefBitLevel = <a class="code hl_variable" href="struct_mo_f_e_m_1_1_comm_interface.html#ab531417c6ed05f8aadbdc455817c4499">cOre</a>.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_tmp_3_010_01_4.html#a98496cceb4ec90958e3feda396153995">get_th_RefBitLevel</a>();</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>  <span class="keyword">auto</span> get_pstatus = [&amp;](<span class="keyword">const</span> <span class="keyword">auto</span> ent) {</div>
<div class="line"><span class="lineno">  274</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> pstatus;</div>
<div class="line"><span class="lineno">  275</span>    <a class="code hl_define" href="definitions_8h.html#a793899f524a281eb88e3ff2b01ce6acb">CHK_MOAB_THROW</a>(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(pcomm-&gt;pstatus_tag(), &amp;ent,</div>
<div class="line"><span class="lineno">  276</span>                                                   1, &amp;pstatus),</div>
<div class="line"><span class="lineno">  277</span>                   <span class="stringliteral">&quot;can not get pstatus&quot;</span>);</div>
<div class="line"><span class="lineno">  278</span>    <span class="keywordflow">return</span> pstatus;</div>
<div class="line"><span class="lineno">  279</span>  };</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>  <span class="keyword">auto</span> get_sharing_procs = [&amp;](<span class="keyword">const</span> <span class="keyword">auto</span> ent, <span class="keyword">const</span> <span class="keyword">auto</span> pstatus) {</div>
<div class="line"><span class="lineno">  282</span>    std::vector&lt;int&gt; sharing_procs(MAX_SHARING_PROCS, -1);</div>
<div class="line"><span class="lineno">  283</span>    <span class="keywordflow">if</span> (pstatus &amp; PSTATUS_MULTISHARED) {</div>
<div class="line"><span class="lineno">  284</span>      <span class="comment">// entity is multi shared</span></div>
<div class="line"><span class="lineno">  285</span>      <a class="code hl_define" href="definitions_8h.html#a793899f524a281eb88e3ff2b01ce6acb">CHK_MOAB_THROW</a>(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(</div>
<div class="line"><span class="lineno">  286</span>                         pcomm-&gt;sharedps_tag(), &amp;ent, 1, &amp;sharing_procs[0]),</div>
<div class="line"><span class="lineno">  287</span>                     <span class="stringliteral">&quot;can not ger sharing_procs_ptr&quot;</span>);</div>
<div class="line"><span class="lineno">  288</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pstatus &amp; PSTATUS_SHARED) {</div>
<div class="line"><span class="lineno">  289</span>      <span class="comment">// shared</span></div>
<div class="line"><span class="lineno">  290</span>      <a class="code hl_define" href="definitions_8h.html#a793899f524a281eb88e3ff2b01ce6acb">CHK_MOAB_THROW</a>(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(pcomm-&gt;sharedp_tag(), &amp;ent,</div>
<div class="line"><span class="lineno">  291</span>                                                     1, &amp;sharing_procs[0]),</div>
<div class="line"><span class="lineno">  292</span>                     <span class="stringliteral">&quot;can not get sharing proc&quot;</span>);</div>
<div class="line"><span class="lineno">  293</span>    }</div>
<div class="line"><span class="lineno">  294</span>    <span class="keywordflow">return</span> sharing_procs;</div>
<div class="line"><span class="lineno">  295</span>  };</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>  <span class="keyword">auto</span> get_sharing_handles = [&amp;](<span class="keyword">const</span> <span class="keyword">auto</span> ent, <span class="keyword">const</span> <span class="keyword">auto</span> pstatus) {</div>
<div class="line"><span class="lineno">  298</span>    std::vector&lt;EntityHandle&gt; sharing_handles(MAX_SHARING_PROCS, 0);</div>
<div class="line"><span class="lineno">  299</span>    <span class="keywordflow">if</span> (pstatus &amp; PSTATUS_MULTISHARED) {</div>
<div class="line"><span class="lineno">  300</span>      <span class="comment">// entity is multi shared</span></div>
<div class="line"><span class="lineno">  301</span>      <a class="code hl_define" href="definitions_8h.html#a793899f524a281eb88e3ff2b01ce6acb">CHK_MOAB_THROW</a>(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(</div>
<div class="line"><span class="lineno">  302</span>                         pcomm-&gt;sharedhs_tag(), &amp;ent, 1, &amp;sharing_handles[0]),</div>
<div class="line"><span class="lineno">  303</span>                     <span class="stringliteral">&quot;get shared handles&quot;</span>);</div>
<div class="line"><span class="lineno">  304</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pstatus &amp; PSTATUS_SHARED) {</div>
<div class="line"><span class="lineno">  305</span>      <span class="comment">// shared</span></div>
<div class="line"><span class="lineno">  306</span>      <a class="code hl_define" href="definitions_8h.html#a793899f524a281eb88e3ff2b01ce6acb">CHK_MOAB_THROW</a>(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(pcomm-&gt;sharedh_tag(), &amp;ent,</div>
<div class="line"><span class="lineno">  307</span>                                                     1, &amp;sharing_handles[0]),</div>
<div class="line"><span class="lineno">  308</span>                     <span class="stringliteral">&quot;get sharing handle&quot;</span>);</div>
<div class="line"><span class="lineno">  309</span>    }</div>
<div class="line"><span class="lineno">  310</span>    <span class="keywordflow">return</span> sharing_handles;</div>
<div class="line"><span class="lineno">  311</span>  };</div>
<div class="line"><span class="lineno">  312</span> </div>
<div class="line"><span class="lineno">  313</span>  <span class="keyword">auto</span> get_parent_and_bit = [&amp;](<span class="keyword">const</span> <span class="keyword">auto</span> ent) {</div>
<div class="line"><span class="lineno">  314</span>    <a class="code hl_class" href="class_entity_handle.html">EntityHandle</a> parent;</div>
<div class="line"><span class="lineno">  315</span>    <a class="code hl_define" href="definitions_8h.html#a793899f524a281eb88e3ff2b01ce6acb">CHK_MOAB_THROW</a>(</div>
<div class="line"><span class="lineno">  316</span>        m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(th_RefParentHandle, &amp;ent, 1, &amp;parent),</div>
<div class="line"><span class="lineno">  317</span>        <span class="stringliteral">&quot;get parent&quot;</span>);</div>
<div class="line"><span class="lineno">  318</span>    <a class="code hl_typedef" href="namespace_mo_f_e_m_1_1_types.html#aa9495b406c5326b7bca937846ec421c5">BitRefLevel</a> <a class="code hl_variable" href="hanging__node__approx_8cpp.html#ae63ebbb5e1ef5e0a8b9872228c595f8c">bit</a>;</div>
<div class="line"><span class="lineno">  319</span>    <a class="code hl_define" href="definitions_8h.html#a793899f524a281eb88e3ff2b01ce6acb">CHK_MOAB_THROW</a>(</div>
<div class="line"><span class="lineno">  320</span>        m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(th_RefBitLevel, &amp;ent, 1, &amp;<a class="code hl_variable" href="hanging__node__approx_8cpp.html#ae63ebbb5e1ef5e0a8b9872228c595f8c">bit</a>),</div>
<div class="line"><span class="lineno">  321</span>        <span class="stringliteral">&quot;get parent&quot;</span>);</div>
<div class="line"><span class="lineno">  322</span>    <span class="keywordflow">return</span> std::make_pair(parent, <a class="code hl_variable" href="hanging__node__approx_8cpp.html#ae63ebbb5e1ef5e0a8b9872228c595f8c">bit</a>);</div>
<div class="line"><span class="lineno">  323</span>  };</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>  <span class="keyword">auto</span> set_parent = [&amp;](<span class="keyword">const</span> <span class="keyword">auto</span> ent, <span class="keyword">const</span> <span class="keyword">auto</span> parent) {</div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordflow">return</span> m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_set_data(th_RefParentHandle, &amp;ent, 1,</div>
<div class="line"><span class="lineno">  327</span>                                           &amp;parent);</div>
<div class="line"><span class="lineno">  328</span>  };</div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span>  <span class="keyword">auto</span> set_bit = [&amp;](<span class="keyword">const</span> <span class="keyword">auto</span> ent, <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code hl_variable" href="hanging__node__approx_8cpp.html#ae63ebbb5e1ef5e0a8b9872228c595f8c">bit</a>) {</div>
<div class="line"><span class="lineno">  331</span>    <span class="keywordflow">return</span> m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_set_data(th_RefBitLevel, &amp;ent, 1, &amp;<a class="code hl_variable" href="hanging__node__approx_8cpp.html#ae63ebbb5e1ef5e0a8b9872228c595f8c">bit</a>);</div>
<div class="line"><span class="lineno">  332</span>  };</div>
<div class="line"><span class="lineno">  333</span> </div>
<div class="line"><span class="lineno">  334</span>  <span class="comment">// make a buffer</span></div>
<div class="line"><span class="lineno">  335</span>  std::vector&lt;std::vector&lt;unsigned long long&gt;&gt; sbuffer(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">get_comm_size</a>());</div>
<div class="line"><span class="lineno">  336</span> </div>
<div class="line"><span class="lineno">  337</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> ent : shared) {</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span>    <span class="keyword">auto</span> pstatus = get_pstatus(ent);</div>
<div class="line"><span class="lineno">  340</span>    <span class="keyword">auto</span> sharing_procs = get_sharing_procs(ent, pstatus);</div>
<div class="line"><span class="lineno">  341</span>    <span class="keyword">auto</span> sharing_handles = get_sharing_handles(ent, pstatus);</div>
<div class="line"><span class="lineno">  342</span>    <span class="keyword">auto</span> [parent, <a class="code hl_variable" href="hanging__node__approx_8cpp.html#ae63ebbb5e1ef5e0a8b9872228c595f8c">bit</a>] = get_parent_and_bit(ent);</div>
<div class="line"><span class="lineno">  343</span> </div>
<div class="line"><span class="lineno">  344</span>    <span class="keywordflow">if</span> (verb &gt;= <a class="code hl_enumvalue" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2caa4fc5b9204f57a31e594e32c02d071e9">NOISY</a>)</div>
<div class="line"><span class="lineno">  345</span>      <a class="code hl_define" href="group__mofem__log__manager.html#ga19fe81dc9081ceb92ced847e619ca654">MOFEM_LOG</a>(<span class="stringliteral">&quot;SYNC&quot;</span>, Sev::noisy) &lt;&lt; <span class="stringliteral">&quot;pstatus &quot;</span> &lt;&lt; std::bitset&lt;8&gt;(pstatus);</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>    <span class="keywordflow">if</span> (parent) {</div>
<div class="line"><span class="lineno">  348</span>      <span class="keyword">auto</span> pstatus_parent = get_pstatus(parent);</div>
<div class="line"><span class="lineno">  349</span>      <span class="keyword">auto</span> sharing_procs_parent = get_sharing_procs(parent, pstatus_parent);</div>
<div class="line"><span class="lineno">  350</span>      <span class="keyword">auto</span> sharing_handles_parent = get_sharing_handles(parent, pstatus_parent);</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> proc = 0; proc &lt; MAX_SHARING_PROCS &amp;&amp; -1 != sharing_procs[proc];</div>
<div class="line"><span class="lineno">  353</span>           proc++) {</div>
<div class="line"><span class="lineno">  354</span>        <span class="keywordflow">if</span> (sharing_procs[proc] == -1)</div>
<div class="line"><span class="lineno">  355</span>          SETERRQ(PETSC_COMM_SELF, <a class="code hl_enumvalue" href="definitions_8h.html#a980bf270a5c3f2f984262f7e74786a2ea75f611e0673e99085edc1b5ac5343023">MOFEM_IMPOSSIBLE_CASE</a>,</div>
<div class="line"><span class="lineno">  356</span>                  <span class="stringliteral">&quot;sharing processor not set&quot;</span>);</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>        <span class="keywordflow">if</span> (sharing_procs[proc] != m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#af2224ce77b33637b5cfad66a275a2ffb">get_comm_rank</a>()) {</div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>          <span class="keyword">auto</span> it = std::find(sharing_procs_parent.begin(),</div>
<div class="line"><span class="lineno">  361</span>                              sharing_procs_parent.end(), sharing_procs[proc]);</div>
<div class="line"><span class="lineno">  362</span>          <span class="keywordflow">if</span> (it == sharing_procs_parent.end()) {</div>
<div class="line"><span class="lineno">  363</span>            SETERRQ1(</div>
<div class="line"><span class="lineno">  364</span>                PETSC_COMM_SELF, <a class="code hl_enumvalue" href="definitions_8h.html#a980bf270a5c3f2f984262f7e74786a2eac345e9ce83307109886a56dcaf5ab724">MOFEM_DATA_INCONSISTENCY</a>,</div>
<div class="line"><span class="lineno">  365</span>                <span class="stringliteral">&quot;Sharing proc for parent entity can not be found proc = %u&quot;</span>,</div>
<div class="line"><span class="lineno">  366</span>                sharing_procs[proc]);</div>
<div class="line"><span class="lineno">  367</span>          }</div>
<div class="line"><span class="lineno">  368</span> </div>
<div class="line"><span class="lineno">  369</span>          <span class="keyword">auto</span> handle_on_sharing_proc = sharing_handles[proc];</div>
<div class="line"><span class="lineno">  370</span>          <span class="keyword">auto</span> parent_handle_on_sharing_proc =</div>
<div class="line"><span class="lineno">  371</span>              sharing_handles_parent[std::distance(sharing_procs_parent.begin(),</div>
<div class="line"><span class="lineno">  372</span>                                                   it)];</div>
<div class="line"><span class="lineno">  373</span>          sbuffer[sharing_procs[proc]].push_back(handle_on_sharing_proc);</div>
<div class="line"><span class="lineno">  374</span>          sbuffer[sharing_procs[proc]].push_back(parent_handle_on_sharing_proc);</div>
<div class="line"><span class="lineno">  375</span>          <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  376</span>            sbuffer[sharing_procs[proc]].push_back(<a class="code hl_variable" href="hanging__node__approx_8cpp.html#ae63ebbb5e1ef5e0a8b9872228c595f8c">bit</a>.to_ullong());</div>
<div class="line"><span class="lineno">  377</span>          } <span class="keywordflow">catch</span> (std::exception &amp;ex) {</div>
<div class="line"><span class="lineno">  378</span>            <a class="code hl_define" href="group__mofem__log__manager.html#ga19fe81dc9081ceb92ced847e619ca654">MOFEM_LOG</a>(<span class="stringliteral">&quot;SELF&quot;</span>, Sev::warning) &lt;&lt; ex.what();</div>
<div class="line"><span class="lineno">  379</span>            <a class="code hl_define" href="group__mofem__log__manager.html#ga19fe81dc9081ceb92ced847e619ca654">MOFEM_LOG</a>(<span class="stringliteral">&quot;SELF&quot;</span>, Sev::warning)</div>
<div class="line"><span class="lineno">  380</span>                &lt;&lt; <span class="stringliteral">&quot;On &quot;</span> &lt;&lt; ent &lt;&lt; <span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><span class="lineno">  381</span>                &lt;&lt; moab::CN::EntityTypeName(<a class="code hl_function" href="namespace_mo_f_e_m.html#a01f67868b6366749021d5258535655cd">type_from_handle</a>(ent));</div>
<div class="line"><span class="lineno">  382</span>            <a class="code hl_define" href="group__mofem__log__manager.html#ga19fe81dc9081ceb92ced847e619ca654">MOFEM_LOG</a>(<span class="stringliteral">&quot;SELF&quot;</span>, Sev::warning) &lt;&lt; <span class="stringliteral">&quot;For bit ref &quot;</span> &lt;&lt; <a class="code hl_variable" href="hanging__node__approx_8cpp.html#ae63ebbb5e1ef5e0a8b9872228c595f8c">bit</a>;</div>
<div class="line"><span class="lineno">  383</span>          }          </div>
<div class="line"><span class="lineno">  384</span>          <span class="keywordflow">if</span> (verb &gt;= <a class="code hl_enumvalue" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2caa4fc5b9204f57a31e594e32c02d071e9">NOISY</a>)</div>
<div class="line"><span class="lineno">  385</span>            <a class="code hl_define" href="_log_manager_8hpp.html#aef9b5316ec6db54581633adf7c670011">MOFEM_LOG_C</a>(<span class="stringliteral">&quot;SYNC&quot;</span>, Sev::noisy, <span class="stringliteral">&quot;send %lu (%lu) to %d at %d\n&quot;</span>, ent,</div>
<div class="line"><span class="lineno">  386</span>                        handle_on_sharing_proc, sharing_procs[proc],</div>
<div class="line"><span class="lineno">  387</span>                        m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#af2224ce77b33637b5cfad66a275a2ffb">get_comm_rank</a>());</div>
<div class="line"><span class="lineno">  388</span> </div>
<div class="line"><span class="lineno">  389</span>          <span class="keywordflow">if</span> (!(pstatus &amp; PSTATUS_MULTISHARED))</div>
<div class="line"><span class="lineno">  390</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  391</span>        }</div>
<div class="line"><span class="lineno">  392</span>      }</div>
<div class="line"><span class="lineno">  393</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  394</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> proc = 0; proc &lt; MAX_SHARING_PROCS &amp;&amp; -1 != sharing_procs[proc];</div>
<div class="line"><span class="lineno">  395</span>           proc++) {</div>
<div class="line"><span class="lineno">  396</span>        <span class="keywordflow">if</span> (sharing_procs[proc] == -1)</div>
<div class="line"><span class="lineno">  397</span>          SETERRQ(PETSC_COMM_SELF, <a class="code hl_enumvalue" href="definitions_8h.html#a980bf270a5c3f2f984262f7e74786a2ea75f611e0673e99085edc1b5ac5343023">MOFEM_IMPOSSIBLE_CASE</a>,</div>
<div class="line"><span class="lineno">  398</span>                  <span class="stringliteral">&quot;sharing processor not set&quot;</span>);</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>        <span class="keywordflow">if</span> (sharing_procs[proc] != m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#af2224ce77b33637b5cfad66a275a2ffb">get_comm_rank</a>()) {</div>
<div class="line"><span class="lineno">  401</span>          <span class="keyword">auto</span> handle_on_sharing_proc = sharing_handles[proc];</div>
<div class="line"><span class="lineno">  402</span>          sbuffer[sharing_procs[proc]].push_back(handle_on_sharing_proc);</div>
<div class="line"><span class="lineno">  403</span>          sbuffer[sharing_procs[proc]].push_back(parent);</div>
<div class="line"><span class="lineno">  404</span> </div>
<div class="line"><span class="lineno">  405</span>          <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  406</span>            sbuffer[sharing_procs[proc]].push_back(<a class="code hl_variable" href="hanging__node__approx_8cpp.html#ae63ebbb5e1ef5e0a8b9872228c595f8c">bit</a>.to_ullong());</div>
<div class="line"><span class="lineno">  407</span>          } <span class="keywordflow">catch</span> (std::exception &amp;ex) {</div>
<div class="line"><span class="lineno">  408</span>            <a class="code hl_define" href="group__mofem__log__manager.html#ga19fe81dc9081ceb92ced847e619ca654">MOFEM_LOG</a>(<span class="stringliteral">&quot;SELF&quot;</span>, Sev::warning) &lt;&lt; ex.what();</div>
<div class="line"><span class="lineno">  409</span>            <a class="code hl_define" href="group__mofem__log__manager.html#ga19fe81dc9081ceb92ced847e619ca654">MOFEM_LOG</a>(<span class="stringliteral">&quot;SELF&quot;</span>, Sev::warning)</div>
<div class="line"><span class="lineno">  410</span>                &lt;&lt; <span class="stringliteral">&quot;On &quot;</span> &lt;&lt; ent &lt;&lt; <span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><span class="lineno">  411</span>                &lt;&lt; moab::CN::EntityTypeName(<a class="code hl_function" href="namespace_mo_f_e_m.html#a01f67868b6366749021d5258535655cd">type_from_handle</a>(ent));</div>
<div class="line"><span class="lineno">  412</span>            <a class="code hl_define" href="group__mofem__log__manager.html#ga19fe81dc9081ceb92ced847e619ca654">MOFEM_LOG</a>(<span class="stringliteral">&quot;SELF&quot;</span>, Sev::warning) &lt;&lt; <span class="stringliteral">&quot;For bit ref &quot;</span> &lt;&lt; <a class="code hl_variable" href="hanging__node__approx_8cpp.html#ae63ebbb5e1ef5e0a8b9872228c595f8c">bit</a>;</div>
<div class="line"><span class="lineno">  413</span>          }</div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span>          <span class="keywordflow">if</span> (verb &gt;= <a class="code hl_enumvalue" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2caa4fc5b9204f57a31e594e32c02d071e9">NOISY</a>)</div>
<div class="line"><span class="lineno">  416</span>            <a class="code hl_define" href="_log_manager_8hpp.html#aef9b5316ec6db54581633adf7c670011">MOFEM_LOG_C</a>(<span class="stringliteral">&quot;SYNC&quot;</span>, Sev::noisy, <span class="stringliteral">&quot;send %lu (%lu) to %d at %d\n&quot;</span>, ent,</div>
<div class="line"><span class="lineno">  417</span>                        handle_on_sharing_proc, sharing_procs[proc],</div>
<div class="line"><span class="lineno">  418</span>                        m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#af2224ce77b33637b5cfad66a275a2ffb">get_comm_rank</a>());</div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span>          <span class="keywordflow">if</span> (!(pstatus &amp; PSTATUS_MULTISHARED))</div>
<div class="line"><span class="lineno">  421</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  422</span>        }</div>
<div class="line"><span class="lineno">  423</span>      }</div>
<div class="line"><span class="lineno">  424</span>    }</div>
<div class="line"><span class="lineno">  425</span>  }</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span>  <span class="keywordtype">int</span> nsends = 0; <span class="comment">// number of messages to send</span></div>
<div class="line"><span class="lineno">  428</span>  std::vector&lt;int&gt; sbuffer_lengths(</div>
<div class="line"><span class="lineno">  429</span>      m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">get_comm_size</a>()); <span class="comment">// length of the message to proc</span></div>
<div class="line"><span class="lineno">  430</span> </div>
<div class="line"><span class="lineno">  431</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> block_size = <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> long) / <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>);</div>
<div class="line"><span class="lineno">  432</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> proc = 0; proc &lt; m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">get_comm_size</a>(); proc++) {</div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>    <span class="keywordflow">if</span> (!sbuffer[proc].empty()) {</div>
<div class="line"><span class="lineno">  435</span> </div>
<div class="line"><span class="lineno">  436</span>      sbuffer_lengths[proc] = sbuffer[proc].size() * block_size;</div>
<div class="line"><span class="lineno">  437</span>      nsends++;</div>
<div class="line"><span class="lineno">  438</span> </div>
<div class="line"><span class="lineno">  439</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span>      sbuffer_lengths[proc] = 0;</div>
<div class="line"><span class="lineno">  442</span>    }</div>
<div class="line"><span class="lineno">  443</span>  }</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span>  <span class="comment">// Make sure it is a PETSc m_field.get_comm()</span></div>
<div class="line"><span class="lineno">  446</span>  MPI_Comm comm;</div>
<div class="line"><span class="lineno">  447</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscCommDuplicate(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a9b2bc8c1b980f49d31a0b5f7fbe756f5">get_comm</a>(), &amp;comm, NULL);</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>  std::vector&lt;MPI_Status&gt; status(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">get_comm_size</a>());</div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>  <span class="comment">// Computes the number of messages a node expects to receive</span></div>
<div class="line"><span class="lineno">  452</span>  <span class="keywordtype">int</span> nrecvs; <span class="comment">// number of messages received</span></div>
<div class="line"><span class="lineno">  453</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscGatherNumberOfMessages(comm, NULL, &amp;sbuffer_lengths[0], &amp;nrecvs);</div>
<div class="line"><span class="lineno">  454</span> </div>
<div class="line"><span class="lineno">  455</span>  <span class="comment">// Computes info about messages that a MPI-node will receive, including</span></div>
<div class="line"><span class="lineno">  456</span>  <span class="comment">// (from-id,length) pairs for each message.</span></div>
<div class="line"><span class="lineno">  457</span>  <span class="keywordtype">int</span> *onodes;   <span class="comment">// list of node-ids from which messages are expected</span></div>
<div class="line"><span class="lineno">  458</span>  <span class="keywordtype">int</span> *olengths; <span class="comment">// corresponding message lengths</span></div>
<div class="line"><span class="lineno">  459</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscGatherMessageLengths(comm, nsends, nrecvs, &amp;sbuffer_lengths[0],</div>
<div class="line"><span class="lineno">  460</span>                                   &amp;onodes, &amp;olengths);</div>
<div class="line"><span class="lineno">  461</span> </div>
<div class="line"><span class="lineno">  462</span>  <span class="comment">// Gets a unique new tag from a PETSc communicator. All processors that share</span></div>
<div class="line"><span class="lineno">  463</span>  <span class="comment">// the communicator MUST call this routine EXACTLY the same number of times.</span></div>
<div class="line"><span class="lineno">  464</span>  <span class="comment">// This tag should only be used with the current objects communicator; do NOT</span></div>
<div class="line"><span class="lineno">  465</span>  <span class="comment">// use it with any other MPI communicator.</span></div>
<div class="line"><span class="lineno">  466</span>  <span class="keywordtype">int</span> tag;</div>
<div class="line"><span class="lineno">  467</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscCommGetNewTag(comm, &amp;tag);</div>
<div class="line"><span class="lineno">  468</span> </div>
<div class="line"><span class="lineno">  469</span>  <span class="comment">// Allocate a buffer sufficient to hold messages of size specified in</span></div>
<div class="line"><span class="lineno">  470</span>  <span class="comment">// olengths. And post Irecvs on these buffers using node info from onodes</span></div>
<div class="line"><span class="lineno">  471</span>  <span class="keywordtype">int</span> **rbuf;           <span class="comment">// must bee freed by user</span></div>
<div class="line"><span class="lineno">  472</span>  MPI_Request *r_waits; <span class="comment">// must bee freed by user</span></div>
<div class="line"><span class="lineno">  473</span>  <span class="comment">// rbuf has a pointers to messages. It has size of of nrecvs (number of</span></div>
<div class="line"><span class="lineno">  474</span>  <span class="comment">// messages) +1. In the first index a block is allocated,</span></div>
<div class="line"><span class="lineno">  475</span>  <span class="comment">// such that rbuf[i] = rbuf[i-1]+olengths[i-1].</span></div>
<div class="line"><span class="lineno">  476</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscPostIrecvInt(comm, tag, nrecvs, onodes, olengths, &amp;rbuf,</div>
<div class="line"><span class="lineno">  477</span>                           &amp;r_waits);</div>
<div class="line"><span class="lineno">  478</span> </div>
<div class="line"><span class="lineno">  479</span>  MPI_Request *s_waits; <span class="comment">// status of sens messages</span></div>
<div class="line"><span class="lineno">  480</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscMalloc1(nsends, &amp;s_waits);</div>
<div class="line"><span class="lineno">  481</span> </div>
<div class="line"><span class="lineno">  482</span>  <span class="comment">// Send messages</span></div>
<div class="line"><span class="lineno">  483</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> proc = 0, kk = 0; proc &lt; m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">get_comm_size</a>(); proc++) {</div>
<div class="line"><span class="lineno">  484</span>    <span class="keywordflow">if</span> (!sbuffer_lengths[proc])</div>
<div class="line"><span class="lineno">  485</span>      <span class="keywordflow">continue</span>;                             <span class="comment">// no message to send to this proc</span></div>
<div class="line"><span class="lineno">  486</span>    <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> MPI_Isend(&amp;(sbuffer[proc])[0],   <span class="comment">// buffer to send</span></div>
<div class="line"><span class="lineno">  487</span>                     sbuffer_lengths[proc], <span class="comment">// message length</span></div>
<div class="line"><span class="lineno">  488</span>                     MPIU_INT, proc,        <span class="comment">// to proc</span></div>
<div class="line"><span class="lineno">  489</span>                     tag, comm, s_waits + kk);</div>
<div class="line"><span class="lineno">  490</span>    kk++;</div>
<div class="line"><span class="lineno">  491</span>  }</div>
<div class="line"><span class="lineno">  492</span> </div>
<div class="line"><span class="lineno">  493</span>  <span class="comment">// Wait for received</span></div>
<div class="line"><span class="lineno">  494</span>  <span class="keywordflow">if</span> (nrecvs)</div>
<div class="line"><span class="lineno">  495</span>    <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> MPI_Waitall(nrecvs, r_waits, &amp;status[0]);</div>
<div class="line"><span class="lineno">  496</span> </div>
<div class="line"><span class="lineno">  497</span>  <span class="comment">// Wait for send messages</span></div>
<div class="line"><span class="lineno">  498</span>  <span class="keywordflow">if</span> (nsends)</div>
<div class="line"><span class="lineno">  499</span>    <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> MPI_Waitall(nsends, s_waits, &amp;status[0]);</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>  <span class="keywordflow">if</span> (verb &gt;= <a class="code hl_enumvalue" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2cace3e26676763569084c86b8c3b67d601">VERBOSE</a>) {</div>
<div class="line"><span class="lineno">  502</span>    <a class="code hl_define" href="_log_manager_8hpp.html#aef9b5316ec6db54581633adf7c670011">MOFEM_LOG_C</a>(<span class="stringliteral">&quot;SYNC&quot;</span>, Sev::verbose,</div>
<div class="line"><span class="lineno">  503</span>                <span class="stringliteral">&quot;Rank %d nb. shared to synchronise parents ents %u\n&quot;</span>,</div>
<div class="line"><span class="lineno">  504</span>                m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#af2224ce77b33637b5cfad66a275a2ffb">get_comm_rank</a>(), shared.size());</div>
<div class="line"><span class="lineno">  505</span>  }</div>
<div class="line"><span class="lineno">  506</span> </div>
<div class="line"><span class="lineno">  507</span>  <span class="comment">// synchronise range</span></div>
<div class="line"><span class="lineno">  508</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> kk = 0; kk &lt; nrecvs; kk++) {</div>
<div class="line"><span class="lineno">  509</span> </div>
<div class="line"><span class="lineno">  510</span>    <span class="keywordtype">int</span> len = olengths[kk];</div>
<div class="line"><span class="lineno">  511</span>    <span class="keywordtype">int</span> *data_from_proc = rbuf[kk];</div>
<div class="line"><span class="lineno">  512</span> </div>
<div class="line"><span class="lineno">  513</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ee = 0; ee &lt; len;) {</div>
<div class="line"><span class="lineno">  514</span>      <a class="code hl_class" href="class_entity_handle.html">EntityHandle</a> ent;</div>
<div class="line"><span class="lineno">  515</span>      <a class="code hl_class" href="class_entity_handle.html">EntityHandle</a> parent;</div>
<div class="line"><span class="lineno">  516</span>      <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> uulong_bit;</div>
<div class="line"><span class="lineno">  517</span>      bcopy(&amp;data_from_proc[ee], &amp;ent, <span class="keyword">sizeof</span>(<a class="code hl_class" href="class_entity_handle.html">EntityHandle</a>));</div>
<div class="line"><span class="lineno">  518</span>      ee += block_size;</div>
<div class="line"><span class="lineno">  519</span>      bcopy(&amp;data_from_proc[ee], &amp;parent, <span class="keyword">sizeof</span>(<a class="code hl_class" href="class_entity_handle.html">EntityHandle</a>));</div>
<div class="line"><span class="lineno">  520</span>      ee += block_size;</div>
<div class="line"><span class="lineno">  521</span>      bcopy(&amp;data_from_proc[ee], &amp;uulong_bit, <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>));</div>
<div class="line"><span class="lineno">  522</span>      ee += block_size;</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>      <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> set_parent(ent, parent);</div>
<div class="line"><span class="lineno">  525</span>      <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> set_bit(ent, <a class="code hl_typedef" href="namespace_mo_f_e_m_1_1_types.html#aa9495b406c5326b7bca937846ec421c5">BitRefLevel</a>(uulong_bit));</div>
<div class="line"><span class="lineno">  526</span> </div>
<div class="line"><span class="lineno">  527</span>      <span class="keywordflow">if</span> (verb &gt;= <a class="code hl_enumvalue" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2cace3e26676763569084c86b8c3b67d601">VERBOSE</a>) {</div>
<div class="line"><span class="lineno">  528</span>        <a class="code hl_define" href="_log_manager_8hpp.html#aef9b5316ec6db54581633adf7c670011">MOFEM_LOG_C</a>(<span class="stringliteral">&quot;SYNC&quot;</span>, Sev::noisy, <span class="stringliteral">&quot;received %lu (%lu) from %d at %d\n&quot;</span>,</div>
<div class="line"><span class="lineno">  529</span>                    ent, parent, onodes[kk], m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#af2224ce77b33637b5cfad66a275a2ffb">get_comm_rank</a>());</div>
<div class="line"><span class="lineno">  530</span>        <a class="code hl_define" href="group__mofem__log__manager.html#ga19fe81dc9081ceb92ced847e619ca654">MOFEM_LOG</a>(<span class="stringliteral">&quot;SYNC&quot;</span>, Sev::noisy) &lt;&lt; <span class="stringliteral">&quot;Bit &quot;</span> &lt;&lt; <a class="code hl_typedef" href="namespace_mo_f_e_m_1_1_types.html#aa9495b406c5326b7bca937846ec421c5">BitRefLevel</a>(uulong_bit);</div>
<div class="line"><span class="lineno">  531</span>      }</div>
<div class="line"><span class="lineno">  532</span>    }</div>
<div class="line"><span class="lineno">  533</span>  }</div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span>  <span class="comment">// Cleaning</span></div>
<div class="line"><span class="lineno">  536</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscFree(s_waits);</div>
<div class="line"><span class="lineno">  537</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscFree(rbuf[0]);</div>
<div class="line"><span class="lineno">  538</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscFree(rbuf);</div>
<div class="line"><span class="lineno">  539</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscFree(r_waits);</div>
<div class="line"><span class="lineno">  540</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscFree(onodes);</div>
<div class="line"><span class="lineno">  541</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscFree(olengths);</div>
<div class="line"><span class="lineno">  542</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscCommDestroy(&amp;comm);</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span>  <span class="keywordflow">if</span> (verb &gt;= <a class="code hl_enumvalue" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2cace3e26676763569084c86b8c3b67d601">VERBOSE</a>)</div>
<div class="line"><span class="lineno">  545</span>    <a class="code hl_define" href="_log_manager_8hpp.html#adacc7b9e7c4fa95cc0959ca359f999f5">MOFEM_LOG_SYNCHRONISE</a>(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a9b2bc8c1b980f49d31a0b5f7fbe756f5">get_comm</a>());</div>
<div class="line"><span class="lineno">  546</span> </div>
<div class="line"><span class="lineno">  547</span>  <a class="code hl_define" href="definitions_8h.html#acb0a46d159695a01bf667313b7788b45">MoFEMFunctionReturn</a>(0);</div>
<div class="line"><span class="lineno">  548</span>}</div>
<div class="ttc" id="a_log_manager_8hpp_html_aef9b5316ec6db54581633adf7c670011"><div class="ttname"><a href="_log_manager_8hpp.html#aef9b5316ec6db54581633adf7c670011">MOFEM_LOG_C</a></div><div class="ttdeci">#define MOFEM_LOG_C(channel, severity, format,...)</div><div class="ttdef"><b>Definition:</b> <a href="_log_manager_8hpp_source.html#l00311">LogManager.hpp:311</a></div></div>
<div class="ttc" id="adefinitions_8h_html_a018e38d630e7ebef4cfa48ab69889f2cace3e26676763569084c86b8c3b67d601"><div class="ttname"><a href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2cace3e26676763569084c86b8c3b67d601">VERBOSE</a></div><div class="ttdeci">@ VERBOSE</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8h_source.html#l00209">definitions.h:209</a></div></div>
<div class="ttc" id="adefinitions_8h_html_a793899f524a281eb88e3ff2b01ce6acb"><div class="ttname"><a href="definitions_8h.html#a793899f524a281eb88e3ff2b01ce6acb">CHK_MOAB_THROW</a></div><div class="ttdeci">#define CHK_MOAB_THROW(err, msg)</div><div class="ttdoc">Check error code of MoAB function and throw MoFEM exception.</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8h_source.html#l00576">definitions.h:576</a></div></div>
<div class="ttc" id="adefinitions_8h_html_a980bf270a5c3f2f984262f7e74786a2ea75f611e0673e99085edc1b5ac5343023"><div class="ttname"><a href="definitions_8h.html#a980bf270a5c3f2f984262f7e74786a2ea75f611e0673e99085edc1b5ac5343023">MOFEM_IMPOSSIBLE_CASE</a></div><div class="ttdeci">@ MOFEM_IMPOSSIBLE_CASE</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8h_source.html#l00035">definitions.h:35</a></div></div>
<div class="ttc" id="adefinitions_8h_html_a980bf270a5c3f2f984262f7e74786a2eac345e9ce83307109886a56dcaf5ab724"><div class="ttname"><a href="definitions_8h.html#a980bf270a5c3f2f984262f7e74786a2eac345e9ce83307109886a56dcaf5ab724">MOFEM_DATA_INCONSISTENCY</a></div><div class="ttdeci">@ MOFEM_DATA_INCONSISTENCY</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8h_source.html#l00031">definitions.h:31</a></div></div>
<div class="ttc" id="ahanging__node__approx_8cpp_html_ae63ebbb5e1ef5e0a8b9872228c595f8c"><div class="ttname"><a href="hanging__node__approx_8cpp.html#ae63ebbb5e1ef5e0a8b9872228c595f8c">bit</a></div><div class="ttdeci">auto bit</div><div class="ttdoc">set bit</div><div class="ttdef"><b>Definition:</b> <a href="hanging__node__approx_8cpp_source.html#l00075">hanging_node_approx.cpp:75</a></div></div>
<div class="ttc" id="anamespace_mo_f_e_m_1_1_types_html_aa9495b406c5326b7bca937846ec421c5"><div class="ttname"><a href="namespace_mo_f_e_m_1_1_types.html#aa9495b406c5326b7bca937846ec421c5">MoFEM::Types::BitRefLevel</a></div><div class="ttdeci">std::bitset&lt; BITREFLEVEL_SIZE &gt; BitRefLevel</div><div class="ttdoc">Bit structure attached to each entity identifying to what mesh entity is attached.</div><div class="ttdef"><b>Definition:</b> <a href="_types_8hpp_source.html#l00040">Types.hpp:40</a></div></div>
<div class="ttc" id="anamespace_mo_f_e_m_html_a01f67868b6366749021d5258535655cd"><div class="ttname"><a href="namespace_mo_f_e_m.html#a01f67868b6366749021d5258535655cd">MoFEM::type_from_handle</a></div><div class="ttdeci">auto type_from_handle(const EntityHandle h)</div><div class="ttdoc">get type from entity handle</div><div class="ttdef"><b>Definition:</b> <a href="_templates_8hpp_source.html#l01779">Templates.hpp:1779</a></div></div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_core_tmp_3_010_01_4_html_a98496cceb4ec90958e3feda396153995"><div class="ttname"><a href="struct_mo_f_e_m_1_1_core_tmp_3_010_01_4.html#a98496cceb4ec90958e3feda396153995">MoFEM::CoreTmp&lt; 0 &gt;::get_th_RefBitLevel</a></div><div class="ttdeci">Tag get_th_RefBitLevel() const</div><div class="ttdef"><b>Definition:</b> <a href="_core_8hpp_source.html#l00198">Core.hpp:198</a></div></div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_core_tmp_3_010_01_4_html_aadccd33cfe35eabc29b09ca61ee3bb8d"><div class="ttname"><a href="struct_mo_f_e_m_1_1_core_tmp_3_010_01_4.html#aadccd33cfe35eabc29b09ca61ee3bb8d">MoFEM::CoreTmp&lt; 0 &gt;::get_th_RefParentHandle</a></div><div class="ttdeci">Tag get_th_RefParentHandle() const</div><div class="ttdef"><b>Definition:</b> <a href="_core_8hpp_source.html#l00197">Core.hpp:197</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9e44331a3419211c0500eb8bdfcdd30d" name="a9e44331a3419211c0500eb8bdfcdd30d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e44331a3419211c0500eb8bdfcdd30d">&#9670;&#160;</a></span>synchroniseEntities() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a> MoFEM::CommInterface::synchroniseEntities </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_range.html">Range</a> &amp;&#160;</td>
          <td class="paramname"><em>ent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verb</em> = <code><a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>synchronize entity range on processors (collective) </p>
<dl class="section note"><dt>Note</dt><dd>collective - need tu be run on all processors in communicator</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ent</td><td>ents to send and received </td></tr>
    <tr><td class="paramname">verb</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MoFEMErrorCode </dd></dl>

<p class="definition">Definition at line <a class="el" href="_comm_interface_8cpp_source.html#l00240">240</a> of file <a class="el" href="_comm_interface_8cpp_source.html">CommInterface.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  240</span>                                                                       {</div>
<div class="line"><span class="lineno">  241</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="struct_mo_f_e_m_1_1_comm_interface.html#aaf48742e4832bab940f922703f6176b6">synchroniseEntities</a>(ents, <span class="keyword">nullptr</span>, verb);</div>
<div class="line"><span class="lineno">  242</span>}</div>
<div class="ttc" id="astruct_mo_f_e_m_1_1_comm_interface_html_aaf48742e4832bab940f922703f6176b6"><div class="ttname"><a href="struct_mo_f_e_m_1_1_comm_interface.html#aaf48742e4832bab940f922703f6176b6">MoFEM::CommInterface::synchroniseEntities</a></div><div class="ttdeci">MoFEMErrorCode synchroniseEntities(Range &amp;ent, std::map&lt; int, Range &gt; *received_ents, int verb=DEFAULT_VERBOSITY)</div><div class="ttdoc">synchronize entity range on processors (collective)</div><div class="ttdef"><b>Definition:</b> <a href="_comm_interface_8cpp_source.html#l00026">CommInterface.cpp:26</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf48742e4832bab940f922703f6176b6" name="aaf48742e4832bab940f922703f6176b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf48742e4832bab940f922703f6176b6">&#9670;&#160;</a></span>synchroniseEntities() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_mo_f_e_m_1_1_exceptions.html#a8fb6351034eac301fc47fdf2748c1b45">MoFEMErrorCode</a> MoFEM::CommInterface::synchroniseEntities </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_range.html">Range</a> &amp;&#160;</td>
          <td class="paramname"><em>ent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; int, <a class="el" href="class_range.html">Range</a> &gt; *&#160;</td>
          <td class="paramname"><em>received_ents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verb</em> = <code><a class="el" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2ca8d51b8918fe33e9750d285a25977f435">DEFAULT_VERBOSITY</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>synchronize entity range on processors (collective) </p>
<p >synchronize entity range on processors (collective)</p>
<dl class="section note"><dt>Note</dt><dd>collective - need tu be run on all processors in communicator </dd>
<dd>
collective - need tu be run on all processors in communicator</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ent</td><td>ents to send and received </td></tr>
    <tr><td class="paramname">received_ents</td><td>pointer to map with received entities </td></tr>
    <tr><td class="paramname">verb</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MoFEMErrorCode </dd></dl>

<p class="definition">Definition at line <a class="el" href="_comm_interface_8cpp_source.html#l00026">26</a> of file <a class="el" href="_comm_interface_8cpp_source.html">CommInterface.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   27</span>                                                              {</div>
<div class="line"><span class="lineno">   28</span>  <a class="code hl_struct" href="struct_mo_f_e_m_1_1_deprecated_core_interface.html">MoFEM::Interface</a> &amp;m_field = <a class="code hl_variable" href="struct_mo_f_e_m_1_1_comm_interface.html#ab531417c6ed05f8aadbdc455817c4499">cOre</a>;</div>
<div class="line"><span class="lineno">   29</span>  ParallelComm *pcomm = ParallelComm::get_pcomm(</div>
<div class="line"><span class="lineno">   30</span>      &amp;m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>(), m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#afc8134b45759ab88b40c92f07a785bf5">get_basic_entity_data_ptr</a>()-&gt;pcommID);</div>
<div class="line"><span class="lineno">   31</span>  <a class="code hl_define" href="definitions_8h.html#a6c0b52978f1abc88bf8a1ba70b7308e3">MoFEMFunctionBegin</a>;</div>
<div class="line"><span class="lineno">   32</span> </div>
<div class="line"><span class="lineno">   33</span>  <span class="keyword">auto</span> get_pstatus = [&amp;](<span class="keyword">const</span> <span class="keyword">auto</span> ent) {</div>
<div class="line"><span class="lineno">   34</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> pstatus;</div>
<div class="line"><span class="lineno">   35</span>    <a class="code hl_define" href="definitions_8h.html#a793899f524a281eb88e3ff2b01ce6acb">CHK_MOAB_THROW</a>(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(pcomm-&gt;pstatus_tag(), &amp;ent,</div>
<div class="line"><span class="lineno">   36</span>                                                   1, &amp;pstatus),</div>
<div class="line"><span class="lineno">   37</span>                   <span class="stringliteral">&quot;can not get pstatus&quot;</span>);</div>
<div class="line"><span class="lineno">   38</span>    <span class="keywordflow">return</span> pstatus;</div>
<div class="line"><span class="lineno">   39</span>  };</div>
<div class="line"><span class="lineno">   40</span> </div>
<div class="line"><span class="lineno">   41</span>  <span class="keyword">auto</span> get_sharing_procs = [&amp;](<span class="keyword">const</span> <span class="keyword">auto</span> ent, <span class="keyword">const</span> <span class="keyword">auto</span> pstatus) {</div>
<div class="line"><span class="lineno">   42</span>    std::vector&lt;int&gt; sharing_procs(MAX_SHARING_PROCS, -1);</div>
<div class="line"><span class="lineno">   43</span>    <span class="keywordflow">if</span> (pstatus &amp; PSTATUS_MULTISHARED) {</div>
<div class="line"><span class="lineno">   44</span>      <span class="comment">// entity is multi shared</span></div>
<div class="line"><span class="lineno">   45</span>      <a class="code hl_define" href="definitions_8h.html#a793899f524a281eb88e3ff2b01ce6acb">CHK_MOAB_THROW</a>(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(</div>
<div class="line"><span class="lineno">   46</span>                         pcomm-&gt;sharedps_tag(), &amp;ent, 1, &amp;sharing_procs[0]),</div>
<div class="line"><span class="lineno">   47</span>                     <span class="stringliteral">&quot;can not ger sharing_procs_ptr&quot;</span>);</div>
<div class="line"><span class="lineno">   48</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pstatus &amp; PSTATUS_SHARED) {</div>
<div class="line"><span class="lineno">   49</span>      <span class="comment">// shared</span></div>
<div class="line"><span class="lineno">   50</span>      <a class="code hl_define" href="definitions_8h.html#a793899f524a281eb88e3ff2b01ce6acb">CHK_MOAB_THROW</a>(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(pcomm-&gt;sharedp_tag(), &amp;ent,</div>
<div class="line"><span class="lineno">   51</span>                                                     1, &amp;sharing_procs[0]),</div>
<div class="line"><span class="lineno">   52</span>                     <span class="stringliteral">&quot;can not get sharing proc&quot;</span>);</div>
<div class="line"><span class="lineno">   53</span>    }</div>
<div class="line"><span class="lineno">   54</span>    <span class="keywordflow">return</span> sharing_procs;</div>
<div class="line"><span class="lineno">   55</span>  };</div>
<div class="line"><span class="lineno">   56</span> </div>
<div class="line"><span class="lineno">   57</span>  <span class="keyword">auto</span> get_sharing_handles = [&amp;](<span class="keyword">const</span> <span class="keyword">auto</span> ent, <span class="keyword">const</span> <span class="keyword">auto</span> pstatus) {</div>
<div class="line"><span class="lineno">   58</span>    std::vector&lt;EntityHandle&gt; sharing_handles(MAX_SHARING_PROCS, 0);</div>
<div class="line"><span class="lineno">   59</span>    <span class="keywordflow">if</span> (pstatus &amp; PSTATUS_MULTISHARED) {</div>
<div class="line"><span class="lineno">   60</span>      <span class="comment">// entity is multi shared</span></div>
<div class="line"><span class="lineno">   61</span>      <a class="code hl_define" href="definitions_8h.html#a793899f524a281eb88e3ff2b01ce6acb">CHK_MOAB_THROW</a>(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(</div>
<div class="line"><span class="lineno">   62</span>                         pcomm-&gt;sharedhs_tag(), &amp;ent, 1, &amp;sharing_handles[0]),</div>
<div class="line"><span class="lineno">   63</span>                     <span class="stringliteral">&quot;get shared handles&quot;</span>);</div>
<div class="line"><span class="lineno">   64</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pstatus &amp; PSTATUS_SHARED) {</div>
<div class="line"><span class="lineno">   65</span>      <span class="comment">// shared</span></div>
<div class="line"><span class="lineno">   66</span>      <a class="code hl_define" href="definitions_8h.html#a793899f524a281eb88e3ff2b01ce6acb">CHK_MOAB_THROW</a>(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a174e70b67f4f235d096d3c45d865645b">get_moab</a>().tag_get_data(pcomm-&gt;sharedh_tag(), &amp;ent,</div>
<div class="line"><span class="lineno">   67</span>                                                     1, &amp;sharing_handles[0]),</div>
<div class="line"><span class="lineno">   68</span>                     <span class="stringliteral">&quot;get sharing handle&quot;</span>);</div>
<div class="line"><span class="lineno">   69</span>    }</div>
<div class="line"><span class="lineno">   70</span>    <span class="keywordflow">return</span> sharing_handles;</div>
<div class="line"><span class="lineno">   71</span>  };</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>  <span class="comment">// make a buffer entities to send</span></div>
<div class="line"><span class="lineno">   74</span>  std::vector&lt;std::vector&lt;EntityHandle&gt;&gt; sbuffer(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">get_comm_size</a>());</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> ent : ents) {</div>
<div class="line"><span class="lineno">   77</span> </div>
<div class="line"><span class="lineno">   78</span>    <span class="keyword">auto</span> pstatus = get_pstatus(ent);</div>
<div class="line"><span class="lineno">   79</span>    <span class="keywordflow">if</span> (pstatus) {</div>
<div class="line"><span class="lineno">   80</span>      <span class="keyword">auto</span> sharing_procs = get_sharing_procs(ent, pstatus);</div>
<div class="line"><span class="lineno">   81</span>      <span class="keyword">auto</span> sharing_handles = get_sharing_handles(ent, pstatus);</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>      <span class="keywordflow">if</span> (verb &gt;= <a class="code hl_enumvalue" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2caa4fc5b9204f57a31e594e32c02d071e9">NOISY</a>) {</div>
<div class="line"><span class="lineno">   84</span>        <a class="code hl_define" href="group__mofem__log__manager.html#ga19fe81dc9081ceb92ced847e619ca654">MOFEM_LOG</a>(<span class="stringliteral">&quot;SYNC&quot;</span>, Sev::noisy) &lt;&lt; <span class="stringliteral">&quot;pstatus &quot;</span> &lt;&lt; std::bitset&lt;8&gt;(pstatus);</div>
<div class="line"><span class="lineno">   85</span>      }</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> proc = 0; proc &lt; MAX_SHARING_PROCS &amp;&amp; -1 != sharing_procs[proc];</div>
<div class="line"><span class="lineno">   88</span>           proc++) {</div>
<div class="line"><span class="lineno">   89</span>        <span class="keywordflow">if</span> (sharing_procs[proc] == -1)</div>
<div class="line"><span class="lineno">   90</span>          SETERRQ(PETSC_COMM_SELF, <a class="code hl_enumvalue" href="definitions_8h.html#a980bf270a5c3f2f984262f7e74786a2ea75f611e0673e99085edc1b5ac5343023">MOFEM_IMPOSSIBLE_CASE</a>,</div>
<div class="line"><span class="lineno">   91</span>                  <span class="stringliteral">&quot;sharing processor not set&quot;</span>);</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>        <span class="keywordflow">if</span> (sharing_procs[proc] == m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#af2224ce77b33637b5cfad66a275a2ffb">get_comm_rank</a>())</div>
<div class="line"><span class="lineno">   94</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>        <span class="keyword">const</span> <span class="keyword">auto</span> handle_on_sharing_proc = sharing_handles[proc];</div>
<div class="line"><span class="lineno">   97</span>        <span class="comment">// add entity to send, handle on the other side</span></div>
<div class="line"><span class="lineno">   98</span>        sbuffer[sharing_procs[proc]].push_back(handle_on_sharing_proc);</div>
<div class="line"><span class="lineno">   99</span>        <span class="keywordflow">if</span> (verb &gt;= <a class="code hl_enumvalue" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2caa4fc5b9204f57a31e594e32c02d071e9">NOISY</a>) {</div>
<div class="line"><span class="lineno">  100</span>          <a class="code hl_define" href="_log_manager_8hpp.html#aef9b5316ec6db54581633adf7c670011">MOFEM_LOG_C</a>(<span class="stringliteral">&quot;SYNC&quot;</span>, Sev::noisy, <span class="stringliteral">&quot;send %lu (%lu) to %d at %d\n&quot;</span>, ent,</div>
<div class="line"><span class="lineno">  101</span>                      handle_on_sharing_proc, sharing_procs[proc],</div>
<div class="line"><span class="lineno">  102</span>                      m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#af2224ce77b33637b5cfad66a275a2ffb">get_comm_rank</a>());</div>
<div class="line"><span class="lineno">  103</span>        }</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>        <span class="keywordflow">if</span> (!(pstatus &amp; PSTATUS_MULTISHARED))</div>
<div class="line"><span class="lineno">  106</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  107</span>      }</div>
<div class="line"><span class="lineno">  108</span>    }</div>
<div class="line"><span class="lineno">  109</span>  }</div>
<div class="line"><span class="lineno">  110</span>  <span class="keywordflow">if</span> (verb &gt;= <a class="code hl_enumvalue" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2caa4fc5b9204f57a31e594e32c02d071e9">NOISY</a>) {</div>
<div class="line"><span class="lineno">  111</span>    <a class="code hl_define" href="_log_manager_8hpp.html#a3b22f6000e678d07d69a2c790177a352">MOFEM_LOG_SEVERITY_SYNC</a>(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a9b2bc8c1b980f49d31a0b5f7fbe756f5">get_comm</a>(), Sev::noisy);</div>
<div class="line"><span class="lineno">  112</span>  }</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>  <span class="keywordtype">int</span> nsends = 0; <span class="comment">// number of messages to send</span></div>
<div class="line"><span class="lineno">  115</span>  std::vector&lt;int&gt; sbuffer_lengths(</div>
<div class="line"><span class="lineno">  116</span>      m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">get_comm_size</a>()); <span class="comment">// length of the message to proc</span></div>
<div class="line"><span class="lineno">  117</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> block_size =</div>
<div class="line"><span class="lineno">  118</span>      <span class="keyword">sizeof</span>(<a class="code hl_class" href="class_entity_handle.html">EntityHandle</a>) /</div>
<div class="line"><span class="lineno">  119</span>      <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>); <span class="comment">// FIXME check if that works on given architecture!</span></div>
<div class="line"><span class="lineno">  120</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> proc = 0; proc &lt; m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">get_comm_size</a>(); proc++) {</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>    <span class="keywordflow">if</span> (!sbuffer[proc].empty()) {</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>      sbuffer_lengths[proc] = sbuffer[proc].size() * block_size;</div>
<div class="line"><span class="lineno">  125</span>      nsends++;</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>      sbuffer_lengths[proc] = 0;</div>
<div class="line"><span class="lineno">  130</span>    }</div>
<div class="line"><span class="lineno">  131</span>  }</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>  <span class="comment">// Make sure it is a PETSc m_field.get_comm()</span></div>
<div class="line"><span class="lineno">  134</span>  MPI_Comm comm;</div>
<div class="line"><span class="lineno">  135</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscCommDuplicate(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a9b2bc8c1b980f49d31a0b5f7fbe756f5">get_comm</a>(), &amp;comm, NULL);</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>  std::vector&lt;MPI_Status&gt; status(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">get_comm_size</a>());</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>  <span class="comment">// Computes the number of messages a node expects to receive</span></div>
<div class="line"><span class="lineno">  140</span>  <span class="keywordtype">int</span> nrecvs; <span class="comment">// number of messages received</span></div>
<div class="line"><span class="lineno">  141</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscGatherNumberOfMessages(comm, NULL, &amp;sbuffer_lengths[0], &amp;nrecvs);</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>  <span class="comment">// Computes info about messages that a MPI-node will receive, including</span></div>
<div class="line"><span class="lineno">  144</span>  <span class="comment">// (from-id,length) pairs for each message.</span></div>
<div class="line"><span class="lineno">  145</span>  <span class="keywordtype">int</span> *onodes;   <span class="comment">// list of node-ids from which messages are expected</span></div>
<div class="line"><span class="lineno">  146</span>  <span class="keywordtype">int</span> *olengths; <span class="comment">// corresponding message lengths</span></div>
<div class="line"><span class="lineno">  147</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscGatherMessageLengths(comm, nsends, nrecvs, &amp;sbuffer_lengths[0],</div>
<div class="line"><span class="lineno">  148</span>                                   &amp;onodes, &amp;olengths);</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>  <span class="comment">// Gets a unique new tag from a PETSc communicator. All processors that share</span></div>
<div class="line"><span class="lineno">  151</span>  <span class="comment">// the communicator MUST call this routine EXACTLY the same number of times.</span></div>
<div class="line"><span class="lineno">  152</span>  <span class="comment">// This tag should only be used with the current objects communicator; do NOT</span></div>
<div class="line"><span class="lineno">  153</span>  <span class="comment">// use it with any other MPI communicator.</span></div>
<div class="line"><span class="lineno">  154</span>  <span class="keywordtype">int</span> tag;</div>
<div class="line"><span class="lineno">  155</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscCommGetNewTag(comm, &amp;tag);</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>  <span class="comment">// Allocate a buffer sufficient to hold messages of size specified in</span></div>
<div class="line"><span class="lineno">  158</span>  <span class="comment">// olengths. And post Irecvs on these buffers using node info from onodes</span></div>
<div class="line"><span class="lineno">  159</span>  <span class="keywordtype">int</span> **rbuf;           <span class="comment">// must bee freed by user</span></div>
<div class="line"><span class="lineno">  160</span>  MPI_Request *r_waits; <span class="comment">// must bee freed by user</span></div>
<div class="line"><span class="lineno">  161</span>  <span class="comment">// rbuf has a pointers to messages. It has size of of nrecvs (number of</span></div>
<div class="line"><span class="lineno">  162</span>  <span class="comment">// messages) +1. In the first index a block is allocated,</span></div>
<div class="line"><span class="lineno">  163</span>  <span class="comment">// such that rbuf[i] = rbuf[i-1]+olengths[i-1].</span></div>
<div class="line"><span class="lineno">  164</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscPostIrecvInt(comm, tag, nrecvs, onodes, olengths, &amp;rbuf,</div>
<div class="line"><span class="lineno">  165</span>                           &amp;r_waits);</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>  MPI_Request *s_waits; <span class="comment">// status of sens messages</span></div>
<div class="line"><span class="lineno">  168</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscMalloc1(nsends, &amp;s_waits);</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>  <span class="comment">// Send messages</span></div>
<div class="line"><span class="lineno">  171</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> proc = 0, kk = 0; proc &lt; m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a093526a60371b07213a0be2aaf7afa35">get_comm_size</a>(); proc++) {</div>
<div class="line"><span class="lineno">  172</span>    <span class="keywordflow">if</span> (!sbuffer_lengths[proc])</div>
<div class="line"><span class="lineno">  173</span>      <span class="keywordflow">continue</span>;                             <span class="comment">// no message to send to this proc</span></div>
<div class="line"><span class="lineno">  174</span>    <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> MPI_Isend(&amp;(sbuffer[proc])[0],   <span class="comment">// buffer to send</span></div>
<div class="line"><span class="lineno">  175</span>                     sbuffer_lengths[proc], <span class="comment">// message length</span></div>
<div class="line"><span class="lineno">  176</span>                     MPIU_INT, proc,        <span class="comment">// to proc</span></div>
<div class="line"><span class="lineno">  177</span>                     tag, comm, s_waits + kk);</div>
<div class="line"><span class="lineno">  178</span>    kk++;</div>
<div class="line"><span class="lineno">  179</span>  }</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>  <span class="comment">// Wait for received</span></div>
<div class="line"><span class="lineno">  182</span>  <span class="keywordflow">if</span> (nrecvs)</div>
<div class="line"><span class="lineno">  183</span>    <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> MPI_Waitall(nrecvs, r_waits, &amp;status[0]);</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>  <span class="comment">// Wait for send messages</span></div>
<div class="line"><span class="lineno">  186</span>  <span class="keywordflow">if</span> (nsends)</div>
<div class="line"><span class="lineno">  187</span>    <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> MPI_Waitall(nsends, s_waits, &amp;status[0]);</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>  <span class="keywordflow">if</span> (verb &gt;= <a class="code hl_enumvalue" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2cace3e26676763569084c86b8c3b67d601">VERBOSE</a>) {</div>
<div class="line"><span class="lineno">  190</span>    <a class="code hl_define" href="_log_manager_8hpp.html#aef9b5316ec6db54581633adf7c670011">MOFEM_LOG_C</a>(<span class="stringliteral">&quot;SYNC&quot;</span>, Sev::verbose, <span class="stringliteral">&quot;Rank %d nb. before ents %u\n&quot;</span>,</div>
<div class="line"><span class="lineno">  191</span>                m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#af2224ce77b33637b5cfad66a275a2ffb">get_comm_rank</a>(), ents.size());</div>
<div class="line"><span class="lineno">  192</span>    <a class="code hl_define" href="_log_manager_8hpp.html#a3b22f6000e678d07d69a2c790177a352">MOFEM_LOG_SEVERITY_SYNC</a>(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a9b2bc8c1b980f49d31a0b5f7fbe756f5">get_comm</a>(), Sev::verbose);</div>
<div class="line"><span class="lineno">  193</span>  }</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>  <span class="comment">// synchronise range</span></div>
<div class="line"><span class="lineno">  196</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> kk = 0; kk &lt; nrecvs; kk++) {</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>    <span class="keywordtype">int</span> len = olengths[kk];</div>
<div class="line"><span class="lineno">  199</span>    <span class="keywordtype">int</span> *data_from_proc = rbuf[kk];</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ee = 0; ee &lt; len;) {</div>
<div class="line"><span class="lineno">  202</span>      <a class="code hl_class" href="class_entity_handle.html">EntityHandle</a> ent;</div>
<div class="line"><span class="lineno">  203</span>      bcopy(&amp;data_from_proc[ee], &amp;ent, <span class="keyword">sizeof</span>(<a class="code hl_class" href="class_entity_handle.html">EntityHandle</a>));</div>
<div class="line"><span class="lineno">  204</span>      ents.insert(ent);</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>      <span class="keywordflow">if</span> (received_ents) {</div>
<div class="line"><span class="lineno">  207</span>        (*received_ents)[onodes[kk]].insert(ent);</div>
<div class="line"><span class="lineno">  208</span>      }</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>      ee += block_size;</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>      <span class="keywordflow">if</span> (verb &gt;= <a class="code hl_enumvalue" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2cace3e26676763569084c86b8c3b67d601">VERBOSE</a>) {</div>
<div class="line"><span class="lineno">  213</span>        <a class="code hl_define" href="_log_manager_8hpp.html#aef9b5316ec6db54581633adf7c670011">MOFEM_LOG_C</a>(<span class="stringliteral">&quot;SYNC&quot;</span>, Sev::noisy, <span class="stringliteral">&quot;received %lu from %d at %d\n&quot;</span>, ent,</div>
<div class="line"><span class="lineno">  214</span>                    onodes[kk], m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#af2224ce77b33637b5cfad66a275a2ffb">get_comm_rank</a>());</div>
<div class="line"><span class="lineno">  215</span>      }</div>
<div class="line"><span class="lineno">  216</span>    }</div>
<div class="line"><span class="lineno">  217</span>  }</div>
<div class="line"><span class="lineno">  218</span>  <span class="keywordflow">if</span> (verb &gt;= <a class="code hl_enumvalue" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2cace3e26676763569084c86b8c3b67d601">VERBOSE</a>) {</div>
<div class="line"><span class="lineno">  219</span>    <a class="code hl_define" href="_log_manager_8hpp.html#a3b22f6000e678d07d69a2c790177a352">MOFEM_LOG_SEVERITY_SYNC</a>(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a9b2bc8c1b980f49d31a0b5f7fbe756f5">get_comm</a>(), Sev::verbose);</div>
<div class="line"><span class="lineno">  220</span>  }</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>  <span class="keywordflow">if</span> (verb &gt;= <a class="code hl_enumvalue" href="definitions_8h.html#a018e38d630e7ebef4cfa48ab69889f2cace3e26676763569084c86b8c3b67d601">VERBOSE</a>) {</div>
<div class="line"><span class="lineno">  223</span>    <a class="code hl_define" href="_log_manager_8hpp.html#aef9b5316ec6db54581633adf7c670011">MOFEM_LOG_C</a>(<span class="stringliteral">&quot;SYNC&quot;</span>, Sev::verbose, <span class="stringliteral">&quot;Rank %d nb. after ents %u&quot;</span>,</div>
<div class="line"><span class="lineno">  224</span>                m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#af2224ce77b33637b5cfad66a275a2ffb">get_comm_rank</a>(), ents.size());</div>
<div class="line"><span class="lineno">  225</span>    <a class="code hl_define" href="_log_manager_8hpp.html#a3b22f6000e678d07d69a2c790177a352">MOFEM_LOG_SEVERITY_SYNC</a>(m_field.<a class="code hl_function" href="struct_mo_f_e_m_1_1_core_interface.html#a9b2bc8c1b980f49d31a0b5f7fbe756f5">get_comm</a>(), Sev::verbose);</div>
<div class="line"><span class="lineno">  226</span>  }</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>  <span class="comment">// Cleaning</span></div>
<div class="line"><span class="lineno">  229</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscFree(s_waits);</div>
<div class="line"><span class="lineno">  230</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscFree(rbuf[0]);</div>
<div class="line"><span class="lineno">  231</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscFree(rbuf);</div>
<div class="line"><span class="lineno">  232</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscFree(r_waits);</div>
<div class="line"><span class="lineno">  233</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscFree(onodes);</div>
<div class="line"><span class="lineno">  234</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscFree(olengths);</div>
<div class="line"><span class="lineno">  235</span>  <a class="code hl_define" href="definitions_8h.html#add80e5ef5f847b2d4b637029f0f671c3">CHKERR</a> PetscCommDestroy(&amp;comm);</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>  <a class="code hl_define" href="definitions_8h.html#acb0a46d159695a01bf667313b7788b45">MoFEMFunctionReturn</a>(0);</div>
<div class="line"><span class="lineno">  238</span>}</div>
<div class="ttc" id="a_log_manager_8hpp_html_a3b22f6000e678d07d69a2c790177a352"><div class="ttname"><a href="_log_manager_8hpp.html#a3b22f6000e678d07d69a2c790177a352">MOFEM_LOG_SEVERITY_SYNC</a></div><div class="ttdeci">#define MOFEM_LOG_SEVERITY_SYNC(comm, severity)</div><div class="ttdoc">Synchronise &quot;SYNC&quot; on curtain severity level.</div><div class="ttdef"><b>Definition:</b> <a href="_log_manager_8hpp_source.html#l00352">LogManager.hpp:352</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab531417c6ed05f8aadbdc455817c4499" name="ab531417c6ed05f8aadbdc455817c4499"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab531417c6ed05f8aadbdc455817c4499">&#9670;&#160;</a></span>cOre</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_mo_f_e_m.html#a8bdfc7559ccb2b6d0021580b5c8a340b">MoFEM::Core</a>&amp; MoFEM::CommInterface::cOre</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_comm_interface_8hpp_source.html#l00026">26</a> of file <a class="el" href="_comm_interface_8hpp_source.html">CommInterface.hpp</a>.</p>

</div>
</div>
<a id="aa346af0e9a56fe3216e16e4cdec8a83e" name="aa346af0e9a56fe3216e16e4cdec8a83e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa346af0e9a56fe3216e16e4cdec8a83e">&#9670;&#160;</a></span>dEbug</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> MoFEM::CommInterface::dEbug</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_comm_interface_8hpp_source.html#l00027">27</a> of file <a class="el" href="_comm_interface_8hpp_source.html">CommInterface.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li>src/interfaces/<a class="el" href="_comm_interface_8hpp_source.html">CommInterface.hpp</a></li>
<li>src/interfaces/impl/<a class="el" href="_comm_interface_8cpp_source.html">CommInterface.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr cla ss="footer" />
<style>
  img[src="UoGLogo.png"] {
    height: 20px;
    padding-top: 0px;
    padding-right: 1px;
    padding-bottom: 3px;
    padding-left: 6px;
  }
</style>
<address class="footer">
  <small>
    Generated by
    <a href="http://www.doxygen.org/index.html"> Doxygen </a> 1.9.5
    and hosted at
    <a href="http://www.gla.ac.uk/schools/engineering/">
      <img class="footer" src="UoGLogo.png" alt="University of Glasgow" />
    </a>
  </small>
</address>
</body>
</html>
