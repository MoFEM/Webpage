<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=9"/>
  <meta name="generator" content="Doxygen 1.9.8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>MoFEM: Installation with Docker - JupyterHub</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
  <script>
    window.MathJax = {
      tex: {
        tags: 'all', // Enables equation numbering
      },
      loader: {
        load: ['[tex]/boldsymbol']
      }
    };
  </script>
  <script type="text/javascript " src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
  <link href="customdoxygen.css" rel="stylesheet" type="text/css" />
  <link href="extra_style.css" rel="stylesheet" type="text/css"/>
  <link rel="apple-touch-icon" sizes="57x57" href="apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="shortcut icon" type="image/png" href="favicon-32x32.png"/>
  <link rel="Bookmark" type="image/png" href="favicon-32x32.png"/>
  <link rel="manifest" href="manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div style="background-color:#011A40" id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 30px;">
  <td id="projectlogo"><img alt="Logo" src="MoFEMLogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <td style="padding-left: 0.5em;" bgcolor="#011A40"
   <div id="projectbrief"><font color="#FFFFFF">v0.15.0</font></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!--Google analytics tags-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-65236130-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2J9RE2P3H5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-2J9RE2P3H5');
</script><!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Installation with Docker - JupyterHub</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#docker_getting_container">How to get and run the container</a><ul><li class="level2"><a href="#autotoc_md97">Using Docker user interface</a></li>
<li class="level2"><a href="#docker_terminal_installation">Using terminal</a><ul><li class="level3"><a href="#autotoc_md98">ARM architecture case on Mac</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#docker_access_hub">Accessing and running MoFEM tutorials with JupyterHub</a><ul><li class="level2"><a href="#docker_password_login">Password and login</a></li>
<li class="level2"><a href="#autotoc_md99">Start running</a><ul><li class="level3"><a href="#autotoc_md100">Being a good citizen</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md101">Development and debugging setup</a><ul><li class="level2"><a href="#ssh_paaswd">Password for SSH connection to the container</a></li>
<li class="level2"><a href="#autotoc_md102">Start installation</a></li>
<li class="level2"><a href="#autotoc_md103">Connecting to the container</a></li>
<li class="level2"><a href="#autotoc_md104">VS Code debugging setup</a></li>
<li class="level2"><a href="#autotoc_md105">Run and debug</a></li>
<li class="level2"><a href="#autotoc_md106">Running jupyter notebooks with the amended code</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>Docker is an open platform that allows for the distribution and deployment of applications across different systems. In the context of MoFEM it allows for the distribution of pre-compiled libraries for the Docker platform that can then run on any system. The Docker platform works by using the functionality provided by the Linux kernel to provide lightweight containers and thereby avoiding the need to run costly virtual machines. It’s through the use of containers that MoFEM is compiled and run.</p>
<p>This installation is suitable for Linux, macOS and some versions of Windows. In macOS, a lightweight Linux distribution is virtualized to run the Docker containers in.</p>
<h1><a class="anchor" id="docker_install"></a>
Download and Install Docker</h1>
<p>You can download and install Docker following instructions on the <a href="https://docs.docker.com/installation/#installation">Docker installation webpage</a>. </p><blockquote class="doxtable">
<p>&zwj;If you are using Windows you might have to set up some additional settings. For that you can follow <a href="https://youtu.be/GmNNn6xiTy8">video with instructions</a> or <a href="https://docs.docker.com/desktop/install/windows-install/">instructions on docker website</a> and come back to this page once Docker is running. </p>
</blockquote>
<h1><a class="anchor" id="docker_getting_container"></a>
How to get and run the container</h1>
<blockquote class="doxtable">
<p>&zwj;These instructions are for installing specific versions of MoFEM containers. To have a more advanced installation for developers see Installation with Docker - advanced. </p>
</blockquote>
<p>The containers available at the moment are:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Image   </th><th class="markdownTableHeadNone">Tag    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Workshop2023   </td><td class="markdownTableBodyNone">likask/mofem-spack-jupyterhub   </td><td class="markdownTableBodyNone">Workshop2023    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Development   </td><td class="markdownTableBodyNone">likask/mofem-spack-build   </td><td class="markdownTableBodyNone">latest   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md97"></a>
Using Docker user interface</h2>
<p>This section describes how to set up and run the Docker container within the Docker user interface. For doing this in terminal, go to the <a class="el" href="install_docker_jupyterhub.html#docker_terminal_installation">next section</a>.</p>
<p>After opening Docker you should be able to see and follow similar options to the ones shown in the screenshots below, depending on the operating system and version of Docker you have.</p>
<p><img src="docker_intro.png" alt="Docker - introductory screen" width="100%" class="inline"/> <a class="anchor" id="figure_1"></a> </p><center><b>Figure 1. Docker startup screen.</b></center><p>At the top you can see a search bar and if you are connected to Internet you can search for the container you want to run. Start typing <code>likask/mofem-spack-jupyterhub</code> and you should be able to see Workshop2023 option in the tag dropdown menu next to the Image. The steps are the same for the other containers listed above, using the relevant Image and tag names.</p>
<p><img src="docker_search.png" alt="Docker - searching for the required Docker image and Tag" width="100%" class="inline"/> <a class="anchor" id="figure_2"></a> </p><center><b>Figure 2. Docker search for the relevant Image and tag.</b></center><p>Press <code>Run</code> to pull and run the container at the same time. A popup window should appear once the image is downloaded, as in Figure 3. The download time varies with the size of the container and internet speed and may take some time. </p><blockquote class="doxtable">
<p>&zwj;If the popup window doesn't appear, navigate to <code>Images</code> in the left menu and initialise the container by pressing triangle by the relevant image. </p>
</blockquote>
<p>Expand <span style="color:red"> <code>Optional settings</code></span> and fill the fields as shown in Figure 3. These settings set the ports for ssh and browser to connect to the JupyterHub container.</p>
<p><img src="docker_container_run_settings.png" alt="Docker - container run settings for ports: 2222:22 and 8000:8000" width="100%" class="inline"/> <a class="anchor" id="figure_3"></a> </p><center><b>Figure 3. Docker container run settings - select Optional settings and fill in as above.</b></center><p>After filling in the fields as above, press <code>Run</code>. The installed container can be found in the <code>Containers</code> section in the menu on the left. To open the container in your browser click on the second option in the <code>Port(s)</code> column of the required container or go to <a href="http://localhost:8000">http://localhost:8000</a>.</p>
<p><img src="docker_container_run.png" alt="Docker - containers stopping and running" width="100%" class="inline"/> <a class="anchor" id="figure_4"></a> </p><center><b>Figure 4. Stopping and starting a docker container.</b></center><p>If you want to stop the container, you can do so from the <code>Actions</code> column on the right. Click on square to stop, and triangle to start it again.</p>
<h2><a class="anchor" id="docker_terminal_installation"></a>
Using terminal</h2>
<blockquote class="doxtable">
<p>&zwj;If you used the Docker user interface for this installation, you can skip this section and continue to <a class="el" href="install_docker_jupyterhub.html#docker_access_hub">Accessing the hub section</a> to find login options and how to run notebooks. </p>
</blockquote>
<p>For the installation using terminal, initialise Docker, open your terminal and run the following command.</p>
<p>1) Pull image </p><div class="fragment"><div class="line">docker pull likask/mofem-spack-jupyterhub:Workshop2023</div>
</div><!-- fragment --><p> If you want to use a different image from the list of available ones, replace <code>likask/mofem-spack-jupyterhub:Workshop2023</code> by <code>image_name:tag_name</code> taken from <a class="el" href="install_docker_jupyterhub.html#docker_getting_container">table listing images and tags</a>.</p>
<p>2) Run container</p><ul>
<li>If you would like to just try the container, removing the container after use, run docker as follows: <div class="fragment"><div class="line">docker run --rm --name workshop2023 -p 8000:8000 -p 2222:22 likask/mofem-spack-jupyterhub:Workshop2023</div>
</div><!-- fragment --></li>
<li>If you would like to switch it on for some time, we recommend running it as a daemon: <div class="fragment"><div class="line">docker run -d --name workshop2023 -p 8000:8000 -p 2222:22 likask/mofem-spack-jupyterhub:Workshop2023</div>
</div><!-- fragment --> Once installed, you do not have to reinstall the container if it was stopped. Instead, start it again by: <div class="fragment"><div class="line">docker start workshop2023</div>
</div><!-- fragment --></li>
</ul>
<p>Similarly to viewing installed containers in user interface, you can view them in terminal, by running: </p><div class="fragment"><div class="line">docker container ls -a</div>
</div><!-- fragment --><ul>
<li>the output will let you know container names, which containers are available or running, and should look as follows: <div class="fragment"><div class="line">CONTAINER ID   IMAGE                                        COMMAND                  CREATED       STATUS         PORTS                                                    NAMES</div>
<div class="line">0336cc3b5648   likask/mofem-spack-jupyterhub:Workshop2023   &quot;/bin/bash -c &#39;servi…&quot;   12 days ago   Up 2 seconds   0.0.0.0:8000-&gt;8000/tcp, 8888/tcp, 0.0.0.0:2222-&gt;22/tcp   workshop2023</div>
</div><!-- fragment --></li>
</ul>
<h3><a class="anchor" id="autotoc_md98"></a>
ARM architecture case on Mac</h3>
<p>If you have a Mac with an ARM chip, you have to switch platforms when you run docker: </p><div class="fragment"><div class="line">docker run -d --platform linux/amd64 --name workshop2023 -p 8000:8000 -p 2222:22 likask/mofem-spack-jupyterhub:Workshop2023</div>
</div><!-- fragment --><p> That results in a suboptimal performance, however, it is a workable solution.</p>
<blockquote class="doxtable">
<p>&zwj;The base system of our images is Ubuntu 20.04. To compile code for <em>ARM</em> architecture, we would have to upgrade the system to Ubuntu 22.04, and then it would be possible to compile MoFEM ecosystem for Apple Silicon. That is tested and works. However, additionally, you would have to compile Gmsh from scratch. Python pip installation for Gmsh on <em>ARM</em> architectures is not currently available. If you know how to do it, we will welcome PR from you to fix this problem. </p>
</blockquote>
<h1><a class="anchor" id="docker_access_hub"></a>
Accessing and running MoFEM tutorials with JupyterHub</h1>
<h2><a class="anchor" id="docker_password_login"></a>
Password and login</h2>
<p>If you run a container locally, open <a href="http://localhost:8000">http://localhost:8000</a> in your browser. Otherwise, substitute <code>localhost</code> by the name of your server. You should see a login page which looks as follows:</p>
<p><img src="jupyterhub_landing_page.png" alt="JupyterHub - landing page" width="100%" class="inline"/> <a class="anchor" id="figure_5"></a> </p><center><b>Figure 5. Landing page of MoFEM in JupyterHub.</b></center><ul>
<li>The default login name is <em>mofem</em></li>
<li>On the first login, the password you input will be your password from then onwards. Note this is the password to JupyterHub, not a password to the Linux environment.</li>
</ul>
<blockquote class="doxtable">
<p>&zwj;If you login as <code>mofem</code> user, you will have admin right in the JupyterHub, and you can add more users there by going to <code>Control Panel -&gt; Admin -&gt; Add Users</code> </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md99"></a>
Start running</h2>
<ul>
<li><b>Important</b>. Before you start, open <em><a class="el" href="install_8md.html">install.md</a></em> notebook and run the only cell there. It will copy symbolic links to the executable binaries of MoFEM installation to your directory. Ignore any warnings there.</li>
<li>Navigate to any of the Jupyter notebooks within the folders in your home directory and more instructions should be included inside.</li>
</ul>
<h3><a class="anchor" id="autotoc_md100"></a>
Being a good citizen</h3>
<p>This is a case when the container is running on a server, and you share resources with other users.</p>
<ul>
<li>If you run something with multiple processes, which will run longer than 5-10 minutes, be nice, i.e. run the command as follows <div class="fragment"><div class="line">nice -n 10 mpirun -np 2 ./command_line</div>
</div><!-- fragment --></li>
</ul>
<p>You can also watch the step-by-step instructions for running container with MoFEM and JupyterHub using Docker user interface in the following video: </p><center> <a href="https://youtu.be/_qo4EqfjGc4"><img src="https://img.youtube.com/vi/xL3J8VHig68/hqdefault.jpg" alt="Watch the video" class="inline"/></a> </center><p><br  />
 </p>
<h1><a class="anchor" id="autotoc_md101"></a>
Development and debugging setup</h1>
<blockquote class="doxtable">
<p>&zwj;If you wish to develop and debug in MoFEM using the just created container, read this section. Otherwise, you are done, and you can ignore the following instructions </p>
</blockquote>
<p>Remember to have your docker container running when executing these instructions. If you have stopped the container, restart it with the triangle button of the relevant container, see Figure 4.</p>
<h2><a class="anchor" id="ssh_paaswd"></a>
Password for SSH connection to the container</h2>
<p>First of all, set up your SSH password. This is different from the one you use to access JupyterHub in the browser. To set it, run the following command from a terminal (in case you are using Docker user interface, you can open terminal by clicking on the three vertical dots in the Actions column, see Figure 4):</p>
<div class="fragment"><div class="line">docker exec -it workshop2023 /bin/bash</div>
</div><!-- fragment --><p> where <span style="color:green"><code>workshop2023</code></span> is the name of your container set in <code>Optional settings</code> and can be found in the <code>Name</code> column of the Containers section. To change the password for user <code>mofem</code> run: </p><div class="fragment"><div class="line">passwd mofem</div>
</div><!-- fragment --><p> and afterwards choose a new password.</p>
<h2><a class="anchor" id="autotoc_md102"></a>
Start installation</h2>
<p>In your browser (<a href="http://localhost:8000">http://localhost:8000</a>), login to the JupyterHub and open <code>install_from_source_debug</code> notebook and run all of the cells in it. This will checkout the source code of MoFEM core and basic user modules including tutorials, and compile user modules. New folders will appear in your starting directory:</p>
<ul>
<li><code>mofem_install</code> - contains source code</li>
<li><code>um_view_debug</code> - symbolic links to the executable binaries of the debugging version</li>
</ul>
<p>We advise you to wait until all of the cells have been run since some of the next steps refer to directories which are newly created by running this notebook.</p>
<h2><a class="anchor" id="autotoc_md103"></a>
Connecting to the container</h2>
<p>We will only cover the process with using <a href="https://code.visualstudio.com">Visual Studio Code</a>. Start by making sure you have it installed. Figure 6 shows locations of the next steps.</p>
<p><span style="color:magenta"> a) </span> Go to <code>Extensions</code> within VS Code and install <code>Remote - SSH</code> extension. This will allow you to connect to servers or containers like the one we created.</p>
<p><span style="color:turquoise"> b) </span> Open <code>Remote Explorer</code> extension</p>
<p><img src="docker_ssh_container.png" alt="Docker - VS Code steps for SSH connection" width="100%" class="inline"/> <a class="anchor" id="figure_6"></a> </p><center><b>Figure 6. Setting up SSH connection in VS Code to the container for debugging. Follow the written instructions for <span style="color:magenta"> a)</span>, <span style="color:turquoise"> b)</span>, <span style="color:lime"> c)</span>, <span style="color:orange"> d)</span> and <span style="color:blue"> e)</span>. </b></center><p><span style="color:lime"> c) </span> Press on the gear button highlighted as <span style="color:lime"> c)</span> (you might need to hover over), open your <code>.ssh/config</code> file and copy there the following lines: </p><div class="fragment"><div class="line">Host workshop2023</div>
<div class="line">  HostName localhost</div>
<div class="line">  ForwardX11 yes</div>
<div class="line">  Compression yes</div>
<div class="line">  User mofem</div>
<div class="line">  Port 2222</div>
</div><!-- fragment --><p> Here, we can see the port forwarding number 2222 we set up for our container earlier.</p>
<p><span style="color:orange"> d) </span> Refresh SSH connections (you might need to hover over) to see the option to connect via SSH to the container in the <code>Remote Explorer</code> extension in VS Code.</p>
<p><span style="color:blue"> e) </span> Connect to the container in VS Code (use the <a class="el" href="install_docker_jupyterhub.html#ssh_paaswd">SSH password</a> you set previously) and you should see the same folders and files as you do when you open it through a web browser (<a href="http://localhost:8000">http://localhost:8000</a>).</p>
<blockquote class="doxtable">
<p>&zwj;If you are asked about the environment by VS Code during these steps, select <code>Linux</code>. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md104"></a>
VS Code debugging setup</h2>
<p>To set up debugging, follow these steps:</p>
<ul>
<li>open <code>~/mofem_install/mofem-cephas/mofem/users_modules</code> folder through <code>File -&gt; Open Folder...</code></li>
<li>go to <code>Extensions</code> within VS Code, see Figure 6 <span style="color:magenta"> a) </span> , and install <code>C/C++</code> and <code>C/C++ Extension Pack</code> extensions</li>
<li>create <code>.vscode</code> folder, download files <a href="scripts/launch.json" title="launch.json">launch.json</a> &amp; <a href="scripts/tasks.json" title="tasks.json">tasks.json</a> and place them into the <code>.vscode</code> folder, see Figure 7</li>
<li>replace the hash <code>5sehreo</code> with the hash in your folder, see <span style="color:orange"> <code>HASH</code></span> in Figure 7</li>
<li>adjust the files to fit your purpose as described below Figure 7</li>
</ul>
<p><img src="docker_ssh_vscode.png" alt="Docker - VS Code debugging setup" width="100%" class="inline"/> <a class="anchor" id="figure_7"></a> </p><center><b>Figure 7. Setting up debugging. </b></center><p>In <a href="scripts/launch.json" title="launch.json">launch.json</a>, <code>/mofem_install/jupyter/mofem/mofem_install/mofem-cephas/mofem/users_modules/um-build-Debug-5sehreo/tutorials/vec-2/</code> is the folder where the executable is located and you can change it to what you want to debug. <code>nonlinear_elastic</code> is the executable name. We suggest copying and then searching for these terms to change them in all of the locations. Lastly, check which mesh (required by the flag <code>-file_name</code>) is located at the current working directory.</p>
<p><a href="scripts/tasks.json" title="tasks.json">tasks.json</a> file defines which folder should be rebuild before running your code with debugging.</p>
<h2><a class="anchor" id="autotoc_md105"></a>
Run and debug</h2>
<p>For this section refer to Figure 8.</p>
<ul>
<li>Go to the source directory, and open a cpp file with the same name as the executable you want to debug and place a <span style="color:red"> breakpoint </span> next to one of the lines inside one of the functions.<ul>
<li>it needs to be the cpp file with the same name as the executable file you used in <a href="scripts/launch.json" title="launch.json">launch.json</a></li>
</ul>
</li>
<li>Open <span style="color:magenta"> Run and Debug section </span></li>
<li>Press <span style="color:lime"> Run and Debug </span> button to start debugging</li>
</ul>
<p><img src="docker_ssh_debug.png" alt="Docker - VS Code debugging setup" width="100%" class="inline"/> <a class="anchor" id="figure_8"></a> </p><center><b>Figure 8. Debugging in VS code. </b></center><p>This should trigger recompilation of the folder defined in <a href="scripts/tasks.json" title="tasks.json">tasks.json</a>, start the analysis, and eventually stop at the breakpoint if everything was set correctly. You can use <span style="color:turquoise"> controls </span> to navigate the debugging session. For more information see VS Code instructions for debugging.</p>
<p>The same procedure can be applied for any other users you create and everyone can debug separately.</p>
<p>You can also watch the step-by-step instructions for setting up <a class="el" href="namespaceMoFEM.html" title="implementation of Data Operators for Forces and Sources">MoFEM</a> debugging within Docker container using VScode in the following video: </p><center> <a href="https://youtu.be/pG_-VEplBOQ"><img src="https://img.youtube.com/vi/xL3J8VHig68/hqdefault.jpg" alt="Watch the video" class="inline"/></a> </center><h2><a class="anchor" id="autotoc_md106"></a>
Running jupyter notebooks with the amended code</h2>
<p>To run the example notebooks with the code which was amended during debugging, new compilation will be needed. The existing symbolic links in your home directory in JupyterHub are:</p>
<ul>
<li><em>um_view</em> - symbolic links to the executable binaries of the release version common to all users (does not depend on the <code>mofem_install</code> source directory in your folder)</li>
<li><em>um_view_debug</em> - symbolic links to the executable binaries of the debugging version</li>
</ul>
<p>For running larger problems, like the ones in some of the example notebooks, using a release version is advised as it is much faster. <em>um_view</em> is a release version but not of the code which you might have amended during the debugging part of these instructions. To compile this code with a release version run the <em><a class="el" href="install__from__source__release_8md.html">install_from_source_release.md</a></em> notebook, located in your home folder. This will compile a new release version and create <em>um_view_release</em> folder in your home folder:</p>
<ul>
<li><em>um_view_release</em> - a new folder with symbolic links to the executable binaries of the amended release version</li>
</ul>
<p>To run the notebooks provided with the amended version of the code, replace <em>um_view</em> in the path definitions in the notebooks you want to run with <em>um_view_release</em>.</p>
<p>If you change the code again, do not rerun the <em><a class="el" href="install__from__source__release_8md.html">install_from_source_release.md</a></em> notebook. Instead, run just the last cell in <em><a class="el" href="install__from__source__release_8md.html">install_from_source_release.md</a></em> or run the following command in the integrated terminal when connected to the container in VS Code:</p>
<div class="fragment"><div class="line">cd ~/mofem_install/mofem-cephas/mofem/users_modules/um-build-Release-* &amp;&amp; make -j4 install</div>
</div><!-- fragment --><p>For developer, you may wish to have a look at these two tutorials for compiling the code and adding new modules in <a class="el" href="namespaceMoFEM.html" title="implementation of Data Operators for Forces and Sources">MoFEM</a>:</p>
<ul>
<li><a class="el" href="installation_with_script.html#how_to_compile_program">How to Compile a Program</a></li>
<li><a class="el" href="installation_with_script.html#how_to_add_new_module_and_program">How to Add a New Module and Program</a></li>
</ul>
<p>Any problems with this installation, please contact us by <a href="https://groups.google.com/forum/#!forum/mofem-group">mofem-group@googlegroups.com</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr cla ss="footer" />
<style>
  img[src="UoGLogo.png"] {
    height: 20px;
    padding-top: 0px;
    padding-right: 1px;
    padding-bottom: 3px;
    padding-left: 6px;
  }
</style>
<address class="footer">
  <small>
    Generated by
    <a href="http://www.doxygen.org/index.html"> Doxygen </a> 1.9.8
    and hosted at
    <a href="http://www.gla.ac.uk/schools/engineering/">
      <img class="footer" src="UoGLogo.png" alt="University of Glasgow" />
    </a>
  </small>
</address>
</body>
</html>