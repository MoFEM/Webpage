<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=9"/>
  <meta name="generator" content="Doxygen 1.9.5"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>MoFEM: Using Salome</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
  <script type="text/javascript " src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML "></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        extensions: ["AMSmath.js"],
        TeX: { equationNumbers: { autoNumber: ["all"],
                                  useLabelIds: true
        } 
        }
    });
    </script>
  <link href="customdoxygen.css" rel="stylesheet" type="text/css" />
  <link href="extra_style.css" rel="stylesheet" type="text/css"/>
  <link rel="apple-touch-icon" sizes="57x57" href="apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="shortcut icon" type="image/png" href="favicon-32x32.png"/>
  <link rel="Bookmark" type="image/png" href="favicon-32x32.png"/>
  <link rel="manifest" href="manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div style="background-color:#011A40" id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 30px;">
  <td id="projectlogo"><img alt="Logo" src="MoFEMLogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <td style="padding-left: 0.5em;" bgcolor="#011A40"
   <div id="projectbrief"><font color="#FFFFFF">v0.14.0</font></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!--Google analytics tags-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-65236130-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2J9RE2P3H5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-2J9RE2P3H5');
</script><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="runningprograms.html">Programs</a></li>  </ul>
</div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Using Salome </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#using_Salome_tut_geometry">Geometry</a></li>
<li class="level1"><a href="#mesh">Mesh</a><ul><li class="level2"><a href="#mesh_groups">Mesh groups</a></li>
<li class="level2"><a href="#export_mesh">Export mesh</a></li>
</ul>
</li>
<li class="level1"><a href="#using_Salome_tut_solution">Solution</a></li>
</ul>
</div>
<div class="textblock"><p >In this tutorial, the use of <a href="https://www.salome-platform.org">Salome</a> is explained as a pre-processor for <a class="el" href="namespace_mo_f_e_m.html" title="implementation of Data Operators for Forces and Sources">MoFEM</a> analysis. The version of the Salome used for this tutorial is a part of <a href="https://www.code-aster.org/spip.php?article303">Salome-Meca</a> 4.0.6 programme. A step-by-step procedure is given here to solve a linear-elastic cantilever beam problem subjected to uniform pressure shown below.</p>
<div class="image">
<img src="Diag_Ela.JPG" alt="" width="500px"/>
<div class="caption">
Figure 1: Einear-elastic cantilever beam subjected to uniform pressure.</div></div>
<h1><a class="anchor" id="using_Salome_tut_geometry"></a>
Geometry</h1>
<p >First of all, after openeing change the working environment to "Geometry". This can be done by navigating the drop-down menu shown in a green circle in <a class="el" href="using_salome_tut_elasticity.html#figure_salome_fig2">Figure 2</a>. This will prompt opening of an existing project or creationg a new one.</p>
<p ><a class="anchor" id="figure_salome_fig2"></a></p><div class="image">
<img src="SM_Beginning.png" alt="" width="500px"/>
<div class="caption">
Figure 2: Navigating the working environments in Salome-Meca.</div></div>
<p >To create a simpe beam with a square cross section, a box function is sufficient. Navigation using tabs is as follows:</p>
<p >New Entity -&gt; Primitives -&gt; Box</p>
<p ><a class="anchor" id="figure_salome_fig3"></a></p><div class="image">
<img src="Sal_ela_box.png" alt="" width="300px"/>
<div class="caption">
Figure 3: Box creation dialog and diameters.</div></div>
<p >After applying the changes, the box should now appear in the viewer. To create selectable surfaces, explode the box as follows:</p>
<p >New Entity -&gt; Explode (choose Face option and apply)</p>
<p >To ease the creation of mesh groups later, rename the body faces with recognisable names. Parts can be selected by clicking on them in the viewer (if they are set visible in the object browser). This highlights the selected object in the object browser and there it can be renamed via right click of the mouse.</p>
<h1><a class="anchor" id="mesh"></a>
Mesh</h1>
<p >Once the required modelling is present in the geometry section, change the workspace to Mesh with the same dropdown menu shown in <a class="el" href="using_salome_tut_elasticity.html#figure_salome_fig2">Figure 2</a>. The viewer is empty as there is no mesh yet created but the box should still be in the in the Object Browser. Select the box and mesh it by:</p>
<p >Mesh -&gt; Create Mesh</p>
<p ><a class="anchor" id="figure_salome_fig4"></a></p><div class="image">
<img src="SM_mesh_settings.png" alt="" width="300px"/>
<div class="caption">
Figure 4: Mesh settings.</div></div>
<p >The way and how fine the object is meshed is chosen in the hypotheses highlited in <a class="el" href="using_salome_tut_elasticity.html#figure_salome_fig4">Figure 4</a>. In this example 3D tetraheadral mesh is chosen with 0.3 as the maximum length of an edge of any element. With the settings set, compute the mesh by:</p>
<p >Mesh -&gt; Compute</p>
<p >The mesh should now be visible in the viewer.</p>
<h2><a class="anchor" id="mesh_groups"></a>
Mesh groups</h2>
<p >The mesh groups can be created based on parts which are already present in the geometry section.</p>
<p >Mesh -&gt; Create Group</p>
<p >In the group type select "Group on geometry". An example group setting is shown in Figure 5 bellow.</p>
<div class="image">
<img src="Sal_group_mesh.png" alt="" width="300px"/>
<div class="caption">
Figure 5: Mesh groups dialog - Faces.</div></div>
<p >The required groups are: applied pressure (face), fixed support (face) and the box itself (volume).</p>
<h2><a class="anchor" id="export_mesh"></a>
Export mesh</h2>
<p >With all of the groups defined, export the mesh to .med file which can be read by <a class="el" href="namespace_mo_f_e_m.html" title="implementation of Data Operators for Forces and Sources">MoFEM</a>.</p>
<p >File -&gt; Export -&gt; MED file</p>
<dl class="section note"><dt>Note</dt><dd>Meshed and geometry <em>sal_beam_mesh.med</em> file could be found in elasticity example directory.</dd></dl>
<h1><a class="anchor" id="using_Salome_tut_solution"></a>
Solution</h1>
<p >Once the mesh (.med file) with required groups is created, material properties, loading and boundary conditions are assigned via <em>cantilever_elasticity.cfg</em> file. Also config file set the material propeties to the blocks. Material properties used in this case are:</p>
<ul>
<li>Young’s modulus = 1</li>
<li><a class="el" href="struct_poisson.html">Poisson</a>'s ratio = 0</li>
</ul>
<p >In <em>cantilever_elasticity.cfg</em> file, change the numbers assigned to blocks, i.e. [block_4] for volume, to correspond to the correct groups. The config file is as follows </p><div class="fragment"><div class="line">[block_3]</div>
<div class="line"># Applying material block</div>
<div class="line">id=1012</div>
<div class="line">add=BLOCKSET</div>
<div class="line">name=MAT_ELASTIC</div>
<div class="line">young=1</div>
<div class="line">poisson=0.0</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">[block_4]</div>
<div class="line"># Boundary conditions</div>
<div class="line">id=1100</div>
<div class="line">add=NODESET</div>
<div class="line">disp_flag1=1</div>
<div class="line">disp_ux=0.0</div>
<div class="line">disp_flag2=1</div>
<div class="line">disp_uy=0.0</div>
<div class="line">disp_flag3=1</div>
<div class="line">disp_uz=0.0</div>
<div class="line"> </div>
<div class="line">[block_2]</div>
<div class="line"># Add pressure</div>
<div class="line">id=1101</div>
<div class="line">add=SIDESET</div>
<div class="line">pressure_flag2=0</div>
<div class="line">pressure_magnitude=1</div>
</div><!-- fragment --><p >To confirm that the properties are assigned to correct groups, read the mesh with the following command (replace <em>sal_beam_mesh.med</em> with the name of your mesh file) </p><div class="fragment"><div class="line">read_med -med_file sal_beam_mesh.med</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>The configuration <em>cantilever_elasticity.cfg</em> file could be found in elasticity example dorectory.</dd>
<dd>
Reding and setting meshblocks with boundary conditions and material blocks is implemented in <a class="el" href="struct_mo_f_e_m_1_1_meshsets_manager.html#a977350c3bd94798931618d026d6eb06d" title="add blocksets reading config file">MoFEM::MeshsetsManager::setMeshsetFromFile</a>, see for more details there.</dd></dl>
<p>Now the cantilever_elasticity.cfg file can be applied to the mesh by </p><div class="fragment"><div class="line">read_med -med_file sal_beam_mesh.med -meshsets_config cantilever_elasticity.cfg </div>
<div class="line">mv out.h5m input_mesh.h5m</div>
</div><!-- fragment --><p >A new file called out.h5m is created in the current folder. It is advised to rename this file to, for example, <em>input_mesh.h5m</em>. Subsequently, the following command is used to run the elastic analysis on the beam problem: </p><div class="fragment"><div class="line">mpirun -np 1 elasticity -my_file input_mesh.h5m -my_order 2</div>
</div><!-- fragment --><p >This will create out.h5m file, which is then converted to out.vtk file using </p><div class="fragment"><div class="line">mbconvert out.h5m out.vtk</div>
</div><!-- fragment --><h1><a class="anchor" id="using_Gmsh_tut_post_process"></a>
Post-processing</h1>
<p >The out.vtk file can be viewed in <a href="https://www.paraview.org/">Paraview</a>. For the cantilever beam problem, the output is shown in the following figure.</p>
<div class="image">
<img src="Simple_Beam_Paraview_030_2.png" alt="" width="600px"/>
<div class="caption">
Figure 6: Beam post-process result</div></div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr cla ss="footer" />
<style>
  img[src="UoGLogo.png"] {
    height: 20px;
    padding-top: 0px;
    padding-right: 1px;
    padding-bottom: 3px;
    padding-left: 6px;
  }
</style>
<address class="footer">
  <small>
    Generated by
    <a href="http://www.doxygen.org/index.html"> Doxygen </a> 1.9.5
    and hosted at
    <a href="http://www.gla.ac.uk/schools/engineering/">
      <img class="footer" src="UoGLogo.png" alt="University of Glasgow" />
    </a>
  </small>
</address>
</body>
</html>