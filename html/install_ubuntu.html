<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=9"/>
  <meta name="generator" content="Doxygen 1.9.8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>MoFEM: Installation on Ubuntu</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
  <script>
    window.MathJax = {
      tex: {
        tags: 'all', // Enables equation numbering
      },
      loader: {
        load: ['[tex]/boldsymbol']
      }
    };
  </script>
  <script type="text/javascript " src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
  <link href="customdoxygen.css" rel="stylesheet" type="text/css" />
  <link href="extra_style.css" rel="stylesheet" type="text/css"/>
  <link rel="apple-touch-icon" sizes="57x57" href="apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="shortcut icon" type="image/png" href="favicon-32x32.png"/>
  <link rel="Bookmark" type="image/png" href="favicon-32x32.png"/>
  <link rel="manifest" href="manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div style="background-color:#011A40" id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 30px;">
  <td id="projectlogo"><img alt="Logo" src="MoFEMLogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <td style="padding-left: 0.5em;" bgcolor="#011A40"
   <div id="projectbrief"><font color="#FFFFFF">v0.15.0</font></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!--Google analytics tags-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-65236130-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2J9RE2P3H5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-2J9RE2P3H5');
</script><!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Installation on Ubuntu</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#ubuntu_prerequisites">Install packages</a></li>
<li class="level1"><a href="#ubuntu_terminal">Open a terminal</a></li>
<li class="level1"><a href="#ubuntu_petsc">Install PETSc and other libraries</a></li>
<li class="level1"><a href="#ubuntu_mofem">Clone source code and install core MoFEM library</a></li>
<li class="level1"><a href="#ubuntu_um">Configuration, compilation and testing user modules</a></li>
<li class="level1"><a href="#ubuntu_testing">Testing</a></li>
<li class="level1"><a href="#ubuntu_um_add">Adding users modules</a></li>
</ul>
</div>
<div class="textblock"><dl class="section note"><dt>Note</dt><dd>This document is for reference ONLY (no longer maintained and supported)</dd></dl>
<p>This type of installation is not advised, some dependent libraries like MoAB or PETSc have very complex dependencies and success of installation depends on the state of your OS, i.e. versions of compilers, installed packages and location of libraries. Installation could be time-consuming. In order to avoid unnecessary effort, we recommend that you will follow installation with Spack.</p>
<p>If you have any problems, feedback or would like to suggest corrections, please email <a href="https://groups.google.com/forum/#!forum/mofem-group">mofem-group@googlegroups.com</a>.</p>
<h1><a class="anchor" id="ubuntu_prerequisites"></a>
Install packages</h1>
<p>Following lines install minimum number of packages need to work with <a class="el" href="namespaceMoFEM.html" title="implementation of Data Operators for Forces and Sources">MoFEM</a>: </p><div class="fragment"><div class="line">apt-get update</div>
<div class="line">apt-get install -y \</div>
<div class="line">file \</div>
<div class="line">zlib1g-dev \</div>
<div class="line">openssh-server \</div>
<div class="line">wget \</div>
<div class="line">valgrind \</div>
<div class="line">git \</div>
<div class="line">g++ \</div>
<div class="line">gfortran \</div>
<div class="line">gdb \</div>
<div class="line">m4 \</div>
<div class="line">automake \</div>
<div class="line">build-essential \</div>
<div class="line">libtool \</div>
<div class="line">libblas-dev \</div>
<div class="line">liblapack-dev \</div>
<div class="line">libsigsegv2 \</div>
<div class="line">libjpeg-dev \</div>
<div class="line">graphviz \</div>
<div class="line">doxygen \</div>
<div class="line">cmake \</div>
<div class="line">gnuplot \</div>
<div class="line">pstack \</div>
<div class="line">ca-certificates \</div>
<div class="line">python \</div>
<div class="line">bison \</div>
<div class="line">flex \</div>
<div class="line">libx11-dev \</div>
<div class="line">libboost-all-dev \</div>
<div class="line">libopenmpi-dev \</div>
<div class="line">openmpi-bin \</div>
<div class="line">xauth \</div>
<div class="line">xterm \</div>
<div class="line">unzip \</div>
<div class="line">tk8.6-dev \</div>
<div class="line">libfreetype6-dev \</div>
<div class="line">mesa-common-dev \</div>
<div class="line">libglu1-mesa-dev \</div>
<div class="line">libxmu-dev \</div>
<div class="line">libxi-dev \</div>
<div class="line">libssl-dev</div>
</div><!-- fragment --><h1><a class="anchor" id="ubuntu_terminal"></a>
Open a terminal</h1>
<p>Create mofem install director: </p><div class="fragment"><div class="line">export MOFEM_INSTALL_DIR=$HOME/mofem_installation</div>
<div class="line">mkdir $MOFEM_INSTALL_DIR</div>
</div><!-- fragment --><h1><a class="anchor" id="ubuntu_petsc"></a>
Install PETSc and other libraries</h1>
<div class="fragment"><div class="line"># Change to your $MOFEM_INSTALL_DIR</div>
<div class="line">cd $MOFEM_INSTALL_DIR</div>
<div class="line"> </div>
<div class="line"># Colone PETSc repository:</div>
<div class="line">git clone https://bitbucket.org/petsc/petsc.git</div>
<div class="line">cd $MOFEM_INSTALL_DIR/petsc</div>
<div class="line"> </div>
<div class="line"># Fix PETSc version</div>
<div class="line">export PETSC_VERSION=3.11.3</div>
<div class="line">git checkout tags/v$PETSC_VERSION</div>
<div class="line"> </div>
<div class="line"># Configure and compile petsc:</div>
<div class="line">./configure --with-mpi=1 --with-debugging=0 \</div>
<div class="line">--download-superlu_dist=1 --download-metis=1 --download-parmetis=1 --download-hypre=1 \</div>
<div class="line">--download-mumps=1 --download-scalapack=1 --download-blacs=1 --download-moab=1 \</div>
<div class="line">--download-ptscotch=1 --download-hdf5=1 --download-netcdf=1 \</div>
<div class="line">--with-shared-libraries=1 &amp;&amp; \</div>
<div class="line">make PETSC_DIR=$PWD PETSC_ARCH=arch-linux2-c-opt all</div>
<div class="line"> </div>
<div class="line"># Add path to petsc binaries, you can add that line to .bashrc</div>
<div class="line">export PATH=$MOFEM_INSTALL_DIR/petsc/arch-linux2-c-opt/bin:$PATH</div>
</div><!-- fragment --><p>Note: PETSc is compiled with debugging switch off for efficiency. If you develop code is recommended that you compile PETSc with debugging flag on in addition. You can have two versions of <a class="el" href="namespaceMoFEM.html" title="implementation of Data Operators for Forces and Sources">MoFEM</a> compiled, for debugging and development and other version for larger calculations.</p>
<h1><a class="anchor" id="ubuntu_mofem"></a>
Clone source code and install core MoFEM library</h1>
<div class="fragment"><div class="line"># Change to your $MOFEM_INSTALL_DIR</div>
<div class="line">cd $MOFEM_INSTALL_DIR</div>
<div class="line"> </div>
<div class="line"># Cloning MoFEM source code:</div>
<div class="line">git clone --recurse-submodules https://bitbucket.org/likask/mofem-cephas.git mofem-cephas</div>
<div class="line"> </div>
<div class="line"># Make a build directory</div>
<div class="line">mkdir $MOFEM_INSTALL_DIR/lib</div>
<div class="line">cd $MOFEM_INSTALL_DIR/lib</div>
<div class="line"> </div>
<div class="line"># Configuring and compiling code:</div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=Release \</div>
<div class="line"> -DPETSC_DIR=$MOFEM_INSTALL_DIR/petsc/ -DPETSC_ARCH=arch-linux2-c-opt \</div>
<div class="line"> -DMOAB_DIR=$MOFEM_INSTALL_DIR/petsc/arch-linux2-c-opt/ \</div>
<div class="line"> -DWITH_ADOL-C=1 -DWITH_TETGEN=1 -DWITH_MED=1 \</div>
<div class="line"> -DCMAKE_INSTALL_PREFIX=$MOFEM_INSTALL_DIR/users_modules \</div>
<div class="line"> $MOFEM_INSTALL_DIR/mofem-cephas/mofem</div>
<div class="line"> </div>
<div class="line"># Building code (assuming that you have computer with 4 cores):</div>
<div class="line">make -j4 install</div>
<div class="line"> </div>
<div class="line"># Testing and publishing results on MoFEM CDashTesting WebPage:</div>
<div class="line">ctest -D Experimental</div>
</div><!-- fragment --><h1><a class="anchor" id="ubuntu_um"></a>
Configuration, compilation and testing user modules</h1>
<p>Before you start this version, change directory to install directory </p><div class="fragment"><div class="line">cd $MOFEM_INSTALL_DIR/users_modules</div>
<div class="line"># Configuration:</div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=Release users_modules</div>
<div class="line"># Build:</div>
<div class="line">make -j4</div>
</div><!-- fragment --><h1><a class="anchor" id="ubuntu_testing"></a>
Testing</h1>
<div class="fragment"><div class="line">ctest -D Experimental</div>
</div><!-- fragment --><p>Note that results of the tests are publish on <a class="el" href="namespaceMoFEM.html" title="implementation of Data Operators for Forces and Sources">MoFEM</a> CDashTesting web page. If you do not wish to publish results remove option <code>-D Experimental</code></p>
<h1><a class="anchor" id="ubuntu_um_add"></a>
Adding users modules</h1>
<p><a class="el" href="namespaceMoFEM.html" title="implementation of Data Operators for Forces and Sources">MoFEM</a> is extendable and you can upload additional users modules, see some of the <a class="el" href="mod_gallery.html">here</a>. You can upload them to the independent directory and provide a path by setting </p><div class="fragment"><div class="line">-DEXTERNAL_MODULE_SOURCE_DIRS=$PATH_TO_MY_DIR</div>
</div><!-- fragment --><p> or upload them to <em>$MOFEM_INSTALL_DIR/users_modules/users_modules</em>. You have to re-run cmake, build and test code. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr cla ss="footer" />
<style>
  img[src="UoGLogo.png"] {
    height: 20px;
    padding-top: 0px;
    padding-right: 1px;
    padding-bottom: 3px;
    padding-left: 6px;
  }
</style>
<address class="footer">
  <small>
    Generated by
    <a href="http://www.doxygen.org/index.html"> Doxygen </a> 1.9.8
    and hosted at
    <a href="http://www.gla.ac.uk/schools/engineering/">
      <img class="footer" src="UoGLogo.png" alt="University of Glasgow" />
    </a>
  </small>
</address>
</body>
</html>