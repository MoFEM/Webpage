<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=9"/>
  <meta name="generator" content="Doxygen 1.12.0"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>MoFEM: MSH-2: Create a 3D mesh from Gmsh</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
  <script type="text/javascript " src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML "></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        extensions: ["AMSmath.js"],
        TeX: { equationNumbers: { autoNumber: ["all"],
                                  useLabelIds: true
        } 
        }
    });
    </script>
  <link href="customdoxygen.css" rel="stylesheet" type="text/css" />
  <link href="extra_style.css" rel="stylesheet" type="text/css"/>
  <link rel="apple-touch-icon" sizes="57x57" href="apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="shortcut icon" type="image/png" href="favicon-32x32.png"/>
  <link rel="Bookmark" type="image/png" href="favicon-32x32.png"/>
  <link rel="manifest" href="manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div style="background-color:#011A40" id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 30px;">
  <td id="projectlogo"><img alt="Logo" src="MoFEMLogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <td style="padding-left: 0.5em;" bgcolor="#011A40"
   <div id="projectbrief"><font color="#FFFFFF">v0.14.0</font></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!--Google analytics tags-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-65236130-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2J9RE2P3H5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-2J9RE2P3H5');
</script>
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">MSH-2: Create a 3D mesh from Gmsh</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#basic_tutorials_mesh_generation_3d_introduction">Introduction</a>
  </li>
  <li class="level1">
    <a href="#basic_tutorials_mesh_generation_3d_geometry">Geometry and physical group</a>
    <ul>
      <li class="level2">
        <a href="#basic_tutorials_mesh_generation_3d_geometry_creation">Geometry</a>
      </li>
      <li class="level2">
        <a href="#basic_tutorials_mesh_generation_3d_geometry_physical_group">Physical group</a>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#basic_tutorials_mesh_generation_3d_mesh">Mesh generation</a>
    <ul>
      <li class="level2">
        <a href="#basic_tutorials_mesh_generation_3d_create_mesh">Create the mesh</a>
      </li>
      <li class="level2">
        <a href="#basic_tutorials_mesh_generation_3d_export_mesh">Export mesh in MED format</a>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#basic_tutorials_mesh_generation_3d_mofem_input">MoFEM-compatible input mesh</a>
    <ul>
      <li class="level2">
        <a href="#basic_tutorials_mesh_generation_3d_config_file">Create config file</a>
      </li>
      <li class="level2">
        <a href="#basic_tutorials_mesh_generation_3d_mofem_mesh">Generate MoFEM-compatible mesh</a>
      </li>
    </ul>
  </li>
</ul>
</div>
<div class="textblock"><dl class="section note"><dt>Note</dt><dd>Prerequisite of this tutorial is <a class="el" href="basic_tutorials_mesh_generation_2d.html">MSH-1: Create a 2D mesh from Gmsh</a></dd></dl>
<p><br  />
</p>
<dl class="section note"><dt>Note</dt><dd>Intended learning outcome:<ul>
<li>create a 2D mesh using <a href="https://gmsh.info">Gmsh</a></li>
<li>create a seperate config file to add attributes to blocksets</li>
<li>use a <a class="el" href="namespace_mo_f_e_m.html" title="implementation of Data Operators for Forces and Sources">MoFEM</a> tool called <code>read_med</code> to generate a MoFEM-compatible input mesh</li>
</ul>
</dd></dl>
<h1><a class="anchor" id="basic_tutorials_mesh_generation_3d_introduction"></a>
Introduction</h1>
<p>This tutorial shows how to create a simple 3D square mesh in <a href="https://gmsh.info">Gmsh</a> with some physical groups and then use the <a class="el" href="namespace_mo_f_e_m.html" title="implementation of Data Operators for Forces and Sources">MoFEM</a> tool <code>read_med</code> to generate a MoFEM-compatible input mesh for analysis. This would be largely the same as those presented in <a class="el" href="basic_tutorials_mesh_generation_2d.html">MSH-1: Create a 2D mesh from Gmsh</a> which readers are recommended to have a look at first.</p>
<p>The steps presented in this turorial are as follows</p>
<ul>
<li>Create geometry, physical group and mesh in Gmsh</li>
<li>Create a seperate config file to add attributes to blocksets (physical group)</li>
<li>Use <code>read_med</code> to generate a MoFEM-compatible input mesh</li>
</ul>
<p>The data presented in this tutorial can be found at the directory <code>/mofem_install/mofem-cephas/mofem/users_modules/tutorials/msh-2</code></p>
<h1><a class="anchor" id="basic_tutorials_mesh_generation_3d_geometry"></a>
Geometry and physical group</h1>
<h2><a class="anchor" id="basic_tutorials_mesh_generation_3d_geometry_creation"></a>
Geometry</h2>
<p>In order to create a geometry of a square, from the panel on the left, choose <code>Modules -&gt; Geometry -&gt; Elementary entities -&gt; Add -&gt; Box</code>. Then provide the geometry inputs including location (X, Y, Z) and dimensions (DX, DY, DZ) as shown in <a class="el" href="#figure_cube_dimensions">Figure 1</a> and click <code>Add</code> and then press <code>q</code> on the keyboard to finish.</p>
<p><a class="anchor" id="figure_cube_dimensions"></a></p><div class="image">
<img src="cube_dimensions.png" alt="" width="900px"/>
<div class="caption">
Figure 1: Input location (X, Y, Z) and dimensions (DX, DY, DZ) for the cube.</div></div>
<h2><a class="anchor" id="basic_tutorials_mesh_generation_3d_geometry_physical_group"></a>
Physical group</h2>
<p>As discussed in <a class="el" href="basic_tutorials_mesh_generation_2d.html">MSH-1: Create a 2D mesh from Gmsh</a>, physical groups are used to define groups of entities that later will be given attributes which will be read by <a class="el" href="namespace_mo_f_e_m.html" title="implementation of Data Operators for Forces and Sources">MoFEM</a> during analysis.</p>
<p>As a demonstration, physical groups of edges, surface and volume of the created cube will be defined as shown in <a class="el" href="#figure_cube_physical_group_top_edges">Figure 2</a>, <a class="el" href="#figure_cube_physical_group_bottom_edges">Figure 3</a>, <a class="el" href="#figure_cube_physical_group_top_surface">Figure 4</a>, <a class="el" href="#figure_cube_physical_group_bottom_surface">Figure 5</a>, and <a class="el" href="#figure_cube_physical_group_volume">Figure 6</a>. It can be done by choosing, from the left panel, <code>Modules -&gt; Geometry -&gt; Physical groups -&gt; Add -&gt; Curve/Surface/Volume</code>. Then give name of a physical groups in the box <code>Name</code>, select entities to add to the corresponding groups and finally press <code>e</code> to end the selection.</p>
<p><a class="anchor" id="figure_cube_physical_group_top_edges"></a></p><div class="image">
<img src="cube_physical_group_top_edges.png" alt="" width="900px"/>
<div class="caption">
Figure 2: Define physical group of the top edges.</div></div>
<p><a class="anchor" id="figure_cube_physical_group_bottom_edges"></a></p><div class="image">
<img src="cube_physical_group_bottom_edges.png" alt="" width="900p"/>
<div class="caption">
Figure 3: Define physical group of the bottom edges.</div></div>
<p><a class="anchor" id="figure_cube_physical_group_top_surface"></a></p><div class="image">
<img src="cube_physical_group_top_surface.png" alt="" width="900p"/>
<div class="caption">
Figure 4: Define physical group of the top surface.</div></div>
<p><a class="anchor" id="figure_cube_physical_group_bottom_surface"></a></p><div class="image">
<img src="cube_physical_group_bottom_surface.png" alt="" width="900p"/>
<div class="caption">
Figure 5: Define physical group of the bottom surface.</div></div>
<p><a class="anchor" id="figure_cube_physical_group_volume"></a></p><div class="image">
<img src="cube_physical_group_volume.png" alt="" width="900p"/>
<div class="caption">
Figure 6: Define physical group of the volume.</div></div>
<h1><a class="anchor" id="basic_tutorials_mesh_generation_3d_mesh"></a>
Mesh generation</h1>
<h2><a class="anchor" id="basic_tutorials_mesh_generation_3d_create_mesh"></a>
Create the mesh</h2>
<p>Go to <code>Tools -&gt; Options -&gt; Mesh</code>, in the <code>General</code> tab, choose the meshing algorithms and change the element size factor, e.g. 1 as shown in <a class="el" href="#figure_cube_mesh">Figure 7</a>, then close the window. To create the 2D mesh for the square, on the left panel, choose <code>Modules -&gt; Mesh -&gt; 3D</code>.</p>
<p><a class="anchor" id="figure_cube_mesh"></a></p><div class="image">
<img src="cube_mesh.png" alt="" width="900px"/>
<div class="caption">
Figure 7: Mesh generation.</div></div>
<h2><a class="anchor" id="basic_tutorials_mesh_generation_3d_export_mesh"></a>
Export mesh in MED format</h2>
<p>A preferred mesh format that will be exported is <code>MED</code>. This can be done by go to <code>File -&gt; Export ...</code> then choose the file type <code>Mesh - MED (*.med)</code> and give a file name, e.g. <code>cube.med</code></p>
<h1><a class="anchor" id="basic_tutorials_mesh_generation_3d_mofem_input"></a>
MoFEM-compatible input mesh</h1>
<p>This section would be very similar to the one presented in <a class="el" href="basic_tutorials_mesh_generation_2d.html">MSH-1: Create a 2D mesh from Gmsh</a>. The following steps will be presented</p>
<ul>
<li>Create a config file to add information (block name, material properties, boundary conditions, loadings) to the defined physical groups (blocksets)</li>
<li>Generate MoFEM-compatible input mesh in <code>*.h5m</code> format using <code>read_med</code> tool</li>
</ul>
<h2><a class="anchor" id="basic_tutorials_mesh_generation_3d_config_file"></a>
Create config file</h2>
<p>As the mesh created by Gmsh does not contains attributes that may be needed for some tasks for analysis in <a class="el" href="namespace_mo_f_e_m.html" title="implementation of Data Operators for Forces and Sources">MoFEM</a>, e.g. blockset with a specific name to add material properties, boundary conditions, loadings. We need to know the exact ID of the physical group (blockset) in the MED file in order to add attributes to that blockset, we can check the IDs by running the <code>read_med</code> as follows</p>
<div class="fragment"><div class="line">read_med -med_file <a class="code hl_function" href="nonlinear__poisson__2d_8cpp.html#af4080b4104d18fe9035d130afdcc2a9c">cube</a>.med</div>
<div class="ttc" id="anonlinear__poisson__2d_8cpp_html_af4080b4104d18fe9035d130afdcc2a9c"><div class="ttname"><a href="nonlinear__poisson__2d_8cpp.html#af4080b4104d18fe9035d130afdcc2a9c">cube</a></div><div class="ttdeci">double cube(const double x)</div><div class="ttdef"><b>Definition</b> <a href="nonlinear__poisson__2d_8cpp_source.html#l00013">nonlinear_poisson_2d.cpp:13</a></div></div>
</div><!-- fragment --><p>which would show that the defined physical groups along with their IDs as in the following output message </p><div class="fragment"><div class="line">[0] &lt;inform&gt; <a class="code hl_namespace" href="namespace_mo_f_e_m.html">MoFEM</a> version 0.11.0 (MOAB 5.2.1 Petsc Release Version 3.11.4, Sep, 28, 2019 )</div>
<div class="line">[0] &lt;inform&gt; git commit <span class="keywordtype">id</span> 0ac8895b15c4ad41ea5e7077c4d011f7efb50f13</div>
<div class="line">[0] &lt;inform&gt; [MedInterface] Reading MED file V4.1.0 <span class="keyword">using</span> MED library V4.1.0</div>
<div class="line">[0] &lt;inform&gt; [MedInterface] Check mesh <a class="code hl_function" href="nonlinear__poisson__2d_8cpp.html#af4080b4104d18fe9035d130afdcc2a9c">cube</a> nsteps 1</div>
<div class="line">[0] &lt;inform&gt; [MedInterface] Reading mesh <a class="code hl_function" href="nonlinear__poisson__2d_8cpp.html#af4080b4104d18fe9035d130afdcc2a9c">cube</a> nsteps 1</div>
<div class="line">[0] &lt;inform&gt; [MedInterface] Read number of nodes 364</div>
<div class="line">[0] &lt;inform&gt; [read_med] Print all meshsets (old and added from meshsets configurational file</div>
<div class="line">[0] &lt;inform&gt; [read_med] meshset 12682136550675316737 type <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a> <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca89bb943f8f004923f508f5223b144e45">UNKNOWNNAME</a> msId 1 name <a class="code hl_function" href="nonlinear__poisson__2d_8cpp.html#af4080b4104d18fe9035d130afdcc2a9c">cube</a></div>
<div class="line">[0] &lt;inform&gt; [read_med] meshset 12682136550675316738 type <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a> <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca89bb943f8f004923f508f5223b144e45">UNKNOWNNAME</a> msId 2 name bottom_edges                   </div>
<div class="line">[0] &lt;inform&gt; [read_med] meshset 12682136550675316739 type <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a> <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca89bb943f8f004923f508f5223b144e45">UNKNOWNNAME</a> msId 3 name bottom_surface                 </div>
<div class="line">[0] &lt;inform&gt; [read_med] meshset 12682136550675316740 type <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a> <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca89bb943f8f004923f508f5223b144e45">UNKNOWNNAME</a> msId 4 name top_edges                      </div>
<div class="line">[0] &lt;inform&gt; [read_med] meshset 12682136550675316741 type <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a> <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca89bb943f8f004923f508f5223b144e45">UNKNOWNNAME</a> msId 5 name top_surface                    </div>
<div class="line">[0] &lt;inform&gt; [read_med] meshset 12682136550675316742 type <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a> <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca89bb943f8f004923f508f5223b144e45">UNKNOWNNAME</a> msId 6 name volume  </div>
<div class="ttc" id="adefinitions_8h_html_a82340fd7aca566defb002f93cc299efca89bb943f8f004923f508f5223b144e45"><div class="ttname"><a href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca89bb943f8f004923f508f5223b144e45">UNKNOWNNAME</a></div><div class="ttdeci">@ UNKNOWNNAME</div><div class="ttdef"><b>Definition</b> <a href="definitions_8h_source.html#l00171">definitions.h:171</a></div></div>
<div class="ttc" id="adefinitions_8h_html_a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab"><div class="ttname"><a href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a></div><div class="ttdeci">@ BLOCKSET</div><div class="ttdef"><b>Definition</b> <a href="definitions_8h_source.html#l00161">definitions.h:161</a></div></div>
<div class="ttc" id="anamespace_mo_f_e_m_html"><div class="ttname"><a href="namespace_mo_f_e_m.html">MoFEM</a></div><div class="ttdoc">implementation of Data Operators for Forces and Sources</div><div class="ttdef"><b>Definition</b> <a href="_common_8hpp_source.html#l00010">Common.hpp:10</a></div></div>
</div><!-- fragment --><p>We would then use these IDs in the config file, named <code>cube.config</code>, as below to add materials properties (for block_1), add a specific name that can be used later in the source code to do certain operations (for block_2), directly add boundary conditions/constraints or springs (for block_3), and loading such as pressure (for block_5)</p>
<div class="fragment"><div class="line">[block_1]</div>
<div class="line"><span class="preprocessor"># `cube` (1) or `volume` (6) block - Add isotropic elastic material properties</span></div>
<div class="line"><span class="keywordtype">id</span>=100</div>
<div class="line">add=<a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a></div>
<div class="line">name=MAT_ELASTIC</div>
<div class="line">young=1</div>
<div class="line">poisson=0.1</div>
<div class="line"> </div>
<div class="line">[block_2]</div>
<div class="line"><span class="preprocessor"># `bottom_edges` block - Add block and give it a specific name</span></div>
<div class="line"><span class="keywordtype">id</span>=110</div>
<div class="line">add=<a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a></div>
<div class="line">name=BOUNDARY_CONDITION</div>
<div class="line"> </div>
<div class="line">[block_3]</div>
<div class="line"><span class="preprocessor"># `bottom_surface` block - Add block and apply displacement constraints</span></div>
<div class="line"><span class="keywordtype">id</span>=120</div>
<div class="line">add=<a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca7b4c0e5ae1385e1224a6e59abf47ecc0">NODESET</a> </div>
<div class="line">disp_flag1=1</div>
<div class="line">disp_ux=0.0</div>
<div class="line">disp_flag2=1</div>
<div class="line">disp_uy=0.0</div>
<div class="line">disp_flag3=1</div>
<div class="line">disp_uz=0.0</div>
<div class="line"> </div>
<div class="line">[block_3]</div>
<div class="line"><span class="preprocessor"># `bottom_surface` block - Add block and apply springs (if no other boundary conditions)</span></div>
<div class="line"><span class="preprocessor">#id=121</span></div>
<div class="line"><span class="preprocessor">#add=BLOCKSET</span></div>
<div class="line"><span class="preprocessor">#name=SPRING_BC</span></div>
<div class="line"><span class="preprocessor">#user1=1          # Spring stiffness in normal direction</span></div>
<div class="line"><span class="preprocessor">#user2=0.1      # Spring stiffness in tangential direction</span></div>
<div class="line"> </div>
<div class="line">[block_5]</div>
<div class="line"><span class="preprocessor"># `top_surface` block - Add block and apply pressure</span></div>
<div class="line"><span class="keywordtype">id</span>=130</div>
<div class="line">add=<a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca86c05035d6a2fbc5762f39215d6a8a22">SIDESET</a></div>
<div class="line">pressure_flag2=1</div>
<div class="line">pressure_magnitude=0.1</div>
<div class="ttc" id="adefinitions_8h_html_a82340fd7aca566defb002f93cc299efca7b4c0e5ae1385e1224a6e59abf47ecc0"><div class="ttname"><a href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca7b4c0e5ae1385e1224a6e59abf47ecc0">NODESET</a></div><div class="ttdeci">@ NODESET</div><div class="ttdef"><b>Definition</b> <a href="definitions_8h_source.html#l00159">definitions.h:159</a></div></div>
<div class="ttc" id="adefinitions_8h_html_a82340fd7aca566defb002f93cc299efca86c05035d6a2fbc5762f39215d6a8a22"><div class="ttname"><a href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca86c05035d6a2fbc5762f39215d6a8a22">SIDESET</a></div><div class="ttdeci">@ SIDESET</div><div class="ttdef"><b>Definition</b> <a href="definitions_8h_source.html#l00160">definitions.h:160</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="basic_tutorials_mesh_generation_3d_mofem_mesh"></a>
Generate MoFEM-compatible mesh</h2>
<p>Once the <code>MED</code> file and config file are ready, the final mesh file in <code>*.h5m</code> format that contains necessary information and can read by <a class="el" href="namespace_mo_f_e_m.html" title="implementation of Data Operators for Forces and Sources">MoFEM</a> can be generated by running the command below</p>
<div class="fragment"><div class="line">read_med -med_file <a class="code hl_function" href="nonlinear__poisson__2d_8cpp.html#af4080b4104d18fe9035d130afdcc2a9c">cube</a>.med -meshsets_config  <a class="code hl_function" href="nonlinear__poisson__2d_8cpp.html#af4080b4104d18fe9035d130afdcc2a9c">cube</a>.config -output_file <a class="code hl_function" href="nonlinear__poisson__2d_8cpp.html#af4080b4104d18fe9035d130afdcc2a9c">cube</a>.h5m</div>
</div><!-- fragment --><p>After running this command, the <code>cube.h5m</code> file will be created and the main part of the output message would look like this</p>
<div class="fragment"><div class="line">[0] &lt;inform&gt; [read_med] Print all meshsets (old and added from meshsets configurational file</div>
<div class="line">[0] &lt;inform&gt; [read_med] meshset 12682136550675316737 type <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a> <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca89bb943f8f004923f508f5223b144e45">UNKNOWNNAME</a> msId 1 name <a class="code hl_function" href="nonlinear__poisson__2d_8cpp.html#af4080b4104d18fe9035d130afdcc2a9c">cube</a></div>
<div class="line">[0] &lt;inform&gt; [read_med] meshset 12682136550675316738 type <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a> <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca89bb943f8f004923f508f5223b144e45">UNKNOWNNAME</a> msId 2 name bottom_edges                   </div>
<div class="line">[0] &lt;inform&gt; [read_med] meshset 12682136550675316739 type <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a> <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca89bb943f8f004923f508f5223b144e45">UNKNOWNNAME</a> msId 3 name bottom_surface                 </div>
<div class="line">[0] &lt;inform&gt; [read_med] meshset 12682136550675316740 type <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a> <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca89bb943f8f004923f508f5223b144e45">UNKNOWNNAME</a> msId 4 name top_edges                      </div>
<div class="line">[0] &lt;inform&gt; [read_med] meshset 12682136550675316741 type <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a> <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca89bb943f8f004923f508f5223b144e45">UNKNOWNNAME</a> msId 5 name top_surface                    </div>
<div class="line">[0] &lt;inform&gt; [read_med] meshset 12682136550675316742 type <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a> <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca89bb943f8f004923f508f5223b144e45">UNKNOWNNAME</a> msId 6 name volume                         </div>
<div class="line">[0] &lt;inform&gt; [read_med] meshset 12682136550675316743 type <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a> <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca416c3e3070d3438afe45ae7359d0559e">MAT_ELASTICSET</a> msId 100 name MAT_ELASTIC</div>
<div class="line">[0] &lt;inform&gt; [read_med] meshset 12682136550675316744 type <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efcac77b6cdcfb446c668fd1d7c66cfd15ab">BLOCKSET</a> <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca89bb943f8f004923f508f5223b144e45">UNKNOWNNAME</a> msId 110 name BOUNDARY_CONDITION</div>
<div class="line">[0] &lt;inform&gt; [read_med] meshset 12682136550675316745 type <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca7b4c0e5ae1385e1224a6e59abf47ecc0">NODESET</a> <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca9617e89781f10fe417167bc4bd86a843">DISPLACEMENTSET</a> msId 120</div>
<div class="line">[0] &lt;inform&gt; [read_med] meshset 12682136550675316746 type <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca86c05035d6a2fbc5762f39215d6a8a22">SIDESET</a> <a class="code hl_enumvalue" href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca1aacb952ebfd7b0ad16085a9bf1fcf0a">PRESSURESET</a> msId 130</div>
<div class="ttc" id="adefinitions_8h_html_a82340fd7aca566defb002f93cc299efca1aacb952ebfd7b0ad16085a9bf1fcf0a"><div class="ttname"><a href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca1aacb952ebfd7b0ad16085a9bf1fcf0a">PRESSURESET</a></div><div class="ttdeci">@ PRESSURESET</div><div class="ttdef"><b>Definition</b> <a href="definitions_8h_source.html#l00165">definitions.h:165</a></div></div>
<div class="ttc" id="adefinitions_8h_html_a82340fd7aca566defb002f93cc299efca416c3e3070d3438afe45ae7359d0559e"><div class="ttname"><a href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca416c3e3070d3438afe45ae7359d0559e">MAT_ELASTICSET</a></div><div class="ttdeci">@ MAT_ELASTICSET</div><div class="ttdoc">block name is &quot;MAT_ELASTIC&quot;</div><div class="ttdef"><b>Definition</b> <a href="definitions_8h_source.html#l00172">definitions.h:172</a></div></div>
<div class="ttc" id="adefinitions_8h_html_a82340fd7aca566defb002f93cc299efca9617e89781f10fe417167bc4bd86a843"><div class="ttname"><a href="definitions_8h.html#a82340fd7aca566defb002f93cc299efca9617e89781f10fe417167bc4bd86a843">DISPLACEMENTSET</a></div><div class="ttdeci">@ DISPLACEMENTSET</div><div class="ttdef"><b>Definition</b> <a href="definitions_8h_source.html#l00163">definitions.h:163</a></div></div>
</div><!-- fragment --><p>As can be seen, along with the original blocksets 1 to 6, the output mesh <code>cube.h5m</code> now contains the three new blocksets 100, 110, 120 and 130 with additional attributes. Using the same concept, more blocksets for different purposes can be added to the mesh.</p>
<p>Once the final <code>cube.h5m</code> mesh is generated, it can be used directly as an input in <a class="el" href="namespace_mo_f_e_m.html" title="implementation of Data Operators for Forces and Sources">MoFEM</a> programs, e.g. elasticity or <a class="el" href="basic_tutorials_poisson_homogeneous.html">SCL-1: Poisson's equation (homogeneous BC)</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr cla ss="footer" />
<style>
  img[src="UoGLogo.png"] {
    height: 20px;
    padding-top: 0px;
    padding-right: 1px;
    padding-bottom: 3px;
    padding-left: 6px;
  }
</style>
<address class="footer">
  <small>
    Generated by
    <a href="http://www.doxygen.org/index.html"> Doxygen </a> 1.12.0
    and hosted at
    <a href="http://www.gla.ac.uk/schools/engineering/">
      <img class="footer" src="UoGLogo.png" alt="University of Glasgow" />
    </a>
  </small>
</address>
</body>
</html>
